import{g as $,u as Cd,h as jd,i as js,a as u,j as s,L as Q,l as yd,m as xe,n as Ue,o as Dt,N as en,p as Ye,O as Bo,q as tn,E as vi,Z as Sd,s as vd,t as wi,v as wd,x as bd,y as K,z as Id,P as Pd,B as Td}from"./react-D-ZepAEl.js";import{D as w,l as qt,m as Ad,n as Ys,o as R,p as F,q as L,t as W,v as be,x as de,y as sn,z as bi,A as pe,B as Nd,C as Ed,T as E,I as ye,E as le,V as Od,F as Dd,G as b,S as v,H as _,L as z,J as j,K as Ko,M as Ld,N,O as tt,P as qe,Q as P,R as wn,U as kd,W as ct,X as Zt,Y as U,Z as h,$ as lt,a0 as Rd,a1 as X,a2 as Md,a3 as Ud,a4 as Ae,a5 as Ii,a6 as Pi,a7 as Ti,a8 as Ai,a9 as Ni,aa as D,ab as Fd,ac as $o,ad as dt,ae as Lt,af as nn,ag as ie,ah as Wt,ai as zo,aj as te,ak as Wo,al as hr,am as ks,an as Ei,ao as Oi,ap as fr,aq as ut,ar as kt,as as mt,at as pt,au as _t,av as Le,aw as Gn,ax as qs,ay as gs,az as Di,aA as Li,aB as ys,aC as gr,aD as xr,aE as ki,aF as Vn,aG as _d,aH as rn,aI as Hd,aJ as Go,aK as Ri,aL as lo,aM as Zs,aN as Vo,aO as Bd,aP as Mi,aQ as Kd,aR as $d,aS as Ui,aT as Fi,aU as _i,aV as Yo,aW as Hi,aX as Bi,aY as Ki,aZ as Gt,a_ as qo,a$ as $i,b0 as zi,b1 as zd,b2 as Wd,b3 as Gd,b4 as Ma,b5 as Vd,b6 as Wi,b7 as Yd,b8 as qd,b9 as Zd,ba as Jd,bb as Xd,bc as Gi,bd as Vi,be as Zo,bf as Qd,bg as Yi,bh as eu,bi as on,bj as qi,bk as tu,bl as Jo,bm as su,bn as nu,bo as ru,bp as ou,bq as au,br as Zi,bs as iu,bt as cu,bu as lu,bv as du,bw as uu,bx as mu,by as pu}from"./mui-sBa6CgZE.js";const Ua=e=>new w(e.TaxableSalesAmt??0).add(e.NonTaxableSalesAmt??0).sub(e.DiscountAmt??0),_e=e=>`${e.InvoiceNo}-${e.InvoiceType}`,bn=(e=Dn)=>(t,n)=>{const{field:r,ascending:o}=e,a=o?1:-1;switch(r){case"InvoiceDate":case"SalesOrderNo":case"CustomerPONo":case"OrderDate":case"ShipToName":case"ShipToCity":case"InvoiceDueDate":return((t[r]??"")===(n[r]??"")?_e(t)>_e(n)?1:-1:(t[r]??"")>(n[r]??"")?1:-1)*a;case"TaxableSalesAmt":case"NonTaxableSalesAmt":{const i=Ua(t),c=Ua(n);return(i.eq(c)?_e(t)>_e(n)?1:-1:i.gt(c)?1:-1)*a}case"Balance":return(new w(t[r]??0).sub(n[r]??0).toNumber()||(_e(t)>_e(n)?1:-1))*a;default:return(_e(t)>_e(n)?1:-1)*a}};function hu(e){return!!e&&typeof e.Detail<"u"}const fu=e=>e?gu[e]??null:null,gu={"00":{description:"No Terms",due:0},"01":{description:"COD",due:15},"02":{description:"Net 30 Days",due:30},"03":{description:"2% 10 Net 30",due:30},"04":{description:"Credit Card",due:0},"05":{description:"Net",due:1},"06":{description:"1% 10 Net 30",due:30},"08":{description:"2% 10 Net 60",due:60},"09":{description:"3% 10 Net 31",due:31},10:{description:"COD Cash",due:15},13:{description:"Net 15 Days",due:15},14:{description:"Net 45 Days",due:45},15:{description:"Net 60 Days",due:60},16:{description:"Net 7 Days",due:7},17:{description:"2% 10 Net 15",due:15},19:{description:"10% 30 Net 31",due:31},22:{description:"5% 30 Net 31",due:31},23:{description:"Net 10 Days",due:10},26:{description:"Wire Transfer",due:0},28:{description:"5% Net 60",due:60},29:{description:"5% 60 Net 61",due:61},30:{description:"1% 15 Net 30",due:30},31:{description:"2% 10 Net 45",due:45},32:{description:"2% 10 Net 61",due:61},33:{description:"2% 60 Net 61",due:61},34:{description:"Check In Advance",due:0},38:{description:"2% Net 40",due:40},39:{description:"2% 30 Net 90",due:90},40:{description:"2% 15 Net 50",due:50},90:{description:"Net 90 Days",due:90},92:{description:"Net 120 Days",due:120},98:{description:"Cash In Advance",due:0},99:{description:"*Net 30 Days",due:30}},ns={TERMS:{code:"TERMS",sageCode:"",description:"Terms",message:"PO # is required.",allowTerms:!0,allowCC:!1,disabled:!1,requirePO:!0,prepaid:!1},OTHER:{code:"OTHER",sageCode:"OTHER",description:"Credit Card",message:"If you don't have a current card on file the Customer Service Team will send a secure link to enter a new credit card.",allowTerms:!1,allowCC:!1,disabled:!1,requirePO:!1,prepaid:!1},CHECK:{code:"CHECK",sageCode:"CHECK",description:"Check",message:"Payment must be received before order is shipped.",allowTerms:!1,allowCC:!1,disabled:!1,requirePO:!1,prepaid:!0},"1M/V":{code:"1M/V",sageCode:"1M/V",description:"Credit Card (MC/Visa)",message:"Pay with credit card on file.",allowTerms:!1,allowCC:!0,disabled:!1,requirePO:!1,prepaid:!0},"1AMEX":{code:"1AMEX",sageCode:"1AMEX",description:"Credit Card (AmEx)",message:"Pay with credit card on file.",allowTerms:!1,allowCC:!0,disabled:!1,requirePO:!1,prepaid:!0},"1DISC":{code:"1DISC",sageCode:"1DISC",description:"Credit Card (Discovery)",message:"Pay with credit card on file.",allowTerms:!1,allowCC:!0,disabled:!1,requirePO:!1,prepaid:!0}},Ps={override:"O",discountPct:"D",costMarkupAmt:"C",costMarkupPct:"M",discountAmt:"P"},Ji={"1FEX_GROUND":{code:"1FEX_GROUND",description:"FedEX Ground",allowCustomerAccount:!0,carrier:"fedex"},"1UPS_GROUND":{code:"1UPS_GROUND",description:"UPS Ground",allowCustomerAccount:!0,carrier:"ups"},APP:{code:"APP",description:"USPS Priority",allowCustomerAccount:!1,carrier:"usps"},"TO BE DECIDED":{code:"TO BE DECIDED",description:"To Be Decided",allowCustomerAccount:!1,carrier:""}},Xi=e=>e?Ji[e]??null:null,Fa={1:"Wholesale 100 Pc",2:"Wholesale 200 Pc",5:"Wholesale 500 Pc",A:"Distributor 5000 Pc",B:"Distributor 10000 Pc",C:"Distributor 20000 Pc",N:"Safety DNS",S:"Safety DSS",M:"Safety DSM",L:"Safety DSL",G:"Safety GOV",X:"International 5000",Y:"International 10000",Z:"International 20000"},Xo=e=>({CustomerName:e?.ShipToName??"",AddressLine1:e?.ShipToAddress1??null,AddressLine2:e?.ShipToAddress2??null,AddressLine3:e?.ShipToAddress3??null,City:e?.ShipToCity??null,State:e?.ShipToState??null,CountryCode:e?.ShipToCountryCode??null,ZipCode:e?.ShipToZipCode??null}),Qo=(e,t)=>{const n=[e.City,e.State,e.CountryCode,e.ZipCode].filter(r=>!!r).join(" ");return[e.CustomerName,e.AddressLine1??"",e.AddressLine2??"",e.AddressLine3??"",n].filter(r=>!!r)},xu=e=>t=>e?e.isRepAccount?[t.SalespersonDivisionNo,"%"].includes(e.SalespersonDivisionNo)&&[t.SalespersonNo,"%"].includes(e.SalespersonNo):!0:!1,Cu=(e,t)=>!e||!t?!1:e.isRepAccount?[t.SalespersonDivisionNo,"%"].includes(e.SalespersonDivisionNo)&&[t.SalespersonNo,"%"].includes(e.SalespersonNo):e.ARDivisionNo===t.ARDivisionNo&&e.CustomerNo===t.CustomerNo;function Qi(e){if(!e)return null;const{ARDivisionNo:t,CustomerNo:n,ShipToCode:r}=e;return{ARDivisionNo:t,CustomerNo:n,ShipToCode:r}}const ec=(e="")=>{switch(e.toLowerCase()){case"chums":case"chi":return"chums";case"bc":case"bcs":return"bc";default:return e}},ju=(e="")=>{switch(e.toLowerCase()){case"chums":case"chi":return"CHI";case"bc":case"bcs":return"BCS";default:return e}},_a=e=>{switch(ec(e)){case"chums":return 1;case"bc":return 2;default:return 3}},ke=({ARDivisionNo:e,CustomerNo:t,ShipToCode:n})=>n?`${e}-${t}/${n}`:`${e}-${t}`,cs=({SalespersonDivisionNo:e,SalespersonNo:t})=>e==="%"&&t==="%"?"All Reps":e==="%"?`${t}`:`${e}-${t}`,uo=e=>e.isRepAccount?cs(e):ke(e),tc=(e,t)=>{const n=uo(e),r=uo(t);return e.Company===t.Company?n===r?e.id-t.id:n>r?1:-1:e.Company<t.Company?1:-1},yu=(e="")=>["USA","US"].includes((e||"").toUpperCase()),Su=(e="")=>["CAN","CA"].includes((e||"").toUpperCase()),vu=(e="")=>/^0[1-9]$/.test(e),wu=(e="")=>/^[A-Z0-9]+$/i.test(e??""),mo=e=>e?vu(e.ARDivisionNo)&&wu(e.CustomerNo):!1,sc=({stdPrice:e,PricingMethod:t=null,DiscountMarkup1:n=0,stdCost:r=null})=>{switch(t){case Ps.override:return n;case Ps.discountAmt:return new w(e??0).sub(n).toString();case Ps.discountPct:return new w(e??0).times(new w(1).sub(new w(n).div(100))).toString();case Ps.costMarkupAmt:return new w(r??0).add(n).toString();case Ps.costMarkupPct:return new w(r??0).times(new w(1).add(new w(n).div(100))).toString()}return e??0},ea=({pricing:e=[],itemCode:t,priceCode:n})=>{const[r]=e.filter(a=>a.ItemCode===t&&t!=="");if(r)return{...r};const[o]=e.filter(a=>a.PriceCode===n&&a.ItemCode==="");return o||{PriceCode:"",PricingMethod:"",DiscountMarkup1:0,ItemCode:""}},bu=e=>{const[t]=e.filter(i=>!i.isRepAccount).sort((i,c)=>i.Company===c.Company?ke(i)>ke(c)?1:-1:_a(i.Company)>_a(c.Company)?1:-1);if(!t)return null;const{ARDivisionNo:n,CustomerNo:r,CustomerName:o,ShipToCode:a}=t;return{ARDivisionNo:n,CustomerNo:r,CustomerName:o??"",ShipToCode:a}},Iu=e=>{const[t]=(e.EmailAddress||"").split(/;[ ]*/);return{ARDivisionNo:e.ARDivisionNo,CustomerNo:e.CustomerNo,ContactCode:e.ContactCode,SalespersonDivisionNo:e.SalespersonDivisionNo,SalespersonNo:e.SalespersonNo,ShipToCode:"",ShipToName:e.CustomerName,ShipToAddress1:e.AddressLine1,ShipToAddress2:e.AddressLine2,ShipToAddress3:e.AddressLine3,ShipToCity:e.City,ShipToState:e.State,ShipToZipCode:e.ZipCode,ShipToCountryCode:e.CountryCode,TelephoneNo:e.TelephoneNo,TelephoneExt:e.TelephoneExt,EmailAddress:t,ResidentialAddress:e.ResidentialAddress,Reseller:e.Reseller}},Pu=({field:e,ascending:t})=>(n,r)=>{const o=t?1:-1;switch(e){case"CustomerName":return((n[e]??n.BillToName??"").toLowerCase()===(r[e]??r.BillToName??"").toLowerCase()?ke(n)>ke(r)?1:-1:(n[e]??n.BillToName??"").toLowerCase()>(r[e]??r.BillToName??"").toLowerCase()?1:-1)*o;case"AddressLine1":case"City":case"State":case"ZipCode":case"TelephoneNo":case"EmailAddress":case"CountryCode":return((n[e]??"").toLowerCase()===(r[e]??"").toLowerCase()?ke(n)>ke(r)?1:-1:(n[e]??"").toLowerCase()>(r[e]??"").toLowerCase()?1:-1)*o;default:return(ke(n)>ke(r)?1:-1)*o}},Tu=e=>!!e&&e.ShipToName!==void 0,Au=e=>!!e&&e.CustomerName!==void 0,ls=e=>Au(e)?!e.CountryCode||e.CountryCode==="US"||e.CountryCode==="USA"?e.State:e.State?`${e.State}, ${e.CountryCode}`:e.CountryCode:Tu(e)?!e.ShipToCountryCode||e.ShipToCountryCode==="US"||e.ShipToCountryCode==="USA"?e.ShipToState:e.ShipToState?`${e.ShipToState}, ${e.ShipToCountryCode}`:e.ShipToCountryCode:null,Nu=(e,t)=>`${e.PriceCode}/${e.ItemCode}`>`${t.PriceCode}/${t.ItemCode}`?1:-1,Eu=e=>(t,n)=>{const{field:r,ascending:o}=e,a=o?1:-1;switch(r){case"name":case"email":return(t[r].toLowerCase().localeCompare(n[r].toLowerCase())===0?t.id-n.id:t[r].toLowerCase().localeCompare(n[r].toLowerCase()))*a;case"id":default:return(t.id-n.id)*a}};function A(e){if(!e)return null;if(typeof e=="string"){const t=Ss(e);if(!t)return null;e=t}return e.ShipToCode?Du(e):Ee(e)}const Ou=(e,t)=>!e||!t?!1:e.ARDivisionNo===t.ARDivisionNo&&e.CustomerNo===t.CustomerNo;function Ee(e){if(!e)return null;if(typeof e=="string"){const t=Ss(e);if(!t)return null;e=t}return`${e.ARDivisionNo}-${e.CustomerNo}`}function Du(e){if(!e)return null;if(typeof e=="string"){const t=Ss(e);if(!t)return null;e=t}return`${e.ARDivisionNo}-${e.CustomerNo}-${e.ShipToCode}`}const Ss=e=>{if(!/^[0-9]{2}-[\S\s]+/.test(e))return null;const[t,n,r]=e.split("-");return{ARDivisionNo:t,CustomerNo:n,ShipToCode:r}},Cr=e=>e?`${e?.ARDivisionNo??""}-${e.CustomerNo??""}`:"",ta=e=>`${e.ARDivisionNo}-${e.CustomerNo}`+(e.ShipToCode?`:${e.ShipToCode}`:""),nc=(e=[],t)=>{if(!t||!t.ARDivisionNo||!t.CustomerNo)return e;const n=Ee(t),r={...Qi(t),CustomerName:t.CustomerName,ts:new Date().valueOf()};return[...e.filter(o=>Ee(o)!==n),r].sort((o,a)=>a.ts-o.ts).filter((o,a)=>a<10)},Lu={ARDivisionNo:"",AddressLine1:null,AddressLine2:null,AddressLine3:null,City:null,ContactCode:"",CountryCode:null,CreditHold:"N",CustomerName:"",CustomerNo:"",CustomerStatus:"",CustomerType:null,DateEstablished:"",DefaultPaymentType:null,EmailAddress:"",InternetReseller:null,PriceLevel:null,PrimaryShipToCode:null,Reseller:null,ResidentialAddress:"N",SalespersonDivisionNo:"",SalespersonNo:"",ShipMethod:null,State:null,TaxSchedule:null,TelephoneExt:null,TelephoneNo:null,TermsCode:null,URLAddress:null,ZipCode:null},po=({field:e,ascending:t})=>(n,r)=>{const o=t?1:-1;switch(e){case"ShipToName":case"EmailAddress":case"ShipToAddress1":case"ShipToCity":case"ShipToZipCode":return((n[e]??"").toLowerCase()===(r[e]??"").toLowerCase()?n.ShipToCode>r.ShipToCode?1:-1:(n[e]??"").toLowerCase()>(r[e]??"").toLowerCase()?1:-1)*o;case"ShipToState":return((ls(n)?.toLowerCase()??"")===(ls(r)?.toLowerCase()??"")?n.ShipToCode>r.ShipToCode?1:-1:(ls(n)?.toLowerCase()??"")>(ls(r)?.toLowerCase()??"")?1:-1)*o;default:return(n.ShipToCode>r.ShipToCode?1:-1)*o}},$r=e=>`${e.PriceCode}/${e.ItemCode}`,sa="chums/b2b/cookieConsent",Ne="chums/b2b/current-cart",Rt="chums/b2b/authtype",et="chums/b2b/profile",Tt="chums/b2b/avatar",bt="chums/b2b/id_token",rc="chums/b2b/googleUser",Mt="chums/b2b/customer",jr="chums/b2b/customers/filter/rep",yr="chums/b2b/customers/filter/state",at="chums/b2b/userAccess",ku="chums/b2b/prefs",Ve="chums/b2b/recentAccounts",Js="chums/b2b/invoices.rowsPerPage",Sr="chums/b2b/invoices.sort",na="chums/b2b/version",Jt="chums/b2b/customerShippingAccount",ho="chums/b2b/signUpPopup",Ha={"com.chums.b2b.profile":et,"com.chums.b2b.userAccount":at,"com.chums.b2b.id_token":bt,"chums::b2b::current-cart":Ne,"com.chums.b2b.current_cart":Ne,"com.chums.b2b.authtype":Rt,"com.chums.b2b.googleUser":rc,"com.chums.b2b.customer":Mt,"com.chums.b2b.prefs":ku,"chums-b2b::accountList::rowsPerPage":null,"com.chums.b2b.recentAccounts":Ve,"com.chums.b2b.customerShippingAccount":Jt,"invoices.rowsPerPage":Js,"invoices.sort":Sr};class T{static getItem(t,n){if(typeof window>"u"||!window.localStorage)return n;const r=window.localStorage.getItem(t);if(!r)return n;try{return JSON.parse(r)??n}catch{return n}}static setItem(t,n){typeof window>"u"||!window.localStorage||window.localStorage.setItem(t,JSON.stringify(n))}static removeItem(t){typeof window>"u"||!window.localStorage||window.localStorage.removeItem(t)}static removeDeprecatedItems(){typeof window>"u"||!window.localStorage||Object.keys(Ha).forEach(t=>{const n=Ha[t],r=T.getItem(t,null);r&&n&&T.setItem(n,r),T.removeItem(t)})}}const Ru=e=>e?e.email!==void 0:!1,Mu=e=>e?e.iss==="chums.com":!1,oc=e=>{const t=qt(e);if(!Mu(t))return null;const{user:n,roles:r,accounts:o}=t;return{chums:{user:{...n,accounts:o,roles:r.map(a=>a.role)}}}};function ac(e){return qt(e).exp??0}function ic(e){const t=qt(e);if(!t.exp)return null;const n=new Date(0);return n.setUTCSeconds(t.exp),n}function vr(e){if(!e)return!0;const t=ic(e);return t===null?!0:!(t.valueOf()>new Date().valueOf())}const fo=e=>{const t=qt(e);if(!Ru(t))return null;const{sub:n,picture:r,email:o,name:a,given_name:i,family_name:c}=t;return{googleId:n,imageUrl:r,email:o,name:a,givenName:i,familyName:c}};class Uu extends Ad.EventEmitter{timer=0;loggedIn(){const t=this.getToken();return!!t&&!vr(t)}setGoogleUser(t){T.setItem(rc,t),t.imageUrl&&T.setItem(Tt,t.imageUrl)}getGoogleUser(){return T.getItem(et,null)}setProfile(t){if(!t){T.removeItem(et);return}T.setItem(et,t),t.imageUrl&&T.setItem(Tt,t.imageUrl),this.emit("profile_updated",t)}getProfile(){return T.getItem(et,null)}setToken(t){T.setItem(bt,t)}removeToken(){T.removeItem(bt)}getToken(){return T.getItem(bt,null)}logout(){T.removeItem(bt),T.removeItem(et),T.removeItem(Tt)}}const oe=new Uu;class zr extends Error{url;debug;code;constructor(t,n,r,o){super(t),Object.setPrototypeOf(this,new.target.prototype),this.debug=r,this.url=n,this.code=o}}const Fu=()=>{const e=window?.location?.host;return e?.toLowerCase().startsWith("localhost")||e.startsWith("127.0.0.1")};function he(e,t){typeof globalThis.window<"u"&&typeof globalThis.window.gtag<"u"&&(t||(t={}),globalThis.window.gtag("event",e,t))}function cc(e){if(typeof globalThis.window>"u")return;const t=window.gtag,n=window.Chums?.gtagID;t&&n&&t("config",n,e??{})}const _u=0,lc=1,ra=3,dc=4,xs={standard:"stdPrice",msrp:"msrp"},oa=({image:e,colorCode:t})=>pc(e,t??"");function Wr(e,t){return e?Xs(e,t):null}function Xs(e,t){if(!e.trim())return fc("Invalid product image",!1),"missing-placeholder2.jpg";let n=e.replace(/\?/,t??"");return t&&t.split("").map(r=>{n=n.replace(/\*/,r)}),n.replace(/\*/g,"").replace(/\s/g,"%20")}const Hu=e=>Yn(e)&&e.variants.filter(t=>t.status).length>0,Bu=e=>{const t=e.variants.filter(r=>r.status),[n=t[0]]=t.filter(r=>r.isDefaultVariant);return n},aa=e=>{if(!e)return"";if(Ot(e)){const t=[];return e.items.filter(n=>!(!n.status||n.inactiveItem||n.productType==="D"||!n.salesUM)).forEach(n=>{n.salesUM&&!t.includes(n.salesUM)&&t.push(n.salesUM)}),t.join(",")}return e.salesUM??""},uc=({item:e,priceField:t=xs.standard,priceCodes:n=[]})=>{if(t===xs.msrp)return new w(e.msrp??0).toFixed(2);const r=ea({pricing:n,priceCode:e.priceCode,itemCode:e.itemCode});return new w(sc({stdPrice:e[t]??0,...r})).times(e.salesUMFactor??1).toFixed(2)},mc=({product:e,priceField:t=xs.standard,priceCodes:n=[]})=>{const r=ea({pricing:n,itemCode:e.itemCode,priceCode:e.priceCode});if(Ot(e)){const o=[];if(e.items.filter(i=>!(!i.status||i.inactiveItem||i.productType==="D")).filter(i=>!!i[t]).forEach(i=>{const c=uc({item:i,priceField:t,priceCodes:n});o.includes(c)||o.push(c)}),o.length===0)return[new w(e.msrp??0).toFixed(2)];if(o.length===1)return o;const a=o.sort((i,c)=>new w(i).gt(c)?1:-1);return[a[0],a[a.length-1]]}switch(e.sellAs){case lc:case ra:return[new w(sc({stdPrice:e[t]??0,...r})).times(e.salesUMFactor??1).toFixed(2)];default:return[]}},wr=e=>e?mc({product:e,priceField:xs.msrp}):[],br=(e,t=[])=>e?mc({product:e,priceField:xs.standard,priceCodes:t}):[],ia=(e,t)=>{if(Ot(e)){const n=e.items.filter(o=>o.status);let r;return[r]=n.filter(o=>o.itemCode===t?.itemCode),r||([r]=n.filter(o=>o.colorCode===t?.colorCode||o.color.code===t?.colorCode)),r||([r]=n.filter(o=>o.colorCode===e.defaultColor)),!r&&n.length&&(r=n[0]),r?$u(r,e):null}if(vs(e)){let[n]=e.mix.items.filter(o=>o.color?.code===(t?.colorCode??e.defaultColor)).map(o=>o.color);n||([n]=e.mix.items.filter(o=>o.color?.code===e.defaultColor).map(o=>o.color));const[r]=e.mix.items.filter(o=>o.color?.code===n?.code).map(o=>o.additionalData&&o.additionalData.image_filename?o.additionalData.image_filename:null);return{itemCode:e.itemCode,quantity:1,productId:e.id,name:e.name,colorCode:n?.code,colorName:n?.name,image:r??oa({image:e.image,colorCode:n?.code}),msrp:e.msrp,stdPrice:e.stdPrice,priceCode:e.priceCode,salesUM:e.salesUM,stdUM:e.stdUM,salesUMFactor:e.salesUMFactor,seasonCode:e.season_code,seasonAvailable:e.additionalData?.seasonAvailable||e.season_available,quantityAvailable:e.QuantityAvailable,season:e.season??null}}return e?{image:e.image,name:e.name,productId:e.id,itemCode:e.itemCode,stdPrice:e.stdPrice,salesUM:e.salesUM,salesUMFactor:e.salesUMFactor,quantityAvailable:e.QuantityAvailable,msrp:e.msrp,quantity:1,seasonCode:e.season_code,seasonAvailable:e.season_available}:null},Ku=(e,t)=>e.additionalData?.season&&e.additionalData.season.active?!(e.additionalData.seasonAvailable||e.additionalData.season.product_available):t?.season&&t.season.active?!t.season.product_available:!1,$u=(e,t)=>({quantityAvailable:e.QuantityAvailable,msrp:e.msrp,colorCode:e.color.code??e.colorCode,itemCode:e.itemCode,stdPrice:e.stdPrice,salesUM:e.salesUM,salesUMFactor:e.salesUMFactor,colorName:e.color.name??e.colorName,priceCode:e.priceCode,price:e.msrp?.toString(),productId:e.productId,stdUM:e.stdUM,image:(e.additionalData?.image_filename??"")||oa({image:t?.image??"",colorCode:e.color.code??e.colorCode??""}),name:t?.name??e.colorName,quantity:1,season:e.additionalData?.season??t?.season??null,seasonCode:e.additionalData?.season?.code,seasonAvailable:!Ku(e,t),seasonDescription:e.additionalData?.season?.description,seasonTeaser:e.additionalData?.season?.product_teaser,preSeasonMessage:e.additionalData?.season?.product_available||e.additionalData?.seasonAvailable?null:e.additionalData?.season?.preSeasonMessage??t?.preSeasonMessage??t?.dateAvailable,message:e.additionalData?.message}),pc=(e,t="")=>e?(t=String(t),e=e.replace(/\?/,t),t.split("").map(n=>{e=e.replace(/\*/,n)}),e.replace(/\*/g,"")):"",zu=e=>e?e.itemCode!==void 0:!1,Et=e=>e?zu(e)&&e.productId!==void 0:!1,Kt=e=>e?e.id!==void 0:!1,ca=(e,t)=>e?{...e,priceCodeRecord:ea({pricing:t??[],itemCode:e.itemCode,priceCode:e.priceCode}),priceLevel:"",price:uc({item:e,priceField:xs.standard,priceCodes:t??[]})}:null;function Wu(e){return e.itemType==="section"}function Gu(e){return e.itemType==="category"}function hc(e){return e.itemType==="product"}function Ba(e){return e.itemType==="link"}function Vu(e){return!!e&&e.sellAs===lc}function Yn(e){return!!e&&e.sellAs===_u}function vs(e){return!!e&&e.sellAs===ra}function Ot(e){return!!e&&e.sellAs===dc}function xn(e){if(Vu(e.selectedProduct))return e.selectedProduct.itemCode;if(vs(e.selectedProduct)){const[t]=e.selectedProduct.mix.items.filter(n=>n.color?.code===e.colorCode);return t?.itemCode??null}return e.cartItem?.itemCode??null}function ws(){return T.getItem(sa,null)?.preferences??!1}function ue(){return T.getItem(sa,null)?.analytics??!1}function fc(e,t){ue()&&he("exception",{description:e,fatal:t})}function Yu(e){ue()||he("search",{search_term:e.trim()})}function gc(e){ue()&&he("login",{method:e})}function qu(){ue()&&he("sign_up")}function Zu(){ue()&&he("page_view")}function Ju(e){ue()&&he("view_item_list",{item_list_id:e.keyword,item_list_name:e.title??e.keyword,items:e.children.filter(t=>hc(t)).map(t=>({item_id:t.product.itemCode,item_name:t.product.name}))})}function Xu(e){ue()&&he("select_content",{content_type:"customer",content_id:e})}function Qu(e){ue()&&e&&he("view_item",{items:[{item_id:e.itemCode,item_name:e.name}]})}function em(e,t){ue()&&t&&Ot(e)&&t.colorCode!==e.defaultColor&&he("select_item",{item_list_id:e.itemCode,item_list_name:e.description,items:[{item_id:t.itemCode,item_name:t.colorName??t.colorCode??"",price:t.price?+t.price:void 0,quantity:t.quantity}]})}function tm(e,t){ue()&&e&&t&&vs(t)&&he("select_item",{item_list_id:e.itemCode,item_list_name:[e.name,e.additionalData?.subtitle].filter(n=>!!n).join(" / "),items:[{item_id:t.itemCode,item_name:`${t.name}${t.additionalData?.subtitle?" / "+t.additionalData?.subtitle:""}`}]})}function sm(e){ue()&&he("select_content",{content_type:"variant",content_id:e})}class xc{static getItem(t,n){if(typeof window>"u"||!window.sessionStorage)return n;const r=window.sessionStorage.getItem(t);if(!r)return n;try{return JSON.parse(r)??n}catch{return n}}static setItem(t,n){typeof window>"u"||!window.sessionStorage||window.sessionStorage.setItem(t,JSON.stringify(n))}static removeItem(t){typeof window>"u"||!window.sessionStorage||window.sessionStorage.removeItem(t)}}function nm(){const e=oe.getToken();return e?`Bearer ${e}`:null}async function rm(e,t){const n=JSON.stringify({url:e.url,args:t??null});if(!e.ok){const r=e.statusText??await e.text();return/(401|403|504)/.test(e.status.toString())?Promise.reject(new zr(r,e.url,null,e.status)):(await go({message:`error: ${e.status}`,componentStack:n}),Promise.reject(new zr(r,e.url,null,e.status)))}try{const r=await e.json();return r.error?(await go({message:r.error,componentStack:n}),console.warn(r.error),Promise.reject(new zr(r.error,e.url))):r}catch(r){return r instanceof Error?(console.debug("handleJSONResponse()",r.message),Promise.reject(r)):(console.debug("handleJSONResponse()",r),Promise.reject(new Error("Error in handleJSONResponse()")))}}async function Xt(e){try{return await e.json()}catch(t){return t instanceof Error?(console.debug("allowErrorResponseHandler()",t.message),Promise.reject(t)):(console.debug("allowErrorResponseHandler()",t),Promise.reject(new Error("Error in allowErrorResponseHandler()")))}}async function k(e,{headers:t,body:n,...r}={},o){try{const a={...r};if(a.method||(a.method="GET"),a.headers=new Headers(t??void 0),!a.credentials||a.credentials==="same-origin"){a.credentials||(a.credentials="same-origin");const c=nm();c&&a.headers.append("Authorization",c)}a.headers.append("Accept","application/json"),["HEAD","GET"].includes(a.method.toUpperCase())||(a.body=n,a.headers.append("Content-Type","application/json"));const i=await fetch(e,{...a});return o?o(i):await rm(i,a.body)}catch(a){return a instanceof Error?(console.log("fetchJSON()",a.message),Promise.reject(a)):(console.error("fetchJSON()",a),typeof a=="string"?Promise.reject(new Error(a)):Promise.reject(a))}}async function go({message:e,componentStack:t,userId:n,fatal:r}){try{if(Fu())return;const o=xc.getItem(na,"-"),a=JSON.stringify({url:globalThis.window.location.pathname,message:e,componentStack:t??"",user_id:ue()?n??0:0,version:o});await k("/api/error-reporting",{method:"POST",body:a},Xt),fc("An error occurred",r??!1)}catch(o){return o instanceof Error?(console.log("postErrors()",o.message),Promise.reject(o)):(console.error("postErrors()",o),typeof o=="string"?Promise.reject(new Error(o)):Promise.reject(o))}}async function om(e){try{const t="/api/sales/invoice/chums/:InvoiceType/:InvoiceNo".replace(":InvoiceType",encodeURIComponent(e.InvoiceType??"IN")).replace(":InvoiceNo",encodeURIComponent(e.InvoiceNo)),n=await k(t,{cache:"no-cache"});return!n?.invoice||!n?.invoice?.InvoiceNo?Promise.reject(new Error(`Invoice '${e.InvoiceNo}-${e.InvoiceType}' was not found`)):n.invoice}catch(t){return t instanceof Error?(console.debug("deprecated_loadInvoice()",t.message),Promise.reject(t)):(console.debug("deprecated_loadInvoice()",t),Promise.reject(new Error("Error in deprecated_loadInvoice()")))}}async function am(e){try{if(!e.key)return[];const t=new URLSearchParams;t.set("start",String(e.start??0)),t.set("limit",String(e.limit??500));const n=`/api/sales/b2b/account/:ARDivisionNo-:CustomerNo/invoices.json?${t.toString()}`.replace(":ARDivisionNo",encodeURIComponent(e.key.ARDivisionNo)).replace(":CustomerNo",encodeURIComponent(e.key.CustomerNo));return(await k(n,{cache:"no-cache"}))?.list??[]}catch(t){return t instanceof Error?(console.debug("fetchInvoices()",t.message),Promise.reject(t)):(console.debug("fetchInvoices()",t),Promise.reject(new Error("Error in fetchInvoices()")))}}function la(e){return e?e.ARDivisionNo!==void 0:!1}function im(e){return!!e&&e.SalesOrderNo!==void 0}const cm=e=>e.role!==void 0;function Qt(e){return e?e?.error!==void 0:!1}const da="/account/:customerSlug",Cc="/account/:customerSlug/delivery/:code",xo="/login",lm="/pages/:keyword",jc="/products/:category/:product?",dm="/products/:product",Cs="/profile",ua="/profile/:id",Ka="/signup",um="/set-password",mm="/products/:category",yc="/images/products/80/:image",bs={accountList:"Account List: :name",home:"Home",login:"Log In",profile:"Profile Page",profileChangePassword:"Change Password",signUp:"Sign Up"},pm="AUTH_ERROR",Rs=e=>`${e.SalespersonDivisionNo}-${e.SalespersonNo}`,hm=e=>{if(!e.length)return null;const[t]=e.filter(n=>n.primaryAccount);return t??e[0]},fm=(e,t)=>Rs(e).toUpperCase()>Rs(t).toUpperCase()?1:-1,In=e=>!!e&&e.id!==void 0,Sc=e=>!!e&&e.id!==void 0,vc=e=>`${e.ARDivisionNo}-${e.CustomerNo}`,gm=e=>`/account/${encodeURIComponent(vc(e))}`,$a=(e,t)=>$("/account/:customerSlug/carts/:cartId",{customerSlug:A(e),cartId:`${t}`}),ds=e=>e.isRepAccount?$(ua,{id:e.id.toString()}):$(da,{customerSlug:Cr(e)}),qn=e=>e.SalespersonDivisionNo==="%"&&e.SalespersonNo==="%"?"ALL":e.SalespersonDivisionNo==="%"?`ALL-${e.SalespersonNo}`:e.SalespersonNo==="%"?`${e.SalespersonDivisionNo}-ALL`:`${e.SalespersonDivisionNo}-${e.SalespersonNo}`,xm=e=>e.type.startsWith("user/"),Cm=e=>Ys(e)&&e.error.name===pm,Co=e=>{if(!Sc(e))return null;switch(e.accountType){case 1:return"EMPLOYEE";case 2:return"REP";case 4:return"CUSTOMER"}},an=e=>e.user.profile,jm=e=>e.user.userType,wc=e=>e.user.picture,H=e=>e.user.loggedIn??!1,ym=e=>e.user.actionStatus==="logging-in",Sm=e=>e.user.authType,cn=e=>e.user.actionStatus,Ir=e=>e.user.actionStatus!=="idle",bc=e=>e.user.actionStatus==="resetting-password",Pr=e=>e.user.roles.filter(t=>t==="employee").length===1,ma=e=>e.user.roles.filter(t=>t==="rep").length===1,Ic=R([Pr,ma],(e,t)=>e||t),vm=e=>e.user.tokenExpires??0,pa=R([an],e=>Sc(e)&&e.accountType===1);async function ms({ARDivisionNo:e,CustomerNo:t}){try{const n="/api/sales/b2b/account/:customerSlug/customer.json".replace(":customerSlug",A({ARDivisionNo:e,CustomerNo:t})),r=await k(n,{cache:"no-cache"});return!r?.result||!r.result.customer||!r.result.customer.CustomerNo?Promise.reject(new Error("Invalid response when loading customer account")):(r.result.permissions=await Pc({ARDivisionNo:e,CustomerNo:t}),r.result)}catch(n){return n instanceof Error?(console.debug(ms.name,n.message),Promise.reject(n)):(console.debug(ms.name,n),Promise.reject(new Error(`Error in ${ms.name}`)))}}async function Pn(e){try{const t="/api/user/v2/b2b/:customerKey/users.json".replace(":customerKey",encodeURIComponent(e));return(await k(t,{cache:"no-cache"}))?.users??[]}catch(t){return t instanceof Error?(console.debug(Pn.name,t.message),Promise.reject(t)):(console.debug(Pn.name,t),Promise.reject(new Error(`Error in ${Pn.name}`)))}}async function wm(e,t){try{if(!e.shipToCode?.[0])return Promise.reject(new Error("Invalid Ship-To code"));const n="/api/user/v2/b2b/:customerKey/users.json".replace(":customerKey",t),r="POST",o=JSON.stringify(e);return(await k(n,{method:r,body:o}))?.users??[]}catch(n){return n instanceof Error?(console.debug("postAddCustomerUserLocation()",n.message),Promise.reject(n)):(console.debug("postAddCustomerUserLocation()",n),Promise.reject(new Error("Error in postAddCustomerUserLocation()")))}}async function bm(e,t){try{if(e.id&&e.shipToCode?.length===1)return await wm(e,t);const n=e.id?"/api/user/v2/b2b/:customerKey/users/:id.json":"/api/user/v2/b2b/:customerKey/users.json",r=t+(e.shipToCode?.length?`-${e.shipToCode[0]}`:""),o=n.replace(":customerKey",encodeURIComponent(r)).replace(":id",encodeURIComponent(e.id)),a=e.id?"PUT":"POST",i=JSON.stringify(e);return(await k(o,{method:a,body:i}))?.users??[]}catch(n){return n instanceof Error?(console.debug("postCustomerUser()",n.message),Promise.reject(n)):(console.debug("postCustomerUser()",n),Promise.reject(new Error("Error in postCustomerUser()")))}}async function Im(e,t){try{const n=`${t.ARDivisionNo}-${t.CustomerNo}`,r="/api/user/v2/b2b/:customerKey/users/:id.json".replace(":customerKey",encodeURIComponent(n)).replace(":id",encodeURIComponent(e.id));return(await k(r,{method:"delete"}))?.users??[]}catch(n){return n instanceof Error?(console.debug("deleteCustomerUser()",n.message),Promise.reject(n)):(console.debug("deleteCustomerUser()",n),Promise.reject(new Error("Error in deleteCustomerUser()")))}}async function Pm(e){try{const{ARDivisionNo:t,CustomerNo:n,CustomerName:r,AddressLine1:o,AddressLine2:a,AddressLine3:i,City:c,State:l,ZipCode:m,CountryCode:p,EmailAddress:f,Reseller:g,TelephoneNo:C,TelephoneExt:y}=e,x=new URLSearchParams;x.set("co",ju("CHI")),x.set("account",`${t}-${n}`);const S=JSON.stringify({Name:r,AddressLine1:o,AddressLine2:a,AddressLine3:i,City:c,State:l,ZipCode:m,CountryCode:p,EmailAddress:f,Reseller:g,TelephoneNo:C,TelephoneExt:y}),O=`/sage/b2b/billto.php?${x.toString()}`;return await k(O,{method:"POST",body:S}),await ms(e)}catch(t){return t instanceof Error?(console.debug("postBillingAddress()",t.message),Promise.reject(t)):(console.debug("postBillingAddress()",t),Promise.reject(new Error("Error in postBillingAddress()")))}}async function Tm(e){try{const{ARDivisionNo:t,CustomerNo:n,ShipToCode:r,ShipToName:o,ShipToAddress1:a,ShipToAddress2:i="",ShipToAddress3:c="",ShipToCity:l,ShipToState:m,ShipToZipCode:p,ShipToCountryCode:f,TelephoneNo:g,TelephoneExt:C="",EmailAddress:y,ContactCode:x="",Reseller:S="N"}=e,M=`/sage/b2b/shipto.php?${new URLSearchParams({co:"CHI",account:`${t}-${n}-${r}`}).toString()}`,V=JSON.stringify({Name:o,AddressLine1:a,AddressLine2:i,AddressLine3:c,City:l,State:m,ZipCode:p,CountryCode:f,EmailAddress:y,TelephoneNo:g,TelephoneExt:C,Reseller:S,ContactCode:x});return await k(M,{method:"POST",body:V}),await ms(e)}catch(t){return t instanceof Error?(console.debug("postShipToAddress()",t.message),Promise.reject(t)):(console.debug("postShipToAddress()",t),Promise.reject(new Error("Error in postShipToAddress()")))}}async function Am(e,t){try{const{ARDivisionNo:n,CustomerNo:r}=t,o="/sage/b2b/set-primary-shipto.php?co=CHI",a=JSON.stringify({Company:"chums",account:`${n}-${r}:${e}`});await k(o,{method:"POST",body:a})}catch(n){return n instanceof Error?(console.debug("postDefaultShipToCode()",n.message),Promise.reject(n)):(console.debug("postDefaultShipToCode()",n),Promise.reject(new Error("Error in postDefaultShipToCode()")))}}async function Pc({ARDivisionNo:e,CustomerNo:t}){try{const n=`${encodeURIComponent(e)}-${encodeURIComponent(t)}`,r="/api/user/v2/b2b/validate/customer/:customerKey.json".replace(":customerKey",n);return await k(r,{cache:"no-cache"})??null}catch(n){return n instanceof Error?(console.debug("fetchCustomerValidation()",n.message),Promise.reject(n)):(console.debug("fetchCustomerValidation()",n),Promise.reject(new Error("Error in fetchCustomerValidation()")))}}async function Tc({customerKey:e,salesOrderNo:t}){try{const n="/api/sales/b2b/account/:customerKey/orders/open/:salesOrderNo.json".replace(":customerKey",encodeURIComponent(e)).replace(":salesOrderNo",encodeURIComponent(t));return(await k(n,{cache:"no-cache"}))?.salesOrder??null}catch(n){return n instanceof Error?(console.debug("fetchSalesOrder()",n.message),Promise.reject(n)):(console.debug("fetchSalesOrder()",n),Promise.reject(new Error("Error in fetchSalesOrder()")))}}async function Nm({customerKey:e}){try{const t="/api/sales/b2b/account/:customerKey/orders/open.json".replace(":customerKey",encodeURIComponent(e));return(await k(t,{cache:"no-cache"}))?.list??[]}catch(t){return t instanceof Error?(console.debug("fetchOpenSalesOrders()",t.message),Promise.reject(t)):(console.debug("fetchOpenSalesOrders()",t),Promise.reject(new Error("Error in fetchOpenSalesOrders()")))}}async function Ac({ARDivisionNo:e,CustomerNo:t,SalesOrderNo:n}){try{const r="/node-sage/api/CHI/salesorder/:ARDivisionNo-:CustomerNo/:SalesOrderNo/email".replace(":ARDivisionNo",encodeURIComponent(e)).replace(":CustomerNo",encodeURIComponent(t)).replace(":SalesOrderNo",encodeURIComponent(n));return(await k(r,{method:"post"}))?.result??null}catch(r){return r instanceof Error?(console.debug("postOrderEmail()",r.message),Promise.reject(r)):(console.debug("postOrderEmail()",r),Promise.reject(new Error("Error in postOrderEmail()")))}}const Nc=(e,t)=>+e.LineKey-+t.LineKey,ha=e=>(t,n)=>{const r=e.ascending?1:-1;switch(e.field){case"CustomerPONo":case"ShipToName":case"ShipToCity":return((t[e.field]??"").toLowerCase()===(n[e.field]??"").toLowerCase()?t.SalesOrderNo>n.SalesOrderNo?1:-1:(t[e.field]??"").toLowerCase()>(n[e.field]??"").toLowerCase()?1:-1)*r;case"TaxableAmt":return(+(t[e.field]??0)==+(n[e.field]??0)?t.SalesOrderNo>n.SalesOrderNo?1:-1:+(t[e.field]??0)>+(n[e.field]??0)?1:-1)*r;case"OrderDate":case"ShipExpireDate":return(F(t[e.field]??null).valueOf()===F(n[e.field]??null).valueOf()?t.SalesOrderNo>n.SalesOrderNo?1:-1:F(t[e.field]??null).valueOf()>F(n[e.field]??0).valueOf()?1:-1)*r;default:return(t.SalesOrderNo>n.SalesOrderNo?1:-1)*r}},Em=e=>e.InactiveItem!=="N"||e.ProductType==="D"?null:{itemCode:e.ItemCode,quantity:+e.QuantityOrdered||1,comment:e.CommentText},Om=e=>e?["X","Z"].includes(e.OrderStatus):!1,Ec=e=>e?e.OrderStatus==="C":!1,Tr=e=>!!e&&e.detail!==void 0,Dm=(e,t)=>+e.LineSeqNo==+t.LineSeqNo?Nc(e,t):+e.LineSeqNo-+t.LineSeqNo,Lm=e=>e.salesOrder.processing,Ar=e=>e.salesOrder.loading,km=e=>e.salesOrder.sendEmail.status,fa=e=>e.salesOrder.header??null,Rm=e=>e.openOrders.customerKey,Ze=e=>e.openOrders.list,Oc=e=>e.openOrders.loading??"idle",Mm=e=>e.openOrders.loaded??!1,Nr=e=>e.openOrders.sort,ga=e=>e.openOrders.openFilter,Um=e=>e.openOrders.cartsFilter,Fm=e=>e.openOrders.sendEmail.response,xa=e=>e.openOrders.sendEmail.status,_m=e=>e.openOrders.sendEmail.error,Ca=e=>e.openOrders.actionStatus,Hm=(e,t)=>t,Er=R([Ze,fa,Hm],(e,t,n)=>e[n]?e[n]:t?.SalesOrderNo===n?t:null),Bm=R([Ze],e=>Object.values(e).filter(t=>t.OrderType!=="Q").length);R([Ze],e=>Object.values(e).filter(t=>t.OrderType==="Q").length);const Km=R([Ze,ga,Nr],(e,t,n)=>Object.values(e).filter(r=>r.OrderType!=="Q"&&r.OrderStatus!=="C").filter(r=>!t||r.SalesOrderNo.includes(t)||r.CustomerPONo?.includes(t)).sort(ha(n)));R([Ze,ga,Nr],(e,t,n)=>Object.values(e).filter(r=>r.OrderType!=="Q"&&r.OrderStatus==="C").filter(r=>!t||r.SalesOrderNo.includes(t)||r.CustomerPONo?.includes(t)).sort(ha(n)));R([Ze,Um,Nr],(e,t,n)=>Object.values(e).filter(r=>r.OrderType==="Q").filter(r=>!t||r.SalesOrderNo.includes(t)||r.CustomerPONo?.includes(t)).sort(ha(n)));const $m=R([Ze,(e,t)=>t],(e,t)=>{const n=e[t];return!n||!Tr(n)?[]:Object.values(n.detail).sort(Dm)});R([Ze,(e,t)=>t],(e,t)=>e[t]?.OrderType==="Q");R([Ze,(e,t)=>t],(e,t)=>{const n=e[t];return!n||!Tr(n)?!1:Object.values(n.detail).filter(r=>r.changed).length>0});const zm=R([Ca,(e,t)=>t],(e,t)=>e[t]??"idle");R([Ca,(e,t)=>t],(e,t)=>e[t]??"idle");const Wm=R([Ze,(e,t)=>t],(e,t)=>{const n=e[t];return!n||!Tr(n)?[]:n.invoices.sort()}),It=L("open-orders/load",async e=>await Nm({customerKey:e}),{condition:(e,{getState:t})=>{const n=t();return!!e&&Oc(n)==="idle"}}),Dc=W("open-orders/setSort"),Lc=W("open-orders/setOrdersFilter"),Gm=W("open-orders/setCartsFilter"),Vm=W("open-orders/detail/update"),st=L("open-orders/loadSalesOrder",async(e,{getState:t})=>{const n=t(),r=se(n),o=Ee(r);return await Tc({customerKey:o,salesOrderNo:e})},{condition:(e,{getState:t})=>{const n=t(),r=se(n),o=Ca(n);return!!e&&!!r&&(!o[e]||o[e]==="idle")}}),Gr=L("open-orders/sendEmail",async e=>await Ac(e),{condition:(e,{getState:t})=>{const n=t();return H(n)&&!!e&&xa(n)==="idle"&&!!Er(n,e.SalesOrderNo)}}),kc=W("open-orders/sendEmail/confirmed"),Ct=be({selectId:e=>A(e),sortComparer:(e,t)=>A(e).localeCompare(A(t))}),Ym=Ct.getSelectors(),qm=oe.loggedIn(),Zm=qm?T.getItem(Ve,[]):[],Zn=de({name:"recentCustomers",initialState:Ct.getInitialState(void 0,Zm),reducers:{clearRecentCustomers:e=>{Ct.removeAll(e),T.removeItem(Ve)}},extraReducers:e=>{e.addCase(ee,(t,n)=>{n.payload.loggedIn?Ct.setAll(t,n.payload.recentCustomers??[]):Ct.removeAll(t)}).addCase($t.fulfilled,(t,n)=>{Ct.setAll(t,n.payload.recentCustomers??[])}).addCase(Je.fulfilled,(t,n)=>{Ct.setAll(t,n.payload.recent)}).addCase(G.fulfilled,(t,n)=>{Ct.setAll(t,n.payload?.recent??[])})},selectors:{selectAll:e=>Ym.selectAll(e)}}),{selectAll:Jm}=Zn.selectors,{clearRecentCustomers:Xm}=Zn.actions,ja=R([Jm],e=>[...e].sort(t=>t.ts).reverse());async function Qm(e){try{const t="/api/carts/:customerSlug.json".replace(":customerSlug",encodeURIComponent(e));return(await k(t,{cache:"no-cache"}))?.carts??[]}catch(t){return t instanceof Error?(console.debug("fetchCarts()",t.message),Promise.reject(t)):(console.debug("fetchCarts()",t),Promise.reject(new Error("Error in fetchCarts()")))}}async function ep(e){try{const t="/api/carts/:customerKey/:cartId.json".replace(":customerKey",encodeURIComponent(e.customerKey)).replace(":cartId",encodeURIComponent(e.cartId));return(await k(t,{cache:"no-cache"}))?.cart??null}catch(t){return t instanceof Error?(console.debug("fetchCart()",t.message),Promise.reject(t)):(console.debug("fetchCart()",t),Promise.reject(new Error("Error in fetchCart()")))}}async function tp(e){try{const t="/api/carts/:customerKey/:cartId.json".replace(":customerKey",encodeURIComponent(e.customerKey)).replace(":cartId",encodeURIComponent(e.cartId));return(await k(t,{method:"PUT",body:JSON.stringify(e.body)}))?.cart??null}catch(t){return t instanceof Error?(console.debug("putCart()",t.message),Promise.reject(t)):(console.debug("putCart()",t),Promise.reject(new Error("Error in putCart()")))}}async function sp(e){try{const t="/api/carts/:customerKey/:cartId/cart.json".replace(":customerKey",encodeURIComponent(e.customerKey)).replace(":cartId",encodeURIComponent(e.cartId??"new")),n={...e.item};return e.cartId||(n.customerPONo=e.cartName,n.shipToCode=e.shipToCode),(await k(t,{method:"POST",body:JSON.stringify(n)}))?.cart??null}catch(t){return t instanceof Error?(console.debug("postAddToCart()",t.message),Promise.reject(t)):(console.debug("postAddToCart()",t),Promise.reject(new Error("Error in postAddToCart()")))}}async function np(e){try{const t="/api/carts/:customerKey/:cartId/:cartItemId.json".replace(":customerKey",encodeURIComponent(e.customerKey)).replace(":cartId",encodeURIComponent(e.cartId)).replace(":cartItemId",encodeURIComponent(e.cartItemId));return(await k(t,{method:"PUT",body:JSON.stringify(e.item)}))?.cart??null}catch(t){return t instanceof Error?(console.debug("putUpdateCartItem()",t.message),Promise.reject(t)):(console.debug("putUpdateCartItem()",t),Promise.reject(new Error("Error in putUpdateCartItem()")))}}async function rp(e){try{const t="/api/carts/:customerKey/:cartId/items.json".replace(":customerKey",encodeURIComponent(e.customerKey)).replace(":cartId",encodeURIComponent(e.cartId)),n=JSON.stringify({items:e.items});return(await k(t,{method:"PUT",body:n}))?.cart??null}catch(t){return t instanceof Error?(console.debug("putUpdateCartItem()",t.message),Promise.reject(t)):(console.debug("putUpdateCartItem()",t),Promise.reject(new Error("Error in putUpdateCartItem()")))}}async function op(e){try{const t="/api/carts/:customerKey/:cartId/:cartItemId.json".replace(":customerKey",encodeURIComponent(e.customerKey)).replace(":cartId",encodeURIComponent(e.cartId)).replace(":cartItemId",encodeURIComponent(e.cartItemId));return(await k(t,{method:"DELETE"}))?.cart??null}catch(t){return t instanceof Error?(console.debug("deleteCartItem()",t.message),Promise.reject(t)):(console.debug("deleteCartItem()",t),Promise.reject(new Error("Error in deleteCartItem()")))}}async function ap(e){try{if(e.salesOrderNo){const r=new URLSearchParams;r.set("cartId",e.cartId.toString()),r.set("salesOrderNo",e.salesOrderNo);const o=`/sage/b2b/cart-sync/delete-cart.php?${r.toString()}`;await k(o,{method:"DELETE"},Xt),console.log("removed sage quote",e.salesOrderNo)}const t="/api/carts/:customerKey/:cartId.json".replace(":customerKey",encodeURIComponent(e.customerKey)).replace(":cartId",encodeURIComponent(e.cartId));return(await k(t,{method:"DELETE"}))?.carts??[]}catch(t){return t instanceof Error?(console.debug("deleteCart()",t.message),Promise.reject(t)):(console.debug("deleteCart()",t),Promise.reject(new Error("Error in deleteCart()")))}}async function ip(e){try{const t="/api/carts/:customerKey/:cartId/email.json".replace(":customerKey",encodeURIComponent(e.customerKey)).replace(":cartId",encodeURIComponent(e.cartId));return(await k(t,{method:"POST"}))?.result??null}catch(t){return t instanceof Error?(console.debug("postCartEmail()",t.message),Promise.reject(t)):(console.debug("postCartEmail()",t),Promise.reject(new Error("Error in postCartEmail()")))}}async function cp(e){try{const t=new URLSearchParams;t.set("cartId",e.cartId.toString()),window.location.hostname==="localhost"&&t.set("debug","1");const n=JSON.stringify(e),r=`/sage/b2b/cart-sync/sync-to-sage.php?${t.toString()}`;return(await k(r,{method:"POST",body:n}))?.salesOrderNo??null}catch(t){return t instanceof Error?(console.debug("postProcessCart()",t.message),Promise.reject(t)):(console.debug("postProcessCart()",t),Promise.reject(new Error("Error in postProcessCart()")))}}async function lp(e){try{const{customerKey:t,salesOrderNo:n,...r}=e,o="/api/carts/:customerKey/duplicate/:salesOrderNo.json".replace(":customerKey",encodeURIComponent(t)).replace(":salesOrderNo",encodeURIComponent(n));return(await k(o,{method:"POST",body:JSON.stringify(r)}))?.cart??null}catch(t){return t instanceof Error?(console.debug("postDuplicateSalesOrder()",t.message),Promise.reject(t)):(console.debug("postDuplicateSalesOrder()",t),Promise.reject(new Error("Error in postDuplicateSalesOrder()")))}}async function dp(){try{return(await k("/api/carts/next-ship-date.json",{method:"GET",cache:"no-cache"}))?.nextShipDate??null}catch(e){return e instanceof Error?(console.debug("fetchNextShipDate()",e.message),Promise.reject(e)):(console.debug("fetchNextShipDate()",e),Promise.reject(new Error("Error in fetchNextShipDate()")))}}const up=W("alerts/setAlert"),Rc=W("alerts/dismissAlert"),es=W("alerts/dismissByContext"),J=be({selectId:e=>e.key,sortComparer:(e,t)=>e.key-t.key}),mp=J.getSelectors(),pp={global:"idle"},jo=de({name:"cartsStatus",initialState:J.getInitialState(pp),reducers:{},extraReducers:e=>{e.addCase(Se.pending,(t,n)=>{J.setOne(t,{key:n.meta.arg.cartId??0,status:"saving"})}).addCase(Se.fulfilled,(t,n)=>{J.removeOne(t,0),n.payload&&J.setOne(t,{key:n.payload.header.id,status:"idle"})}).addCase(Se.rejected,(t,n)=>{J.setOne(t,{key:n.meta.arg.cartId??0,status:"idle"})}).addCase(Me.pending,(t,n)=>{J.setOne(t,{key:n.meta.arg.cartId,status:"loading"})}).addCase(Me.fulfilled,(t,n)=>{if(!n.payload){J.removeOne(t,n.meta.arg.cartId);return}J.setOne(t,{key:n.payload.header.id,status:"idle"})}).addCase(Me.rejected,(t,n)=>{if(n.error&&n.error.message?.toLowerCase()==="not found"){J.removeOne(t,n.meta.arg.cartId);return}J.setOne(t,{key:n.meta.arg.cartId,status:"idle"})}).addCase(we.pending,t=>{t.global="loading"}).addCase(we.fulfilled,(t,n)=>{t.global="idle",J.setAll(t,n.payload.map(r=>({key:r.header.id,status:"idle"})))}).addCase(we.rejected,t=>{t.global="rejected"}).addCase(At.pending,(t,n)=>{J.setOne(t,{key:n.meta.arg.cartId,status:"saving"})}).addCase(At.fulfilled,(t,n)=>{J.setOne(t,{key:n.meta.arg.cartId,status:"idle"})}).addCase(At.rejected,(t,n)=>{J.setOne(t,{key:n.meta.arg.cartId,status:"idle"})}).addCase(Ge.pending,(t,n)=>{J.setOne(t,{key:n.meta.arg.cartId,status:"saving"})}).addCase(Ge.fulfilled,(t,n)=>{J.setOne(t,{key:n.meta.arg.cartId,status:"idle"})}).addCase(Ge.rejected,(t,n)=>{J.setOne(t,{key:n.meta.arg.cartId,status:"idle"})}).addCase(Vt.pending,(t,n)=>{J.setOne(t,{key:n.meta.arg.id,status:"saving"})}).addCase(Vt.fulfilled,(t,n)=>{if(n.payload){J.removeOne(t,n.meta.arg.id);return}J.setOne(t,{key:n.meta.arg.id,status:"idle"})}).addCase(Nt.pending,t=>{J.setOne(t,{key:0,status:"saving"})}).addCase(Nt.fulfilled,(t,n)=>{J.removeOne(t,0),n.payload&&J.addOne(t,{key:n.payload.header.id,status:"idle"})}).addCase(Nt.rejected,t=>{J.removeOne(t,0)}).addCase(es,(t,n)=>{switch(n.payload){case we.typePrefix:t.global="idle"}})},selectors:{selectCartsStatus:e=>e.global,selectCartStatusById:(e,t)=>mp.selectById(e,t)?.status??"idle"}}),{selectCartStatusById:ve,selectCartsStatus:ya}=jo.selectors,hp=({field:e,ascending:t})=>(n,r)=>{const o=t?1:-1;switch(e){case"salesOrderNo":case"customerPONo":case"dateCreated":case"shipToName":case"ShipToName":return((n[e]??"").toLowerCase()===(r[e]??"").toLowerCase()?n.id-r.id:(n[e]??"").toLowerCase()>(r[e]??"").toLowerCase()?1:-1)*o;case"ShipToCity":return(Es(n).toLowerCase().localeCompare(Es(r).toLowerCase())===0?n.id-r.id:Es(n).toLowerCase().localeCompare(Es(r).toLowerCase()))*o;case"subTotalAmt":return(new w(n[e]).eq(r[e])?n.id-r.id:new w(n[e]).gt(r[e])?1:-1)*o;case"id":default:return(n.id-r.id)*o}},Vr=e=>e?+e:NaN,fp=({field:e,ascending:t})=>(n,r)=>{const o=t?1:-1;switch(e){case"itemCode":return(n[e].toLowerCase()===r[e].toLowerCase()?n.id-r.id:n[e].toLowerCase()>r[e].toLowerCase()?1:-1)*o;case"lineKey":case"lineSeqNo":return(+(n[e]??0)==+(r[e]??0)?n.id-r.id:+(n[e]??0)-+(r[e]??0))*o;case"id":default:return(n.id-r.id)*o}},gp=e=>e.itemType==="4"?null:{itemCode:e.itemCode,quantity:+(e.quantityOrdered??1),comment:e.commentText??"",productId:e.cartProduct.productId??0,image:e.cartProduct.image??"",name:e.itemCodeDesc};function xp(e){return e.filter(t=>t.itemType==="1").map(t=>new w(t.quantityOrdered).times(t.unitOfMeasureConvFactor)).reduce((t,n)=>n.add(t),new w(0)).toNumber()}function Es(e){return`${e.ShipToCity??""}, ${e.ShipToState??""} ${e.ShipToZipCode??""}`.trim()}const Mc=()=>{const e=T.getItem(Jt,null);return{customerKey:A(T.getItem(Mt,null)),cartId:T.getItem(Ne,null),promoCode:null,shippingAccount:{enabled:e?.enabled??!1,value:e?.value??""},nextShipDate:null}},ge=be({selectId:e=>e.id,sortComparer:(e,t)=>e.id===t.id?1:e.id}),xt=ge.getSelectors(),Cp={customerKey:null,sort:{field:"lineSeqNo",ascending:!0}},Jn=de({name:"cartsDetail",initialState:ge.getInitialState(Cp),reducers:{setCartDetailSort:(e,t)=>{e.sort=t.payload},setCartItem:(e,t)=>{const{id:n,...r}=t.payload;ge.updateOne(e,{id:n,changes:{...r,changed:!0}})}},extraReducers:e=>{e.addCase(Se.fulfilled,(t,n)=>{if(n.payload){const r=xt.selectAll(t).filter(o=>o.cartHeaderId===n.payload.header.id).map(o=>o.id);ge.removeMany(t,r),ge.addMany(t,n.payload.detail)}}).addCase(Me.fulfilled,(t,n)=>{const r=xt.selectAll(t).filter(o=>o.cartHeaderId===n.payload.header.id).map(o=>o.id);if(ge.removeMany(t,r),n.payload){ge.addMany(t,n.payload.detail);return}}).addCase(Me.rejected,(t,n)=>{const r=xt.selectAll(t).filter(o=>o.cartHeaderId===n.meta.arg.cartId).map(o=>o.id);ge.removeMany(t,r)}).addCase(we.pending,(t,n)=>{t.customerKey!==n.meta.arg&&(ge.removeAll(t),t.customerKey=n.meta.arg)}).addCase(we.fulfilled,(t,n)=>{const r=[];n.payload.forEach(o=>{r.push(...o.detail)}),ge.setAll(t,r)}).addCase(G.pending,(t,n)=>{t.customerKey!==A(n.meta.arg)&&(ge.removeAll(t),t.customerKey=A(n.meta.arg))}).addCase(Nt.fulfilled,(t,n)=>{n.payload&&ge.addMany(t,n.payload.detail)}).addCase(At.fulfilled,(t,n)=>{if(n.payload){const r=xt.selectAll(t).filter(o=>o.cartHeaderId===n.payload.header.id).map(o=>o.id);ge.removeMany(t,r),ge.addMany(t,n.payload.detail)}}).addCase(Ge.fulfilled,(t,n)=>{if(n.payload){const r=xt.selectAll(t).filter(o=>o.cartHeaderId===n.payload.header.id).map(o=>o.id);ge.removeMany(t,r),ge.addMany(t,n.payload.detail)}})},selectors:{selectAll:e=>xt.selectAll(e),selectCartItemById:(e,t)=>xt.selectById(e,t),selectCartDetailSort:e=>e.sort,selectCartItemStatus:(e,t)=>xt.selectById(e,t).lineStatus??"idle"}}),{selectCartDetailSort:jp,selectAll:yp,selectCartItemById:Uc,selectCartItemStatus:cS}=Jn.selectors,Or=R([yp,(e,t)=>t],(e,t)=>e.filter(n=>n.cartHeaderId===t)),Sp=R([Or],e=>xp(e)),Fc=R([Or],e=>e.reduce((t,n)=>(n.changed??!1)||t,!1)),Sa=R([Or,jp],(e,t)=>[...e].sort(fp(t)));R([Or],e=>e.reduce((t,n)=>(n.cartProduct?.requiresCustomization??!1)||t,!1));const{setCartDetailSort:lS,setCartItem:Xn}=Jn.actions,vp=e=>{e.cartId=null,e.promoCode=null,e.shippingAccount=T.getItem(Jt,null),e.nextShipDate=null},yo=de({name:"activeCart",initialState:Mc(),reducers:{},extraReducers:e=>{e.addCase(Se.fulfilled,(t,n)=>{n.meta.arg.setActiveCart&&n.payload&&(t.cartId=n.payload.header.id)}).addCase(Me.pending,(t,n)=>{n.meta.arg.setActiveCart&&(t.cartId=n.meta.arg.cartId)}).addCase(we.pending,(t,n)=>{t.customerKey!==n.meta.arg&&(t.customerKey=n.meta.arg,t.cartId=null)}).addCase(we.fulfilled,(t,n)=>{!t.cartId&&n.payload.length&&(t.cartId=n.payload[0].header.id)}).addCase(G.pending,(t,n)=>{t.customerKey!==A(n.meta.arg)&&(t.customerKey=A(n.meta.arg),t.cartId=null)}).addCase(Ip,(t,n)=>{t.cartId=n.payload}).addCase(Qn,(t,n)=>{t.shippingAccount=n.payload}).addCase(Vt.fulfilled,(t,n)=>{t.cartId===n.meta.arg.id&&vp(t)}).addCase(Nt.fulfilled,(t,n)=>{n.payload&&(t.cartId=n.payload.header.id)}).addCase(So.fulfilled,(t,n)=>{t.nextShipDate=n.payload})},selectors:{selectActiveCartId:e=>e.cartId??0,selectCartPromoCode:e=>e.promoCode,selectCartShippingAccount:e=>e.shippingAccount,selectNextShipDate:e=>e.nextShipDate}}),{selectActiveCartId:ln,selectCartShippingAccount:Dr,selectCartPromoCode:dS,selectNextShipDate:_c}=yo.selectors,we=L("carts/loadCarts",async e=>{const t=await Qm(e),n=T.getItem(Ne,null);return n&&!t.filter(r=>r.header.id===n).length&&T.removeItem(Ne),t},{condition:(e,{getState:t})=>{const n=t();return!!e&&ya(n)==="idle"}}),Me=L("carts/loadCart",async e=>{const t=await ep(e);return t&&e.setActiveCart?T.setItem(Ne,t.header.id):t||T.getItem(Ne,null)===e.cartId&&T.removeItem(Ne),t},{condition:(e,{getState:t})=>{const n=t();return ve(n,e.cartId)==="idle"}}),At=L("carts/saveCart",async(e,{getState:t})=>{const n=t(),o=Sa(n,e.cartId).filter(a=>a.changed).map(a=>({id:a.id,quantityOrdered:a.quantityOrdered,commentText:a.commentText,itemType:a.itemType}));return o.length>0&&await rp({...e,items:o}),await tp(e)},{condition:(e,{getState:t})=>{const n=t();return!!e.cartId&&ve(n,e.cartId)==="idle"}}),wp=L("carts/removeCart",async e=>await ap(e),{condition:(e,{getState:t})=>{const n=t();return!!e.cartId&&ve(n,e.cartId)==="idle"}}),Se=L("carts/addToCart",async e=>await sp(e),{condition:(e,{getState:t})=>{const n=t();return(e.item.itemType==="4"||+e.item.quantityOrdered>0)&&(!e.cartId||ve(n,e.cartId)==="idle")}}),Ge=L("carts/saveCartItem",async e=>e.item.quantityOrdered===0?await op(e):await np(e),{condition:(e,{getState:t})=>{const n=t();return!!e.cartId&&!!e.cartItemId&&ve(n,e.cartId)==="idle"}}),bp=L("open-orders/sendEmail",async e=>await ip(e),{condition:(e,{getState:t})=>{const n=t();return ve(n,e.cartId)==="idle"}}),Ip=W("activeCart/setActiveCartId",e=>(e?T.setItem(Ne,e):T.removeItem(Ne),{payload:e})),Qn=W("activeCart/setCartShippingAccount",e=>(ws()&&T.setItem(Jt,e),{payload:e})),Vt=L("processCart",async(e,{getState:t})=>{const n=t(),r=Dr(n),o=jm(n),a=[];r?.enabled&&(a.push("RCP"),a.push(`${r.value.trim()}`)),e.CancelReasonCode?.toUpperCase()==="HOLD"?a.push("HOLD"):a.push("SWR");const i=["SLC",o?.toUpperCase()?.slice(0,1)??""].filter(l=>!!l).join("~"),c={action:"promote",cartId:e.id,cartName:e.customerPONo,shipExpireDate:e.shipExpireDate,shipToCode:e.shipToCode??"",shipVia:e.shipVia??"",paymentType:e.PaymentType,comment:a.join(" ~ "),promoCode:e.promoCode??"",FOB:i};return await cp(c)},{condition:(e,{getState:t})=>{const n=t();return!!e.id&&ve(n,e.id)==="idle"}}),Nt=L("carts/duplicateSalesOrder",async e=>await lp(e),{condition:(e,{getState:t})=>{const n=t();return!!e.salesOrderNo&&ve(n,0)==="idle"}}),So=L("carts/loadNextShipDate",async()=>await dp()),Pp={customerKey:null,values:null,status:"idle"},vo=de({name:"customerPermissions",initialState:Pp,reducers:{},extraReducers:e=>{e.addCase(ee,(t,n)=>{n.payload.loggedIn||(t.customerKey=null,t.values=null,t.status="idle")}).addCase(Oe.fulfilled,(t,n)=>{!n.meta.arg?.isRepAccount&&A(n.meta.arg)!==t.customerKey&&(t.status="idle",t.customerKey=A(n.meta.arg),t.values=null)}).addCase(Os.pending,(t,n)=>{const r=A(n.meta.arg);t.status="loading",t.customerKey!==r&&(t.values=null,t.customerKey=r)}).addCase(Os.fulfilled,(t,n)=>{t.customerKey=A(n.meta.arg),t.values=n.payload,t.status="fulfilled"}).addCase(Os.rejected,(t,n)=>{t.status="rejected"}).addCase(es,(t,n)=>{n.payload===Os.typePrefix&&(t.status="idle")}).addMatcher(sn(nt.fulfilled,rt.fulfilled,G.fulfilled),(t,n)=>{t.customerKey=A(n.payload?.customer??null),t.values=n.payload?.permissions??null})},selectors:{selectCustomerPermissions:e=>e.values,selectCustomerPermissionsStatus:e=>e.status}}),{selectCustomerPermissions:Ut,selectCustomerPermissionsStatus:Hc}=vo.selectors,dn=W("customer/setReturnTo"),Bc=W("customer/setShipToCode"),Ms=L("customer/saveUser",async(e,{getState:t})=>{const n=t(),r=se(n);return await bm(e,r)},{condition:(e,{getState:t})=>{const n=t();return H(n)&&!je(n)&&!!q(n)}}),Us=L("customer/removeUser",async(e,{getState:t})=>{const n=t(),r=q(n);return await Im(e,r)},{condition:(e,{getState:t})=>{const n=t();return H(n)&&!je(n)&&!!q(n)}}),Je=L("customer/setCurrent",async(e,{getState:t})=>{const n=t(),r=nc(ja(n),e);return ws()&&T.setItem(Ve,r),{customer:e,recent:r}},{condition:(e,{getState:t})=>{const n=t(),r=q(n);return H(n)&&(!r||A(r)!==A(e))}}),G=L("customer/load",async(e,{dispatch:t,getState:n})=>{const r=await ms(e),o=Ee(r.customer);o&&(t(It(o)),t(we(o)));const a=n();r.recent=nc(ja(a),r.customer),ws()&&T.setItem(Ve,r.recent);const{ARDivisionNo:i,CustomerNo:c,CustomerName:l,ShipToCode:m}=r.customer;return T.setItem(Mt,{ARDivisionNo:i,CustomerNo:c,CustomerName:l,ShipToCode:m}),r},{condition:(e,{getState:t})=>{const n=t();return H(n)&&!!e&&!(je(n)||Qp(n))}}),nt=L("customer/saveBillingAddress",async e=>await Pm(e),{condition:(e,{getState:t})=>{const n=t();return H(n)&&!je(n)}}),rt=L("customer/saveShipToAddress",async e=>await Tm(e),{condition:(e,{getState:t})=>{const n=t();return H(n)&&!!e.ShipToCode&&e.ShipToCode.length<=4&&!je(n)}}),Tn=L("customer/setDefaultShipTo",async(e,{getState:t})=>{const n=t(),r=q(n);await Am(e,r)},{condition:(e,{getState:t})=>{const n=t();return H(n)&&!je(n)}}),Os=L("customer/values/load",async e=>await Pc(e),{condition:(e,{getState:t})=>{const n=t();return H(n)&&!!e&&Hc(n)==="idle"&&!!q(n)}}),Fs=L("customer/users/load",async(e,{getState:t})=>{const n=t(),r=se(n);return await Pn(r)},{condition:(e,{getState:t})=>{const n=t();return H(n)&&!je(n)&&!!se(n)}}),Qs="AUTH_LOCAL",wo="AUTH_GOOGLE",Tp="USER_EXISTS",Ap="949305513396-8tmadc840cuabrda5ucvs171be1ups1e.apps.googleusercontent.com";async function Np(e){try{const t=JSON.stringify(e),r=await k("/api/user/v2/b2b/login/local.json",{method:"POST",body:t,credentials:"omit"},Xt);return Qt(r)?r:r?(gc("credentials"),r.token):Promise.reject(new Error("Login Error: unknown error"))}catch(t){return t instanceof Error?(console.debug("postLocalLogin()",t.message),Promise.reject(t)):(console.debug("postLocalLogin()",t),Promise.reject(new Error("Error in postLocalLogin()")))}}async function Ep(){try{return(await k("/api/user/v2/b2b/auth/renew.json",{method:"POST"}))?.token??null}catch(e){return e instanceof Error?(console.debug("postLocalReauth()",e.message),Promise.reject(e)):(console.debug("postLocalReauth()",e),Promise.reject(new Error("Error in postLocalReauth()")))}}async function Op(){try{const t=await k("/api/user/v2/b2b/profile.json",{cache:"no-cache"});return t?(t.reps=[],t.user?.accountType===1&&(t.reps=await Lr()),cc({user_id:`${t?.user?.id??0}`}),t):Promise.reject(new Error("Error loading user profile"))}catch(e){return e instanceof Error?(console.debug("fetchUserProfile()",e.message),Promise.reject(e)):(console.debug("fetchUserProfile()",e),Promise.reject(new Error("Error in fetchUserProfile()")))}}async function Dp(e){try{const t="/api/user/v2/b2b/profile.json",n=JSON.stringify(e),r=await k(t,{method:"PUT",body:n});if(!r)return Promise.reject(new Error("Unknown error when saving user profile."));if(r.reps=[],r.roles=r.roles?.map(o=>cm(o)?o.role:o),r.user?.accountType===1&&(r.reps=await Lr()),r.token)try{const o=qt(r.token);r.expires=o.exp}catch{}return r}catch(t){return t instanceof Error?(console.debug("postUserProfile()",t.message),Promise.reject(t)):(console.debug("postUserProfile()",t),Promise.reject(new Error("Error in postUserProfile()")))}}async function Lr(){try{return((await k("/api/sales/b2b/salesperson/list.json",{cache:"no-cache"}))?.list??[]).filter(n=>!!n.active)}catch(e){return e instanceof Error?(console.debug("fetchRepList()",e.message),Promise.reject(e)):(console.debug("fetchRepList()",e),Promise.reject(new Error("Error in fetchRepList()")))}}async function Lp(e){try{vr(e)||oe.setToken(e);const t=JSON.stringify({token:e}),r=await k("/api/user/v2/b2b/login/google.json",{method:"POST",body:t,credentials:"omit"});if(!r)return Promise.reject(new Error("Unable to load Google login"));if(r.reps=[],r.user?.accountType===1&&(r.reps=await Lr()),r.token)try{const o=qt(r.token);r.expires=o.exp}catch{}if(r.user){const o=fo(e),{user:a,roles:i,accounts:c}=r,l={...o,chums:{user:{...a,roles:i,accounts:c}}};gc("google"),oe.setProfile(l),T.setItem(Rt,wo)}return r}catch(t){return t instanceof Error?(console.debug("fetchGoogleLogin()",t.message),Promise.reject(t)):(console.debug("fetchGoogleLogin()",t),Promise.reject(new Error("Error in fetchGoogleLogin()")))}}async function kp(e){try{const t=JSON.stringify({email:e});return(await k("/api/user/v2/b2b/login/reset-password.json",{method:"POST",body:t,credentials:"omit"}))?.success??!1}catch(t){return t instanceof Error?(console.debug("postResetPassword()",t.message),Promise.reject(t)):(console.debug("postResetPassword()",t),Promise.reject(new Error("Error in postResetPassword()")))}}async function Rp(e){try{const t="/api/user/v2/b2b/signup/:hash/:key.json".replace(":hash",encodeURIComponent(e.hash)).replace(":key",encodeURIComponent(e.key)),n=await k(t,{cache:"no-cache"},Xt);return Qt(n)?n:(cc({user_id:`${n?.user?.id??0}`}),n?.user??null)}catch(t){return t instanceof Error?(console.debug("fetchSignUpProfile()",t.message),Promise.reject(t)):(console.debug("fetchSignUpProfile()",t),Promise.reject(new Error("Error in fetchSignUpProfile()")))}}async function Mp(e){try{const t=e.email,n="/api/user/v2/b2b/signup.json".replace(":email",encodeURIComponent(t)),r=JSON.stringify(e),o=await k(n,{method:"POST",body:r});return qu(),o}catch(t){return t instanceof Error?(console.debug("postSignUpUser()",t.message),Promise.reject(t)):(console.debug("postSignUpUser()",t),Promise.reject(new Error("Error in postSignUpUser()")))}}async function Up(e){try{const t="/api/user/v2/b2b/password.json",n=JSON.stringify(e);return await k(t,{method:"POST",body:n},Xt)}catch(t){return t instanceof Error?(console.debug("postPasswordChange()",t.message),Promise.reject(t)):(console.debug("postPasswordChange()",t),Promise.reject(new Error("Error in postPasswordChange()")))}}async function Fp(e){try{const t="/api/user/v2/b2b/signup/:hash/:key.json".replace(":hash",encodeURIComponent(e.hash)).replace(":key",encodeURIComponent(e.key)),n=JSON.stringify({newPassword:e.newPassword});return await k(t,{method:"POST",body:n},Xt)??null}catch(t){return t instanceof Error?(console.debug("postNewPassword()",t.message),Promise.reject(t)):(console.debug("postNewPassword()",t),Promise.reject(new Error("Error in postNewPassword()")))}}async function _p(){try{await k("/api/user/v2/b2b/logout.json",{method:"POST"},Xt)}catch(e){return e instanceof Error?(console.debug("postLogout()",e.message),Promise.reject(e)):(console.debug("postLogout()",e),Promise.reject(new Error("Error in postLogout()")))}}async function Hp(e){try{if(!e.isRepAccount)return[];const t="/api/sales/b2b/account-list/:Company/:SalespersonDivisionNo-:SalespersonNo".replace(":Company",encodeURIComponent("chums")).replace(":SalespersonDivisionNo",encodeURIComponent(e.SalespersonDivisionNo)).replace(":SalespersonNo",encodeURIComponent(e.SalespersonNo));return(await k(t,{cache:"no-cache"}))?.result??[]}catch(t){return t instanceof Error?(console.debug("fetchCustomerList()",t.message),Promise.reject(t)):(console.debug("fetchCustomerList()",t),Promise.reject(new Error("Error in fetchCustomerList()")))}}const bo=[{code:"AA",name:"Armed Forces Americas"},{code:"AE",name:"Armed Forces Europe, the Middle East, and Canada"},{code:"AL",name:"Alabama"},{code:"AK",name:"Alaska"},{code:"AP",name:"Armed Forces Pacific"},{code:"AS",name:"American Samoa"},{code:"AZ",name:"Arizona"},{code:"AR",name:"Arkansas"},{code:"CA",name:"California"},{code:"CO",name:"Colorado"},{code:"CT",name:"Connecticut"},{code:"DE",name:"Delaware"},{code:"DC",name:"District Of Columbia"},{code:"FM",name:"Federated States Of Micronesia"},{code:"FL",name:"Florida"},{code:"GA",name:"Georgia"},{code:"GU",name:"Guam"},{code:"HI",name:"Hawaii"},{code:"ID",name:"Idaho"},{code:"IL",name:"Illinois"},{code:"IN",name:"Indiana"},{code:"IA",name:"Iowa"},{code:"KS",name:"Kansas"},{code:"KY",name:"Kentucky"},{code:"LA",name:"Louisiana"},{code:"ME",name:"Maine"},{code:"MH",name:"Marshall Islands"},{code:"MD",name:"Maryland"},{code:"MA",name:"Massachusetts"},{code:"MI",name:"Michigan"},{code:"MN",name:"Minnesota"},{code:"MP",name:"Northern Mariana Islands"},{code:"MS",name:"Mississippi"},{code:"MO",name:"Missouri"},{code:"MT",name:"Montana"},{code:"NE",name:"Nebraska"},{code:"NV",name:"Nevada"},{code:"NH",name:"New Hampshire"},{code:"NJ",name:"New Jersey"},{code:"NM",name:"New Mexico"},{code:"NY",name:"New York"},{code:"NC",name:"North Carolina"},{code:"ND",name:"North Dakota"},{code:"OH",name:"Ohio"},{code:"OK",name:"Oklahoma"},{code:"OR",name:"Oregon"},{code:"PW",name:"Palau"},{code:"PA",name:"Pennsylvania"},{code:"PR",name:"Puerto Rico"},{code:"RI",name:"Rhode Island"},{code:"SC",name:"South Carolina"},{code:"SD",name:"South Dakota"},{code:"TN",name:"Tennessee"},{code:"TX",name:"Texas"},{code:"UT",name:"Utah"},{code:"VT",name:"Vermont"},{code:"VI",name:"Virgin Islands"},{code:"VA",name:"Virginia"},{code:"WA",name:"Washington"},{code:"WV",name:"West Virginia"},{code:"WI",name:"Wisconsin"},{code:"WY",name:"Wyoming"}],Bp=[{code:"AB",name:"Alberta"},{code:"BC",name:"British Columbia"},{code:"MB",name:"Manitoba"},{code:"NB",name:"New Brunswick"},{code:"NL",name:"Newfoundland and Labrador"},{code:"NT",name:"Northwest Territories"},{code:"NS",name:"Nova Scotia"},{code:"NU",name:"Nunavut"},{code:"ON",name:"Ontario"},{code:"PE",name:"Prince Edward Island"},{code:"QC",name:"Quebec"},{code:"SK",name:"Saskatchewan"},{code:"YT",name:"Yukon"}],Ft=be({selectId:e=>A(e),sortComparer:(e,t)=>A(e).localeCompare(A(t))}),Kp=Ft.getSelectors(),Kc=()=>({accessKey:null,status:"idle",filters:{search:"",rep:T.getItem(jr,""),state:T.getItem(yr,"")},countries:[],states:[],sort:{field:"CustomerName",ascending:!0}});function $p(e){return Ft.getInitialState({...Kc()})}const er=de({name:"customerList",initialState:Ft.getInitialState(Kc()),reducers:{setCustomersSort:(e,t)=>{e.sort=t.payload},setCustomersFilter:(e,t)=>{e.filters.search=t.payload},setCustomersRepFilter:(e,t)=>{e.filters.rep=t.payload??"",T.setItem(jr,t.payload)},setCustomersStateFilter:(e,t)=>{e.filters.state=t.payload??"",T.setItem(yr,t.payload)}},extraReducers:e=>{e.addCase(ee,(t,n)=>{n.payload.loggedIn||(Ft.removeAll(t),t.filters.search="",t.filters.rep="",t.filters.state="",t.accessKey=null,t.status==="fulfilled"&&(t.status="idle"))}).addCase(Te.pending,(t,n)=>{t.status="loading",t.accessKey!==n.meta.arg?.id&&(t.accessKey=n.meta.arg?.id??null,Ft.removeAll(t))}).addCase(Te.fulfilled,(t,n)=>{t.status="fulfilled",Ft.setAll(t,n.payload)}).addCase(Te.rejected,t=>{t.status="rejected"}).addCase(es,(t,n)=>{n.payload===Te.typePrefix&&(t.status="idle")}).addCase(Oe.pending,(t,n)=>{t.accessKey!==n.meta.arg?.id&&(Ft.removeAll(t),t.status="idle",t.filters.rep="",t.filters.search="",t.filters.state="",t.accessKey=n.meta.arg?.id??null)})},selectors:{selectCustomerList:e=>Kp.selectAll(e),selectCustomersStatus:e=>e.status,selectCustomersSearchFilter:e=>e.filters.search,selectCustomersRepFilter:e=>e.filters.rep,selectCustomersStateFilter:e=>e.filters.state,selectCustomersSort:e=>e.sort}}),{selectCustomerList:$c,selectCustomersStatus:zc,selectCustomersSearchFilter:Wc,selectCustomersRepFilter:Gc,selectCustomersStateFilter:Vc,selectCustomersSort:Yc}=er.selectors,{setCustomersFilter:zp,setCustomersRepFilter:qc,setCustomersStateFilter:Zc,setCustomersSort:za}=er.actions,Wp=R([$c,Wc,Gc,Vc,Yc],(e,t,n,r,o)=>{let a=/^/;try{a=new RegExp(`\\b${t??""}`,"i")}catch{a=/^/}return e.filter(i=>!n||i.SalespersonNo===n).filter(i=>!r||i.State===r).filter(i=>!t||a.test(Cr(i))||a.test(`${i.ARDivisionNo}-${i.CustomerNo}`)||a.test(`${i.ARDivisionNo}${i.CustomerNo}`)||a.test(i.CustomerNo)||a.test(i.CustomerName)||a.test(i.BillToName??"")||a.test(i.AddressLine1??"")||a.test(i.City??"")||a.test(i.State??"")||a.test(i.ZipCode??"")||a.test(i.TelephoneNo??"")).sort(Pu(o))}),Jc=R([$c],e=>e.reduce((n,r)=>{if(r.CountryCode==="USA"&&r.State&&!n.includes(r.State)){const[o]=bo.filter(a=>a.code===r.State);if(o)return[...n,o.code]}return n},[]).sort()),Te=L("customers/list/load",async e=>await Hp(e),{condition:(e,{getState:t})=>{const n=t();return H(n)&&!!e?.isRepAccount&&["idle","fulfilled"].includes(zc(n))}}),ee=W("user/setLoggedIn",function(e){if(e.loggedIn){const n=oe.getProfile()?.chums?.user?.accounts??[];e.accessList||(e.accessList=n),e.access||(e.access=T.getItem(at,n.length===1?n[0]:null)),e.authType||(e.authType=T.getItem(Rt,null)??"")}return{payload:{...e}}}),An=L("user/login",async(e,{dispatch:t})=>{const n=await Np(e);if(!Qt(n)){const r=n;oe.setToken(r),T.setItem(Rt,Qs),oe.setProfile(oc(r));const o=ac(r),a=T.getItem(Ve,[]);t(ee({loggedIn:!0,authType:Qs,token:r,expires:o,recentCustomers:a}));const i=await t(ot());bi(i)&&i.payload.accounts?.length===1&&t(Te(i.payload.accounts[0]))}return n},{condition:(e,{getState:t})=>{const n=t();return!!e.email&&!!e.password&&!ym(n)}}),Nn=L("user/updateLocalAuth",async(e,{dispatch:t})=>{try{const n=await Ep();if(!n){t(ee({loggedIn:!1})),oe.removeToken();return}oe.setToken(n),oe.setProfile(oc(n));const r=ac(n);t(ee({loggedIn:!0,authType:Qs,token:n,expires:r}))}catch(n){n instanceof Error&&console.log("updateLocalAuth()",n.message),t(ee({loggedIn:!1})),oe.removeToken();return}t(ot())},{condition:(e,{getState:t})=>{const n=t(),r=H(n),o=cn(n);return r&&o==="idle"}}),$t=L("user/signInWithGoogle",async e=>{const t=await Lp(e);if(oe.setToken(t.token??e),t.user){const n=fo(e),{user:r,roles:o,accounts:a,token:i}=t;i&&oe.setToken(i);const c={...n,chums:{user:{...r,roles:o??[],accounts:a??[]}}};t.picture=fo(e)?.imageUrl??null,oe.setProfile(c),t.recentCustomers=T.getItem(Ve,[])}return t},{condition:(e,{getState:t})=>{const n=t();return!Ir(n)}}),_s=L("user/logoutUser",async(e,{dispatch:t})=>{try{await _p(),oe.logout()}catch(n){n instanceof Error&&console.debug("()",n.message)}T.removeItem(Mt),T.removeItem(at),T.removeItem(Rt),T.removeItem(Ne),T.removeItem(Jt),t(ee({loggedIn:!1}))},{condition:(e,{getState:t})=>{const n=t();return cn(n)==="idle"}}),Oe=L("userAccess/setCurrent",async(e,{dispatch:t})=>{if(T.setItem(at,e),In(e))if(e.isRepAccount)t(Te(e));else{const{ARDivisionNo:n,CustomerNo:r,CustomerName:o,ShipToCode:a}=e;t(Je({ARDivisionNo:n,CustomerNo:r,ShipToCode:a})),t(G(e)),T.setItem(Mt,{ARDivisionNo:n,CustomerNo:r,CustomerName:o??""})}return e},{condition:(e,{getState:t})=>{const n=t();return H(n)&&!!e?.isRepAccount&&Ce(n)?.id!==e?.id}}),ot=L("user/loadProfile",async()=>await Op(),{condition:(e,{getState:t})=>{const n=t();return!Ir(n)&&H(n)}}),En=L("user/changePassword",async e=>await Up(e)??{success:!1,error:"Unknown error changing password."},{condition:(e,{getState:t})=>{const n=t();return cn(n)==="idle"}}),On=L("user/setNewPassword",async e=>{const t=await Fp(e);return t?.success,t},{condition:(e,{getState:t})=>{const n=t();return cn(n)==="idle"}}),Hs=L("user/resetPassword",async e=>await kp(e),{condition:(e,{getState:t})=>{const n=t();return!!e.trim()&&!H(n)&&!bc(n)}}),Bs=L("user/saveProfile",async e=>await Dp(e),{condition:(e,{getState:t})=>{const n=t();return!!e.name.trim()&&H(n)}}),Gp=W("user/setAvatar",e=>(e?T.setItem(Tt,e):T.removeItem(Tt),{payload:e})),Ds=be({selectId:e=>e.id,sortComparer:(e,t)=>e.id-t.id}),Wa=Ds.getSelectors(),Vp={current:T.getItem(at,null),status:"idle"},Io=de({name:"userAccess",initialState:Ds.getInitialState(Vp),reducers:{},extraReducers:e=>{e.addCase(ee,(t,n)=>{n.payload.loggedIn?t.current||(Ds.setAll(t,n.payload.accessList??[]),t.current=n.payload.access??null):(Ds.removeAll(t),t.current=null)}).addCase(Oe.pending,(t,n)=>{t.current=n.meta.arg}).addMatcher(sn(ot.fulfilled,$t.fulfilled,Bs.fulfilled),(t,n)=>{const r=n.payload.accounts??[];if(Ds.setAll(t,r),In(t.current)&&t.current.id){const o=r.find(a=>In(t.current)&&a.id===t.current.id);t.current=o??null}(!In(t.current)||!t.current?.id&&r.length>0)&&(t.current=hm(r)??null)})},selectors:{selectAccessList:e=>Wa.selectAll(e),selectUserAccessCount:e=>Wa.selectTotal(e),selectCurrentAccess:e=>e.current,selectAccessStatus:e=>e.status}}),{selectAccessList:va,selectCurrentAccess:Ce,selectAccessStatus:Xc,selectUserAccessCount:Yp}=Io.selectors,Qc=R([Ce],e=>/[%_]+/.test(e?.SalespersonNo??"")),wa=R([va],e=>e.filter(t=>!!t.isRepAccount)),el=R([va],e=>e.filter(t=>!t.isRepAccount)),jt=be({selectId:e=>e.ShipToCode,sortComparer:(e,t)=>e.ShipToCode.localeCompare(t.ShipToCode)}),Yr=jt.getSelectors(),qp={customerKey:null,shipToCode:null,sort:{field:"ShipToCode",ascending:!0}},tr=de({name:"customerShipToAddress",initialState:jt.getInitialState(qp),reducers:{setShipToCode:(e,t)=>{e.shipToCode=t.payload},setShipToSort:(e,t)=>{e.sort=t.payload}},extraReducers:e=>{e.addCase(Je.fulfilled,(t,n)=>{const r=A(n.payload.customer);t.customerKey!==r&&(t.customerKey=r,jt.removeAll(t))}).addCase(ee,(t,n)=>{n.payload.loggedIn||jt.removeAll(t)}).addCase(G.pending,(t,n)=>{const r=A(n.meta.arg);t.customerKey!==r&&(t.customerKey=r,jt.removeAll(t))}).addCase(Oe.pending,(t,n)=>{!n.meta.arg?.isRepAccount&&A(n.meta.arg)!==t.customerKey&&jt.removeAll(t)}).addCase(Te.fulfilled,(t,n)=>{t.customerKey&&(n.payload.find(o=>A(o)===t.customerKey)||jt.removeAll(t))}).addMatcher(sn(G.fulfilled,nt.fulfilled,rt.fulfilled),(t,n)=>{t.customerKey=A(n.payload?.customer??null);const r=n.payload?.shipTo??[];if(jt.setAll(t,r),t.shipToCode){const o=r.find(a=>a.ShipToCode===t.shipToCode);t.shipToCode=o?.ShipToCode??null}})},selectors:{selectCustomerShipToCode:e=>e.shipToCode,selectCustomerShipTo:e=>Yr.selectById(e,e.shipToCode??""),selectCustomerShipToAddresses:e=>Yr.selectAll(e),selectShipToByCode:(e,t)=>Yr.selectById(e,t)??null,selectShipToSort:e=>e.sort}}),{setShipToCode:uS,setShipToSort:Zp}=tr.actions,{selectCustomerShipToCode:tl,selectCustomerShipTo:sl,selectCustomerShipToAddresses:Jp,selectShipToSort:nl,selectShipToByCode:mS}=tr.selectors,ts=R([Jp,Ut,Ce],(e,t,n)=>t?.billTo?[...e].filter(xu(n)).sort(po({field:"ShipToName",ascending:!0})):e.filter(r=>!n?.isRepAccount||[r.SalespersonDivisionNo,"%"].includes(n.SalespersonDivisionNo)&&[r.SalespersonDivisionNo,"%"].includes(n.SalespersonDivisionNo)).filter(r=>t?.shipTo.includes(r.ShipToCode)).sort(po({field:"ShipToName",ascending:!0}))),Xp=R([ts,nl],(e,t)=>[...e].sort(po(t))),se=e=>e.customer.key,q=e=>e.customer.account??null,je=e=>e.customer.loading??!1,rl=e=>e.customer.loadStatus,Qp=e=>e.customer.saving??!1,ba=e=>e.customer.loaded??!1,eh=e=>e.customer.returnToPath,kr=R([Ut,Ce,q],(e,t,n)=>e?.billTo&&Cu(t,n)),Ia=R([q,ts,Ut],(e,t,n)=>{if(!n?.billTo||!la(e))return null;const[r]=t.filter(o=>o.ShipToCode===e.PrimaryShipToCode);return r??null}),th=e=>e.invoices.list.invoices??[],sh=e=>e.invoices.list.limit,nh=e=>e.invoices.list.limitReached,rh=e=>e.invoices.list.offset,Rr=e=>e.invoices.invoice??null,oh=e=>e.invoices.invoice?.InvoiceNo??null,ol=e=>e.invoices.loading??!1,ah=e=>e.invoices.loaded??!1,al=e=>e.invoices.invoiceLoading??!1,il=e=>e.invoices.filters.showPaidInvoices,cl=e=>e.invoices.filters.shipToCode,ll=e=>e.invoices.filters.search,dl=e=>e.invoices.sort,ih=R([th,il,cl,ll,dl,kr,ts],(e,t,n,r,o,a,i)=>e.filter(c=>a||i.map(l=>l.ShipToCode).includes(c.ShipToCode??"")).filter(c=>t||!new w(c.Balance??"0").eq(0)).filter(c=>!n||c.ShipToCode===n).filter(c=>!r||c.CustomerPONo?.toLowerCase()?.includes(r.toLowerCase())||c.InvoiceNo.toLowerCase().includes(r.toLowerCase())||c.SalesOrderNo?.toLowerCase()?.includes(r.toLowerCase())).sort(bn(o)));W("invoices/setPage");W("invoices/setRowsPerPage",e=>(ws()&&T.setItem(Js,e),{payload:e}));const Ks=L("invoices/loadInvoice",async e=>await om(e),{condition:(e,{getState:t})=>{const n=t();return!al(n)}}),ps=L("invoices/loadInvoices",async e=>await am(e),{condition:(e,{getState:t})=>{const n=t();return H(n)&&!!e&&!ol(n)&&mo(e.key)}}),ul=W("invoices/filter/setShowPaidInvoices"),ml=W("invoices/filter/setShipToCode"),pl=W("invoices/filter/setSearch"),hl=W("invoices/setSort",e=>(ws()&&T.setItem(Sr,e),{payload:e})),Dn={field:"InvoiceNo",ascending:!1},ch={field:"InvoiceDate",ascending:!1},fl=()=>({customerKey:null,list:{invoices:[],limitReached:!1,offset:0,limit:500},invoice:null,loading:!1,loaded:!1,invoiceLoading:!1,filters:{showPaidInvoices:!0,shipToCode:null,search:""},sort:T.getItem(Sr,ch)}),lh=pe(fl(),e=>{e.addCase(ps.pending,(t,n)=>{t.loading=!0,t.customerKey!==A(n?.meta?.arg?.key)&&(t.list.invoices=[],t.list.offset=n.meta.arg.start??0,t.list.limitReached=!1,t.invoice=null,t.customerKey=A(n?.meta?.arg?.key))}).addCase(ps.fulfilled,(t,n)=>{t.loading=!1;const r=n.payload.map(o=>_e(o));if(t.list.offset=n.meta.arg.start??0,n.meta.arg.start===0&&(t.list.limitReached=!1,t.list.invoices=[]),t.list.invoices=[...t.list.invoices.filter(o=>!r.includes(_e(o))),...n.payload].sort(bn(Dn)),t.loaded=!0,t.list.limitReached=n.payload.length<t.list.limit,t.invoice){const o=t.invoice.InvoiceNo,[a]=n.payload.filter(i=>i.InvoiceNo===o);t.invoice=a?{...t.invoice,...a}:null}}).addCase(ps.rejected,t=>{t.loading=!1}).addCase(Ks.pending,(t,n)=>{t.invoiceLoading=!0;const[r]=t.list.invoices.filter(o=>o.InvoiceNo===n.meta.arg.InvoiceNo&&o.InvoiceType===n.meta.arg.InvoiceType);r&&(hu(r)?t.invoice=r:t.invoice={...r,Detail:[],Track:[],Payments:[]})}).addCase(Ks.fulfilled,(t,n)=>{t.invoiceLoading=!1,t.invoice=n.payload,n.payload?t.list.invoices=[...t.list.invoices.filter(r=>!(n.meta.arg.InvoiceNo&&r.InvoiceType===n.meta.arg.InvoiceType)),n.payload].sort(bn(Dn)):t.list.invoices=t.list.invoices.filter(r=>!(n.meta.arg.InvoiceNo&&r.InvoiceType===n.meta.arg.InvoiceType)).sort(bn(Dn))}).addCase(Ks.rejected,t=>{t.invoiceLoading=!1}).addCase(Je.fulfilled,t=>{t.list.offset=0,t.list.limitReached=!1,t.list.invoices=[],t.loaded=!1,t.invoice=null,t.filters.shipToCode=null,t.filters.search=""}).addCase(G.pending,(t,n)=>{t.customerKey!==A(n.meta.arg)&&(t.list.offset=0,t.list.limitReached=!1,t.list.invoices=[],t.loaded=!1,t.invoice=null,t.filters.shipToCode=null,t.filters.search="")}).addCase(ee,(t,n)=>{n.payload?.loggedIn||(t.list.offset=0,t.list.limitReached=!1,t.list.invoices=[],t.invoice=null,t.filters.search="",t.filters.shipToCode=null,t.customerKey=null)}).addCase(Oe.pending,(t,n)=>{!n.meta.arg?.isRepAccount&&t.customerKey!==A(n?.meta?.arg)?t.customerKey=A(n?.meta?.arg):t.customerKey=null,t.list.offset=0,t.list.limitReached=!1,t.list.invoices=[],t.loaded=!1,t.invoice=null,t.filters.shipToCode=null,t.filters.search=""}).addCase(ul,(t,n)=>{t.filters.showPaidInvoices=n.payload??!t.filters.showPaidInvoices}).addCase(ml,(t,n)=>{t.filters.shipToCode=n.payload}).addCase(Bc,(t,n)=>{t.filters.shipToCode=n.payload}).addCase(pl,(t,n)=>{t.filters.search=n.payload}).addCase(hl,(t,n)=>{t.sort=n.payload})}),Cn={open:"open",past:"past",master:"master"},Ga={1:"Wholesale 100 Pc",2:"Wholesale 200 Pc",5:"Wholesale 500 Pc",A:"Distributor 5000 Pc",B:"Distributor 10000 Pc",C:"Distributor 20000 Pc",N:"Safety DNS",S:"Safety DSS",M:"Safety DSM",L:"Safety DSL",G:"Safety GOV",X:"International 5000",Y:"International 10000",Z:"International 20000"},Va=e=>{if(!im(e))return null;switch(e.OrderType){case"S":return Cn.open;case"M":return Cn.master}switch(e.OrderStatus){case"C":return Cn.past;case"O":case"H":case"N":return Cn.open}return null};L("salesOrder/load",async(e,{getState:t})=>{const n=t(),r=se(n),o=Ee(r);return await Tc({customerKey:o,salesOrderNo:e})},{condition:(e,{getState:t})=>{const n=t(),r=se(n);return!!e&&!!r&&Lm(n)==="idle"&&!Ar(n)}});W("orders/filters/setShipToCode");W("orders/filters/setCustomerPONo");W("orders/setSort");W("orders/setPage");W("orders/setRowsPerPage");const qr=L("salesOrder/sendEmail",async e=>await Ac(e),{condition:(e,{getState:t})=>{const n=t();return H(n)&&!!e&&km(n)==="idle"&&!!fa(n)}}),dh=W("orders/sendEmail/confirmed");W("salesOrder/detail/update");const gl=()=>({customerKey:A(T.getItem(Mt,null)),salesOrderNo:"",header:null,detail:[],invoices:[],payment:[],orderType:"past",readOnly:!0,processing:"idle",sendEmail:{status:"idle",response:null,error:null},attempts:0,loading:!1,loaded:!1}),uh=pe(gl(),e=>{e.addCase(ee,(t,n)=>{n.payload?.loggedIn||(t.salesOrderNo="",t.header=null,t.detail=[],t.invoices=[],t.payment=[],t.orderType="past",t.attempts=0,t.loaded=!1,t.customerKey=null,t.sendEmail={error:null,status:"idle",response:null})}).addCase(Oe.pending,(t,n)=>{!n.meta.arg?.isRepAccount&&A(n.meta.arg)!==A(t.header)&&(t.header=null,t.salesOrderNo="",t.detail=[],t.invoices=[],t.payment=[],t.orderType="past",t.attempts=0,t.loaded=!1)}).addCase(qr.pending,t=>{t.sendEmail.status="pending",t.sendEmail.response=null,t.sendEmail.error=null}).addCase(qr.fulfilled,(t,n)=>{t.sendEmail.response=n.payload,t.sendEmail.status="fulfilled"}).addCase(qr.rejected,(t,n)=>{t.sendEmail.status="idle",t.sendEmail.response=null,t.sendEmail.error=n?.error?.message??null}).addCase(dh,t=>{t.sendEmail.status="idle",t.sendEmail.response=null,t.sendEmail.error=null}).addCase(It.fulfilled,(t,n)=>{const[r]=n.payload.filter(o=>o.SalesOrderNo===t.salesOrderNo);t.header=r??null,t.orderType=Va(r),t.readOnly=!0,r||(t.detail=[],t.invoices=[],t.payment=[])}).addCase(st.pending,t=>{t.processing="pending"}).addCase(st.fulfilled,(t,n)=>{if(t.processing="idle",n.payload&&Ec(n.payload)){const{invoices:r,detail:o,payment:a,b2bUsers:i,...c}=n.payload;t.header=c,t.detail=[...o].sort(Nc),t.invoices=r??[],t.payment=a??[],t.orderType=Va(n.payload),t.readOnly=!0}else t.header=null,t.orderType=null,t.readOnly=!0,t.detail=[],t.invoices=[],t.payment=[]}).addCase(st.rejected,t=>{t.processing="idle"}).addMatcher(sn(Je.fulfilled,G.pending),(t,n)=>{const r=A(n.meta.arg);t.customerKey!==r&&(t.customerKey=r,t.salesOrderNo="",t.header=null,t.detail=[],t.invoices=[],t.payment=[],t.orderType="past",t.attempts=0,t.loaded=!1)})}),Po=()=>{const e=oe.getToken();let t=0;e&&(t=qt(e)?.exp??0);const n=oe.loggedIn(),r=n?oe.getProfile()??null:null,o=T.getItem(Tt,null),a=r?.chums?.user?.accounts??[];n&&T.getItem(Mt,bu(a)??null),n&&T.getItem(at,a.length===1?a[0]:null);const i=n?T.getItem(Rt,null):null;return{token:e??null,tokenExpires:t,profile:r?.chums?.user??null,userType:Co(r?.chums?.user??null),picture:o??r?.imageUrl??null,roles:r?.chums?.user?.roles??[],loggedIn:n,authType:i??"",actionStatus:"idle"}},mh=pe(Po(),e=>{e.addCase(An.pending,t=>{t.actionStatus="logging-in"}).addCase(An.fulfilled,t=>{t.actionStatus="idle"}).addCase(An.rejected,t=>{t.actionStatus="idle"}).addCase(Nn.pending,t=>{t.actionStatus="logging-in"}).addCase(Nn.fulfilled,t=>{t.actionStatus="idle"}).addCase(Nn.rejected,t=>{t.actionStatus="idle"}).addCase(ee,(t,n)=>{if(!t.loggedIn&&n.payload?.loggedIn){const r=Po();t.tokenExpires=r.tokenExpires,t.profile=r.profile,t.picture=r.picture,t.roles=r.roles,t.authType=r.authType}t.loggedIn=n.payload.loggedIn,t.token=n.payload.token??null,t.tokenExpires=n.payload.expires??0,n.payload?.loggedIn||(t.token=null,t.tokenExpires=0,t.profile=null,t.userType=null,t.roles=[],t.authType="",t.picture=null)}).addCase(ot.pending,t=>{t.actionStatus="pending"}).addCase(ot.fulfilled,(t,n)=>{t.actionStatus="idle",t.profile=n.payload.user??null,t.userType=Co(t.profile),t.roles=(n.payload.roles??[]).sort()}).addCase(ot.rejected,t=>{t.actionStatus="idle"}).addCase($t.pending,t=>{t.actionStatus="pending"}).addCase($t.fulfilled,(t,n)=>{t.actionStatus="idle",t.token=n.payload.token??null,t.roles=(n.payload.roles??[]).sort(),t.loggedIn=!!(n.payload.user?.id??0),t.picture=n.payload.picture??null,t.tokenExpires=n.payload.expires??0}).addCase($t.rejected,t=>{t.actionStatus="idle"}).addCase(Hs.pending,t=>{t.actionStatus="resetting-password"}).addCase(Hs.fulfilled,t=>{t.actionStatus="idle"}).addCase(Hs.rejected,t=>{t.actionStatus="idle"}).addCase(Bs.pending,t=>{t.actionStatus="saving-profile"}).addCase(Bs.fulfilled,(t,n)=>{t.actionStatus="idle",t.profile=n.payload.user??null,t.userType=Co(t.profile),t.roles=(n.payload.roles??[]).sort()}).addCase(Bs.rejected,t=>{t.actionStatus="idle"}).addCase(On.pending,t=>{t.actionStatus="setting-password"}).addCase(On.fulfilled,(t,n)=>{t.actionStatus="idle",n.payload?.success}).addCase(On.rejected,t=>{t.actionStatus="idle"}).addCase(En.pending,t=>{t.actionStatus="setting-password"}).addCase(En.fulfilled,(t,n)=>{t.actionStatus="idle",n.payload.success&&(t.loggedIn=!1)}).addCase(En.rejected,t=>{t.actionStatus="idle"}).addCase(_s.pending,t=>{t.actionStatus="logging-out"}).addCase(_s.fulfilled,t=>{t.actionStatus="idle"}).addCase(_s.rejected,t=>{t.actionStatus="idle"}).addMatcher(t=>xm(t)&&Ys(t)&&!!t.error,(t,n)=>{Ys(n)&&console.log("userReducer",n?.error)}).addMatcher(Cm,t=>{t.loggedIn=!1,t.token=null,t.tokenExpires=0})}),yt=(e,t)=>e.alertId-t.alertId,ph={index:0,list:[]},hh=pe(ph,e=>{e.addCase(up,(t,n)=>{t.index+=1;const[r]=t.list.filter(o=>o.context===(n.payload.context??"N/A"));if(r)r.count=(r.count??0)+1,t.list=[...t.list.filter(o=>o.alertId!==r.alertId),r].sort(yt);else{const o={...n.payload,severity:n.payload.severity??"warning",alertId:t.index,count:1};t.list=[...t.list,o].sort(yt)}}).addCase(Rc,(t,n)=>{t.list=t.list.filter(r=>r.alertId!==n.payload).sort(yt)}).addCase(es,(t,n)=>{t.list=t.list.filter(r=>r.context!==n.payload).sort(yt)}).addCase(ee,(t,n)=>{n.payload?.loggedIn||(t.list=[])}).addMatcher(Ys,(t,n)=>{t.index+=1;const r=n.type.replace("/rejected",""),[o]=t.list.filter(a=>a.context===(r??"N/A"));if(o)t.list=[...t.list.filter(a=>a.alertId!==o.alertId),{...o,count:(o.count??0)+1}].sort(yt);else if(Ys(n)){const a={severity:"warning",message:n.error.message?.replace("","")??"",context:r,alertId:t.index,count:1};t.list=[...t.list,a].sort(yt)}}).addMatcher(t=>bi(t),(t,n)=>{const r=n.type.replace("/fulfilled","");t.list=t.list.filter(o=>o.context!==r).sort(yt)})}),fh={nonce:null},gh=pe(fh,()=>{}),De=be({selectId:e=>e.id,sortComparer:(e,t)=>e.id-t.id}),jn=De.getSelectors(),xh={customerKey:null,status:"idle",search:"",sort:{field:"id",ascending:!0}},sr=de({name:"cartHeaders",initialState:De.getInitialState(xh),reducers:{setCartSearch:(e,t)=>{e.search=t.payload},setCartsSort:(e,t)=>{e.sort=t.payload}},extraReducers:e=>{e.addCase(Se.fulfilled,(t,n)=>{n.payload&&De.setOne(t,n.payload.header)}).addCase(Me.fulfilled,(t,n)=>{if(!n.payload){De.removeOne(t,n.meta.arg.cartId);return}De.setOne(t,n.payload.header)}).addCase(we.pending,(t,n)=>{t.customerKey!==n.meta.arg&&(t.customerKey=n.meta.arg,De.removeAll(t))}).addCase(we.fulfilled,(t,n)=>{De.setAll(t,n.payload.map(r=>r.header))}).addCase(G.pending,(t,n)=>{t.customerKey!==A(n.meta.arg)&&(t.customerKey=A(n.meta.arg),De.removeAll(t))}).addCase(At.fulfilled,(t,n)=>{n.payload&&De.setOne(t,n.payload.header)}).addCase(Ge.fulfilled,(t,n)=>{n.payload&&De.setOne(t,n.payload.header)}).addCase(Vt.fulfilled,(t,n)=>{n.payload&&De.removeOne(t,n.meta.arg.id)}).addCase(Nt.fulfilled,(t,n)=>{n.payload&&De.setOne(t,n.payload.header)})},selectors:{selectAll:e=>jn.selectAll(e),selectCartHeaderById:(e,t)=>jn.selectById(e,t)??null,selectCartHeaders:e=>jn.selectAll(e),selectCartsSearch:e=>e.search,selectCartsSort:e=>e.sort,selectCartsLength:e=>jn.selectTotal(e)}}),{setCartSearch:Ch,setCartsSort:jh}=sr.actions,{selectCartsSearch:xl,selectCartsSort:Cl,selectCartHeaderById:ss,selectCartHeaders:Pa,selectCartsLength:yh}=sr.selectors,Sh=R([ss],e=>e?.subTotalAmt??null),vh=R([Pa,xl,Cl],(e,t,n)=>e.filter(r=>!t.trim()||r.id.toString().includes(t.trim())||(r.salesOrderNo??"").toLowerCase().includes(t.trim().toLowerCase())||(r.customerPONo??"").toLowerCase().includes(t.trim().toLowerCase())).sort(hp(n))),ae=be({selectId:e=>e.id,sortComparer:(e,t)=>e.id-t.id}),Ts=ae.getSelectors();function As(e,t){return e.map(n=>({id:n.id,cartId:n.cartHeaderId,status:t}))}const To=de({name:"cartsDetailStatus",initialState:ae.getInitialState(),reducers:{},extraReducers:e=>{e.addCase(Se.pending,(t,n)=>{ae.setOne(t,{id:0,cartId:n.meta.arg.cartId??0,status:"saving"})}).addCase(Se.fulfilled,(t,n)=>{if(ae.removeOne(t,0),n.payload){const r=Ts.selectAll(t).filter(o=>o.cartId===n.payload?.header.id).map(o=>o.id);ae.removeMany(t,r),ae.setMany(t,As(n.payload.detail,"idle"))}}).addCase(Se.rejected,t=>{ae.removeOne(t,0)}).addCase(Me.fulfilled,(t,n)=>{if(n.payload){const r=Ts.selectAll(t).filter(o=>o.cartId===n.payload?.header.id).map(o=>o.id);ae.removeMany(t,r),ae.setMany(t,As(n.payload.detail,"idle"))}}).addCase(we.fulfilled,(t,n)=>{ae.removeAll(t);const r=[];n.payload.forEach(o=>{r.push(...As(o.detail,"idle"))}),ae.setMany(t,r)}).addCase(At.fulfilled,(t,n)=>{if(n.payload){const r=Ts.selectAll(t).filter(o=>o.cartId===n.payload?.header.id).map(o=>o.id);ae.removeMany(t,r),ae.setMany(t,As(n.payload.detail,"idle"))}}).addCase(Ge.pending,(t,n)=>{ae.setOne(t,{id:n.meta.arg.cartItemId,cartId:n.meta.arg.cartId,status:"saving"})}).addCase(Ge.fulfilled,(t,n)=>{ae.setOne(t,{id:n.meta.arg.cartItemId,cartId:n.meta.arg.cartId,status:"idle"})}).addCase(Ge.rejected,(t,n)=>{ae.setOne(t,{id:n.meta.arg.cartItemId,cartId:n.meta.arg.cartId,status:"idle"})}).addCase(Vt.fulfilled,(t,n)=>{const r=Ts.selectAll(t).filter(o=>o.cartId===n.meta.arg.id).map(o=>o.id);ae.removeMany(t,r)}).addCase(Nt.fulfilled,(t,n)=>{ae.removeOne(t,0),n.payload&&ae.addMany(t,As(n.payload.detail,"idle"))})},selectors:{selectCartItemStatusById:(e,t)=>Ts.selectById(e,t)?.status??"idle"}}),{selectCartItemStatusById:wh}=To.selectors,St=be({selectId:e=>e.key,sortComparer:(e,t)=>e.key.localeCompare(t.key)}),bh=St.getSelectors(),nr=de({name:"cartMessages",initialState:St.getInitialState(),reducers:{clearCartMessage:(e,t)=>{St.removeOne(e,t.payload)},clearCartMessages:e=>{St.removeAll(e)}},extraReducers:e=>{e.addCase(Se.fulfilled,(t,n)=>{const r=n.meta.arg.item;St.addOne(t,{message:`Added to cart: ${r.itemCode}, ${r.quantityOrdered} ${r.unitOfMeasure}`.trim(),key:n.meta.requestId})}).addCase(Se.rejected,(t,n)=>{const r=n.meta.arg.item;St.addOne(t,{message:`[${r.itemCode}] Add to cart failed: ${n.error.message}`.trim(),key:n.meta.requestId})}).addCase(At.fulfilled,(t,n)=>{St.addOne(t,{message:`Cart ${n.meta.arg.cartId} saved`,key:n.meta.requestId})}).addCase(Ge.fulfilled,(t,n)=>{St.addOne(t,{message:`Cart ${n.meta.arg.cartId} updated`,key:n.meta.requestId})})},selectors:{selectCartMessages:e=>bh.selectAll(e)}}),{selectCartMessages:Ih}=nr.selectors,{clearCartMessages:Ph,clearCartMessage:pS}=nr.actions,Th=e=>e.category.status==="loading",Ah=e=>e.category.status,Nh=e=>e.category.category;async function Ao(e){try{if(!e)return null;const t=`/api/products/v2/category/${encodeURIComponent(e)}.json`;return(await k(t,{cache:"no-cache"}))?.categories?.[0]??null}catch(t){return t instanceof Error?(console.debug(Ao.name,t.message),Promise.reject(t)):(console.debug(Ao.name,t),Promise.reject(new Error("Error in fetchCategory()")))}}const Ln=L("category/load",async e=>await Ao(e),{condition:(e,{getState:t})=>{const n=t();return!!e&&Ah(n)==="idle"}}),Eh={keyword:null,category:null,status:"idle"},Oh=pe(Eh,e=>{e.addCase(Ln.pending,(t,n)=>{t.status="loading",n.meta.arg!==t.keyword&&(t.keyword=n.meta.arg??null,t.category=null)}).addCase(Ln.fulfilled,(t,n)=>{t.status="idle",t.keyword=n.payload?.keyword??null,t.category=n.payload??null}).addCase(Ln.rejected,t=>{t.status="rejected"})});async function Dh(){try{return await k("/api/cookie-consent.json",{cache:"no-cache"})??null}catch(e){return e instanceof Error?(console.debug("getCookieConsent()",e.message),Promise.reject(e)):(console.debug("getCookieConsent()",e),Promise.reject(new Error("Error in getCookieConsent()")))}}async function Lh(e){try{const t="/api/cookie-consent.json",n=JSON.stringify(e);return await k(t,{method:"POST",body:n})}catch(t){return t instanceof Error?(console.debug("putCookieConsent()",t.message),Promise.reject(t)):(console.debug("putCookieConsent()",t),Promise.reject(new Error("Error in putCookieConsent()")))}}async function kh(){try{return await k("/api/cookie-consent/info.json")??null}catch(e){return e instanceof Error?(console.debug("getCookieConsentInfo()",e.message),Promise.reject(e)):(console.debug("getCookieConsentInfo()",e),Promise.reject(new Error("Error in getCookieConsentInfo()")))}}const Zr=L("cookie-consent/load",async()=>await Dh(),{condition:(e,{getState:t})=>{const n=t();return Mr(n)==="idle"}}),$s=L("cookie-consent/save",async e=>await Lh(e),{condition:(e,{getState:t})=>{const n=t();return Mr(n)==="idle"}}),kn=L("cookie-consent/load-info",async()=>await kh(),{condition:(e,{getState:t})=>{const n=t();return Mr(n)==="idle"}}),Rh={status:"idle",record:null,dismissed:!1,details:null},rr=de({name:"cookieConsent",initialState:Rh,reducers:{dismissCookieConsent:e=>{e.dismissed=!0}},extraReducers:e=>{e.addCase(Zr.pending,t=>{t.status="loading"}).addCase(Zr.fulfilled,(t,n)=>{t.status="idle",t.record=n.payload}).addCase(Zr.rejected,t=>{t.status="idle"}).addCase($s.pending,t=>{t.status="loading"}).addCase($s.fulfilled,(t,n)=>{t.status="idle",t.record=n.payload}).addCase($s.rejected,t=>{t.status="idle"}).addCase(kn.pending,t=>{t.status="loading"}).addCase(kn.fulfilled,(t,n)=>{t.details=n.payload,t.status="idle"}).addCase(kn.rejected,t=>{t.status="idle"})},selectors:{selectHasCookieConsent:e=>!!e.record?.ack,selectHasGPCFlag:e=>!!e.record?.gpc,selectCookieConsentStatus:e=>e.status,selectCookieConsentRecord:e=>e.record,selectAllowsPreferences:e=>e.record?.preferences?.preferences??!1,selectAllowsAnalytics:e=>e.record?.preferences?.analytics??!1,selectAllowsMarketing:e=>e.record?.preferences?.marketing??!1,selectCookieConsentDismissed:e=>e.dismissed,selectCookieConsentDetails:e=>e.details}}),{selectHasCookieConsent:Mh,selectHasGPCFlag:Uh,selectCookieConsentStatus:Mr,selectCookieConsentRecord:jl,selectAllowsPreferences:hS,selectAllowsMarketing:Fh,selectAllowsAnalytics:fS,selectCookieConsentDismissed:_h,selectCookieConsentDetails:Hh}=rr.selectors,{dismissCookieConsent:Bh}=rr.actions,Ya=()=>({company:"chums",key:null,account:null,contacts:[],loadStatus:"idle",loading:!1,loaded:!1,saving:!1,returnToPath:null}),Kh=pe(Ya(),e=>{e.addCase(Je.fulfilled,(t,n)=>{t.company=ec("chums"),t.account&&(t.account.ARDivisionNo!==n.payload.customer.ARDivisionNo||t.account.CustomerNo!==n.payload.customer.CustomerNo||(t.account.ShipToCode??"")!==(n.payload.customer.ShipToCode??""))&&(t.contacts=[]),t.account={...Lu,...n.payload.customer}}).addCase(ee,(t,n)=>{if(!n.payload?.loggedIn){const r=Ya();t.key=r.key,t.account=r.account,t.contacts=r.contacts,t.loaded=!1}}).addCase(nt.pending,t=>{t.loading=!0}).addCase(nt.fulfilled,(t,n)=>{t.loadStatus="idle",t.loading=!1,t.account=n.payload?.customer??null,t.contacts=n.payload?.contacts??[],t.loaded=!0}).addCase(nt.rejected,t=>{t.loading=!1,t.loadStatus="idle"}).addCase(rt.pending,t=>{t.loading=!0,t.loadStatus="pending"}).addCase(rt.fulfilled,(t,n)=>{t.loading=!1,t.loadStatus="idle",t.account=n.payload?.customer??null,t.contacts=n.payload?.contacts??[],t.loaded=!0}).addCase(rt.rejected,t=>{t.loading=!1}).addCase(Tn.pending,t=>{t.loading=!0}).addCase(Tn.fulfilled,t=>{t.loading=!1}).addCase(Tn.rejected,t=>{t.loading=!1}).addCase(G.pending,(t,n)=>{t.loadStatus="pending",t.key!==A(n.meta.arg)&&(t.account=null,t.contacts=[],t.loaded=!1),t.key=A(n.meta.arg),t.loading=!0}).addCase(G.fulfilled,(t,n)=>{t.loadStatus="idle",t.loading=!1,t.account=n.payload?.customer??null,t.contacts=n.payload?.contacts??[],t.loaded=!0}).addCase(G.rejected,t=>{t.loadStatus="rejected",t.loading=!1}).addCase(es,(t,n)=>{n.payload===G.typePrefix&&(t.loadStatus="idle")}).addCase(Oe.pending,(t,n)=>{!n.meta.arg?.isRepAccount&&A(t.account)!==A(n.meta.arg)&&(t.account=null,t.contacts=[],t.loaded=!0)}).addCase(dn,(t,n)=>{t.returnToPath=n.payload}).addCase(Te.fulfilled,(t,n)=>{if(t.account){const[r]=n.payload.filter(o=>A(o)===A(t.account));r||(t.account=null,t.contacts=[],t.loaded=!0)}})});async function $h(e){try{if(!e||!e.trim())return[];const t=`/api/search/items/${encodeURIComponent(e)}`;return(await k(t))?.items??[]}catch(t){return t instanceof Error?(console.debug("fetchItemLookup()",t.message),Promise.reject(t)):(console.debug("fetchItemLookup()",t),Promise.reject(new Error("Error in fetchItemLookup()")))}}const zh={search:"",items:[],loadStatus:"idle"},Wh=e=>e.itemLookup.items,Gh=e=>e.itemLookup.loadStatus,Vh=e=>e.itemLookup.loadStatus==="pending",Yh=e=>e.itemLookup.loadStatus==="fulfilled";W("itemLookup/search");const Rn=L("itemLookup/load",async e=>await $h(e),{condition:(e,{getState:t})=>{const n=t();return!!e.trim()&&Gh(n)!=="pending"}}),qh=pe(zh,e=>{e.addCase(Rn.pending,(t,n)=>{t.loadStatus="pending",t.search=n.meta.arg}).addCase(Rn.fulfilled,(t,n)=>{t.loadStatus="fulfilled",t.items=n.payload.filter(r=>!r.ItemCode.endsWith("IMP"))}).addCase(Rn.rejected,t=>{t.loadStatus="idle",t.items=[]})}),Zh=(e,t)=>e.keyword.toLowerCase()>t.keyword.toLowerCase()?1:-1;async function Jh(){try{return(await k("/api/keywords.json",{cache:"no-cache"}))?.result??[]}catch(e){return e instanceof Error?(console.debug("fetchKeywords()",e.message),Promise.reject(e)):(console.debug("fetchKeywords()",e),Promise.reject(new Error("Error in fetchKeywords()")))}}const yl=e=>e.keywords.loading,Ur=e=>e.keywords.list;R([Ur,()=>"products"],(e,t)=>e.filter(n=>n.pagetype===t));R([Ur,()=>"category"],(e,t)=>e.filter(n=>n.pagetype===t));R([Ur,()=>"page"],(e,t)=>e.filter(n=>n.pagetype===t));const Mn=L("keywords/load",async()=>await Jh(),{condition:(e,{getState:t})=>{const n=t();return!yl(n)}}),Xh={list:[],loading:!1,loaded:!1},Qh=pe(Xh,e=>{e.addCase(Mn.pending,t=>{t.loading=!0}).addCase(Mn.fulfilled,(t,n)=>{t.loading=!1,t.loaded=!0,t.list=[...n.payload].sort(Zh)}).addCase(Mn.rejected,t=>{t.loading=!1})});async function Sl(e){try{if(!e)return null;const t="/api/menus/active/:id.json".replace(":id",encodeURIComponent(e));return(await k(t,{cache:"no-cache"}))?.menu??null}catch(t){return t instanceof Error?(console.debug("loadMenu()",t.message),Promise.reject(t)):(console.debug("loadMenu()",t),Promise.reject(new Error("Error in loadMenu()")))}}const vl={title:"",url:"",id:0,description:"",className:"",parentId:0,priority:0,status:!0};function ef(e){const t=vc(e);return[{id:"account",title:"Billing address",url:$("/account/:customerSlug",{customerSlug:t})},{id:"delivery",title:"Delivery Addresses",url:$("/account/:customerSlug/delivery",{customerSlug:t})},{id:"carts",title:"Carts",url:$("/account/:customerSlug/carts",{customerSlug:t})},{id:"orders",title:"Open Orders",url:$("/account/:customerSlug/orders",{customerSlug:t})},{id:"invoices",title:"Invoices",url:$("/account/:customerSlug/invoices",{customerSlug:t})}]}const tf={productMenu:null,productMenuStatus:"idle",resourcesMenu:null,resourcesMenuStatus:"idle",isOpen:!1},Un=L("menus/productMenu",async()=>Sl(2),{condition:(e,{getState:t})=>{const n=t();return!wl(n)}}),Fn=L("menus/loadResourcesMenu",async()=>await Sl(122),{condition:(e,{getState:t})=>{const n=t();return!bl(n)}}),sf=e=>e.menu.productMenu,nf=e=>e.menu.resourcesMenu,wl=e=>e.menu.productMenuStatus!=="idle",bl=e=>e.menu.resourcesMenuStatus!=="loading",rf=e=>!!e.menu.productMenu,of=e=>!!e.menu.resourcesMenu,af=e=>e.menu.isOpen;R([el],e=>e.map(t=>({...vl,title:`${t.CustomerName} (${t.ARDivisionNo}-${t.CustomerNo})`,url:ds(t)})));R([wa],e=>e.map(t=>({...vl,title:`${t.SalespersonName} (${t.SalespersonDivisionNo}-${t.SalespersonNo})`,url:ds(t)})));const cf=R([wl,rf],(e,t)=>!e&&!t),lf=R([bl,of],(e,t)=>!e&&!t),Ta=W("menu/toggleDrawer"),df=pe(tf,e=>{e.addCase(Ta,(t,n)=>{t.isOpen=n.payload??!t.isOpen}).addCase(Un.pending,t=>{t.productMenuStatus="loading"}).addCase(Un.fulfilled,(t,n)=>{t.productMenuStatus="idle",t.productMenu=n.payload}).addCase(Un.rejected,t=>{t.productMenuStatus="rejected"}).addCase(Fn.pending,t=>{t.resourcesMenuStatus="loading"}).addCase(Fn.fulfilled,(t,n)=>{t.resourcesMenuStatus="idle",t.resourcesMenu=n.payload}).addCase(Fn.rejected,t=>{t.resourcesMenuStatus="rejected"})}),uf=async()=>{try{return(await k("/api/messages.json",{cache:"no-cache"}))?.messages??[]}catch(e){return e instanceof Error?(console.debug("fetchMessages()",e.message),Promise.reject(e)):(console.debug("fetchMessages()",e),Promise.reject(new Error("Error in fetchMessages()")))}},mf=e=>e.messages.list,pf=e=>e.messages.loading,hf=e=>e.messages.loaded,zs=L("messages/load",async()=>({list:await uf(),loaded:new Date().valueOf()}),{condition:(e,{getState:t})=>{const n=t();return!pf(n)}}),ff={list:[],loading:!1,loaded:0},gf=pe(ff,e=>{e.addCase(zs.pending,t=>{t.loading=!0}).addCase(zs.rejected,t=>{t.loading=!0}).addCase(zs.fulfilled,(t,n)=>{t.list=n.payload.list,t.loaded=n.payload.loaded,t.loading=!1})}),xf=()=>({customerKey:null,list:{},loading:"idle",loaded:!1,sort:{field:"SalesOrderNo",ascending:!0},cartsFilter:"",openFilter:"",actionStatus:{},sendEmail:{status:"idle",response:null,error:null}}),Cf=pe(xf(),e=>{e.addCase(G.pending,(t,n)=>{const r=A(n.meta.arg);t.customerKey!==r&&(t.customerKey=r,t.list={},t.loaded=!1,t.openFilter="",t.cartsFilter="")}).addCase(Je.pending,(t,n)=>{const r=A(n.meta.arg);t.customerKey!==r&&(t.list={},t.loaded=!1,t.customerKey=r,t.openFilter="",t.cartsFilter="")}).addCase(It.pending,t=>{t.loading="pending"}).addCase(It.fulfilled,(t,n)=>{t.loading="idle",t.loaded=!0,t.list={},n.payload.map(r=>{t.actionStatus[r.SalesOrderNo]||(t.actionStatus[r.SalesOrderNo]="idle"),t.list[r.SalesOrderNo]=r})}).addCase(It.rejected,t=>{t.loading="rejected"}).addCase(ee,(t,n)=>{n.payload?.loggedIn||(t.list={},t.loaded=!1,t.customerKey=null,t.actionStatus={})}).addCase(Oe.pending,(t,n)=>{!n.meta.arg?.isRepAccount&&t.customerKey!==A(n.meta.arg)&&(t.list={},t.loaded=!1,t.customerKey=A(n.meta.arg))}).addCase(st.pending,(t,n)=>{t.actionStatus[n.meta.arg]="pending"}).addCase(st.fulfilled,(t,n)=>{if(t.actionStatus[n.meta.arg]="idle",n.payload&&!Om(n.payload)){const r=n.payload.SalesOrderNo,o={};n.payload.detail.forEach(a=>{o[a.LineKey]=a}),t.list[r]={...n.payload,detail:o}}}).addCase(st.rejected,(t,n)=>{t.actionStatus[n.meta.arg]="rejected"}).addCase(Gm,(t,n)=>{t.cartsFilter=n.payload}).addCase(Lc,(t,n)=>{t.openFilter=n.payload}).addCase(Dc,(t,n)=>{t.sort=n.payload}).addCase(Vm,(t,n)=>{const{SalesOrderNo:r,LineKey:o,...a}=n.payload,i=t.list[r];i&&Tr(i)&&i.detail[o]&&(i.detail[o]={...i.detail[o],...a,changed:!0})}).addCase(Gr.pending,t=>{t.sendEmail.status="pending",t.sendEmail.response=null,t.sendEmail.error=null}).addCase(Gr.fulfilled,(t,n)=>{t.sendEmail.response=n.payload,t.sendEmail.status="fulfilled"}).addCase(Gr.rejected,(t,n)=>{t.sendEmail.status="idle",t.sendEmail.response=null,t.sendEmail.error=n?.error?.message??null}).addCase(kc,t=>{t.sendEmail.status="idle",t.sendEmail.response=null,t.sendEmail.error=null}).addCase(es,(t,n)=>{switch(n.payload){case It.typePrefix:t.loading="idle";return}})});async function jf(e){try{const t=`/api/pages/${encodeURIComponent(e)}.json`;return(await k(t,{cache:"no-cache"}))?.page??null}catch(t){return t instanceof Error?(console.debug("fetchPage()",t.message),Promise.reject(t)):(console.debug("fetchPage()",t),Promise.reject(new Error("Error in fetchPage()")))}}const Il=e=>e.page.status,yf=e=>e.page.loaded,Pl=e=>e.page.content,Sf=e=>e.page.html,hs=L("page/load",async e=>await jf(e),{condition:(e,{getState:t})=>{const n=t();return!!e&&Il(n)==="idle"}}),vf={list:[],keyword:null,status:"idle",loaded:!1,content:null,html:null},wf=pe(vf,e=>{e.addCase(hs.pending,(t,n)=>{t.status="loading",t.loaded=!1,n.meta.arg!==t.keyword&&(t.content=null),t.keyword=n.meta.arg??null}).addCase(hs.fulfilled,(t,n)=>{t.status="idle",t.loaded=!0,t.content=n.payload,t.html=n.payload?.content??null}).addCase(hs.rejected,t=>{t.status="idle"})}),un=e=>e.products.product,Aa=e=>e.products.loading,ht=e=>e.products.selectedProduct,Tl=e=>e.products.colorCode,bf=e=>e.products.msrp,If=e=>e.products.salesUM,Pf=e=>e.products.variantId,He=e=>e.products.cartItem,Al=e=>e.products.customerKey,Tf=e=>e.products.image,Af=R([un],e=>Yn(e)?e:null),Nf=R([un],e=>[...e?.images??[]].sort((t,n)=>t.id-n.id));R([He],e=>e?.season?.active??e?.seasonAvailable??!1);R([ht,He],(e,t)=>(Kt(e)?e.season_code:null)??(Et(t)?t.seasonCode:null)??null);R([ht,He],(e,t)=>(Kt(e)?e?.season_available:null)??(Et(t)?t.seasonAvailable:null)??null);R([ht,He],(e,t)=>(Kt(e)?e?.season_description:null)??(Et(t)?t.seasonDescription:null)??null);R([ht,He],(e,t)=>(Kt(e)?e.season_teaser:null)??(Et(t)?t.seasonTeaser:null)??null);async function Ef(e){try{const t="/api/products/v2/keyword/:keyword.json".replace(":keyword",encodeURIComponent(e)),n=await k(t,{cache:"no-cache"}),[r]=n?.products??[];return r??null}catch(t){return t instanceof Error?(console.debug("fetchProduct()",t.message),Promise.reject(t)):(console.debug("fetchProduct()",t),Promise.reject(new Error("Error in fetchProduct()")))}}const Ke=be({selectId:e=>$r(e),sortComparer:(e,t)=>$r(e).localeCompare($r(t))}),qa=Ke.getSelectors(),Of={customerKey:null},No=de({name:"customerPricing",initialState:Ke.getInitialState(Of),reducers:{},extraReducers:e=>{e.addCase(Je.fulfilled,(t,n)=>{const r=A(n.payload.customer);t.customerKey!==r&&Ke.removeAll(t),t.customerKey=r}).addCase(ee,(t,n)=>{n.payload.loggedIn||(Ke.removeAll(t),t.customerKey=null)}).addCase(nt.fulfilled,(t,n)=>{Ke.setAll(t,n.payload?.pricing??[])}).addCase(rt.fulfilled,(t,n)=>{Ke.setAll(t,n.payload?.pricing??[])}).addCase(G.pending,(t,n)=>{const r=A(n.meta.arg);t.customerKey!==r&&(t.customerKey=r,Ke.removeAll(t))}).addCase(G.fulfilled,(t,n)=>{t.customerKey=A(n.payload?.customer??null),Ke.setAll(t,n.payload?.pricing??[])}).addCase(Oe.pending,(t,n)=>{!n.meta.arg?.isRepAccount&&A(n.meta.arg)!==t.customerKey&&Ke.removeAll(t)}).addCase(Te.fulfilled,(t,n)=>{t.customerKey&&(n.payload.find(o=>A(o)===t.customerKey)||Ke.removeAll(t))})},selectors:{selectCustomerPricing:e=>qa.selectAll(e),selectCustomerPricingById:(e,t)=>qa.selectById(e,t)}}),{selectCustomerPricing:Fr,selectCustomerPricingById:gS}=No.selectors,_n=L("products/current/load",async(e,{getState:t})=>{const n=await Ef(e),r=t(),o=H(r),a=Fr(r),i=Hu(n)?Bu(n):null,c=wr(i?.product??n),l=o?br(i?.product??n,a):[...c],m=aa(i?.product??n),p=ia(i?.product??n,{colorCode:i?.product?.defaultColor||n?.defaultColor});return p&&l.length&&(p.price=l[0]),{product:n,variant:i,msrp:c,customerPrice:l,salesUM:m,cartItem:p}},{condition:(e,{getState:t})=>{const n=t();return!Aa(n)}}),Nl=L("products/setColorCode",(e,{getState:t})=>{const n=t(),r=He(n),o=ht(n),a=Al(n),i=Fr(n),c=q(n);if(Ot(o)){const l=r?.quantity??1,m=r?.salesUM;let p=ia(o,{colorCode:e});return p&&p?.salesUM===m&&(p.quantity=l),a&&(p=ca(p,i),p&&(p.priceLevel=c?.PriceLevel??"")),p&&!p.image&&(p.image=Xs(o.image,p?.colorCode??o.defaultColor)),p}else if(r&&vs(o)){const[l]=o.mix.items.filter(p=>p.color?.code===e),m={...r};return m.priceLevel=c?.PriceLevel??"",m.colorName=l?.color?.name??l?.color?.code??"",m.colorCode=l?.color?.code??l.color_code??"",m.image=Xs(l.additionalData?.image_filename??o.image,m?.colorCode??o.defaultColor),m}return null}),or=L("products/setVariant",(e,{getState:t})=>{const n=t(),r=H(n),o=Al(n),a=Fr(n),i=q(n),c=wr(e.product),l=r?br(e.product,a):[...c],m=aa(e.product),p=Tl(n);let f=ia(e.product??null,{itemCode:e.preferredItem,colorCode:p});return o&&(f=ca(f,a),f&&(f.priceLevel=i?.PriceLevel??"")),{variant:e,msrp:c,customerPrice:l,salesUM:m,cartItem:f}}),Df=W("product/cartItem/setQuantity"),Lf={keyword:null,product:null,selectedProduct:null,selectedItemCode:null,image:null,colorCode:"",variantId:null,loading:!1,msrp:[],customerPrice:[],salesUM:null,cartItem:null,pricing:[],customerKey:null},kf=pe(Lf,e=>{e.addCase(ee,(t,n)=>{n.payload?.loggedIn||(t.customerKey=null,t.pricing=[],t.customerPrice=[])}).addCase(G.pending,t=>{t.pricing=[]}).addCase(G.fulfilled,(t,n)=>{t.customerKey=A(n.payload?.customer??null),t.pricing=[...n.payload?.pricing??[]].sort(Nu),t.msrp=wr(t.selectedProduct),t.customerPrice=t.customerKey?br(t.selectedProduct,t.pricing):t.msrp,Et(t.cartItem)&&(t.cartItem.priceLevel=n.payload?.customer.PriceLevel??"",t.cartItem=ca(t.cartItem,t.pricing))}).addCase(_n.pending,(t,n)=>{t.loading=!0,n.meta.arg!==t.keyword&&(t.keyword=n.meta.arg,t.product=null,t.image=null)}).addCase(_n.fulfilled,(t,n)=>{t.loading=!1,t.product=n.payload?.product??null,t.selectedProduct=n.payload?.variant?.product??n.payload?.product??null,t.variantId=n.payload?.variant?.id??null,t.msrp=n.payload?.msrp??[],t.salesUM=n.payload?.salesUM??null,t.customerPrice=n.payload?.customerPrice??[],t.cartItem=n.payload?.cartItem??null,t.colorCode=n.payload?.cartItem?.colorCode??n.payload?.variant?.product?.defaultColor??n.payload?.product?.defaultColor??"",t.image={filename:Wr(t.cartItem?.image??t.selectedProduct?.image??null,t.colorCode),itemCode:xn(t)},t.image.filename=Wr(t.cartItem?.image??t.selectedProduct?.image??null,t.colorCode),t.image.itemCode=xn(t)}).addCase(_n.rejected,t=>{t.loading=!1}).addCase(Nl.fulfilled,(t,n)=>{t.colorCode=n.meta.arg,t.cartItem=n.payload,t.image={filename:Wr(t.cartItem?.image??t.selectedProduct?.image??null,t.colorCode),itemCode:xn(t)}}).addCase(Df,(t,n)=>{t.cartItem&&(t.cartItem.quantity=n.payload)}).addCase(or.fulfilled,(t,n)=>{t.selectedProduct=n.payload.variant?.product??null,t.colorCode=n.payload?.cartItem?.colorCode??n.payload?.variant?.product?.defaultColor??"",t.variantId=n.payload.variant?.id??null,t.msrp=n.payload.msrp,t.salesUM=n.payload.salesUM,t.customerPrice=n.payload.customerPrice,t.cartItem=n.payload.cartItem,t.image={filename:n.payload.cartItem?.image??null,itemCode:xn(t)}})});async function Rf(){try{return(await k("/api/sales/b2b/promo/?valid=1",{cache:"no-cache"}))?.promo_codes??[]}catch(e){return e instanceof Error?(console.debug("loadPromoCodes()",e.message),Promise.reject(e)):(console.debug("loadPromoCodes()",e),Promise.reject(new Error("Error in loadPromoCodes()")))}}async function Mf(e){try{const t="/api/sales/b2b/promo/:code?valid=1".replace(":code",encodeURIComponent(e)),n=await k(t,{cache:"no-cache"}),[r]=n?.promo_codes??[];return r??null}catch(t){return t instanceof Error?(console.debug("fetchPromoCode()",t.message),Promise.reject(t)):(console.debug("fetchPromoCode()",t),Promise.reject(new Error("Error in fetchPromoCode()")))}}const El=e=>e.promo_code.loading,Jr=L("promoCodes/load",async()=>await Rf(),{condition:(e,{getState:t})=>{const n=t();return!El(n)}});W("promoCodes/setCurrent");const Za=L("promoCodes/current/load",async e=>{const t=await Mf(e);return t||Promise.reject(new Error(`Sorry! '${e}' is not a valid promo code.`))},{condition:(e,{getState:t})=>{const n=t();return!El(n)}}),Ja=(e,t)=>e.id-t.id,Uf={current:null,list:[],loading:!1},Ff=pe(Uf,e=>{e.addCase(Jr.pending,t=>{t.loading=!0}).addCase(Jr.fulfilled,(t,n)=>{t.loading=!1,t.list=n.payload.sort(Ja);const[r]=n.payload.filter(o=>!o.require_code_entry);t.current||(t.current=r??null)}).addCase(Jr.rejected,t=>{t.loading=!1}).addCase(Za.pending,t=>{t.loading=!0}).addCase(Za.fulfilled,(t,n)=>{t.current=n.payload;const r=t.list.filter(o=>o.promo_code!==n.meta.arg);n.payload&&r.push(n.payload),t.list=r.sort(Ja)}).addCase(ee,(t,n)=>{n.payload?.loggedIn||(t.list=[],t.current=null)})});async function _f(e){try{const t=new URLSearchParams;t.set("term",e);const n=`/api/search.json?${t.toString()}`;return await k(n)??[]}catch(t){return t instanceof Error?(console.debug("fetchSearchResults()",t.message),Promise.reject(t)):(console.debug("fetchSearchResults()",t),Promise.reject(new Error("Error in fetchSearchResults()")))}}const Hf=()=>({term:"",results:[],loading:!1,show:!1}),Bf=e=>e.search.results,Kf=e=>e.search.loading,$f=W("search/setTerm"),zf=W("search/show"),Hn=L("search/load",async e=>(Yu(e),await _f(e)),{condition:(e,{getState:t})=>{const n=t();return e.trim().length>2&&!Kf(n)}}),Wf=pe(Hf,e=>{e.addCase($f,(t,n)=>{t.term=n.payload}).addCase(zf,(t,n)=>{t.show=n.payload??!t.show}).addCase(Hn.pending,t=>{t.loading=!0}).addCase(Hn.fulfilled,(t,n)=>{t.loading=!1,t.results=n.payload,t.show=t.results.length>0}).addCase(Hn.rejected,t=>{t.loading=!1})}),Gf=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,Vf=e=>Gf.test(e),Bn=L("signUp/signUpUser",async e=>await Mp(e),{condition:(e,{getState:t})=>{const n=t();return Vf(e.email)&&e.agreeToPolicy&&_r(n)==="idle"}}),Kn=L("signUp/loadSignUpProfile",async e=>await Rp(e),{condition:(e,{getState:t})=>{const n=t();return _r(n)==="idle"}}),Yf={profile:null,error:null,status:"idle"},Eo=de({name:"signUp",initialState:Yf,reducers:{},extraReducers:e=>{e.addCase(Bn.pending,t=>{t.status="saving"}).addCase(Bn.fulfilled,(t,n)=>{t.status=n.payload?.success?"success":"rejected",t.error=n.payload?.message??"An unexpected error occurred"}).addCase(Bn.rejected,(t,n)=>{t.status="rejected",t.error=n.error.message??null}).addCase(ee,t=>{t.profile=null}).addCase(Kn.pending,t=>{t.status="loading"}).addCase(Kn.fulfilled,(t,n)=>{Qt(n.payload)||(t.profile=n.payload),t.status="idle"}).addCase(Kn.rejected,t=>{t.profile=null,t.status="idle"})},selectors:{selectSignUpProfile:e=>e.profile,selectSignUpStatus:e=>e.status,selectSignUpError:e=>e.error}}),{selectSignUpProfile:qf,selectSignUpStatus:_r,selectSignUpError:Zf}=Eo.selectors,Jf=e=>e.versionNo!==void 0;async function Xf(){try{const e=await k("/version",{cache:"no-cache"});return(Jf(e?.version)?e.version.versionNo:e?.version)??null}catch(e){return e instanceof Error?(console.debug("fetchVersion()",e.message),Promise.reject(e)):(console.debug("fetchVersion()",e),Promise.reject(new Error("Error in fetchVersion()")))}}const $n=L("version/load",async()=>{const e=await Xf();xc.setItem(na,e);const t=new Date().valueOf();return{versionNo:e,lastChecked:t}},{condition:(e,{getState:t})=>{const n=t();return e===!0||!Qf(n)&&rg(n)}}),Ol=W("version/ignore"),Dl=900*1e3,Na=e=>e.version.versionNo,Qf=e=>e.version.loading,eg=e=>e.version.changed,tg=e=>e.version.lastChecked,sg=e=>e.version.ignored,ng=R([Na,eg,sg],(e,t,n)=>t&&!!e&&e!==n),rg=R([Na,tg],(e,t)=>!e||!t?!0:t+Dl<new Date().valueOf()),og={versionNo:null,loading:!1,changed:!1,ignored:null,lastChecked:0},ag=pe(og,e=>{e.addCase($n.pending,t=>{t.loading=!0}).addCase($n.fulfilled,(t,n)=>{t.loading=!1,t.changed=!!t.versionNo&&n.payload.versionNo!==t.versionNo,t.versionNo=n.payload.versionNo,t.lastChecked=n.payload.lastChecked}).addCase($n.rejected,t=>{t.loading=!1}).addCase(Ol,t=>{t.ignored=t.versionNo})}),Ie=be({selectId:e=>e.id,sortComparer:(e,t)=>e.id-t.id}),ig=Ie.getSelectors(),cg={customerKey:null,status:"idle",sort:{field:"name",ascending:!0}},ar=de({name:"customerUsers",initialState:Ie.getInitialState(cg),reducers:{setCustomerUsersSort:(e,t)=>{e.sort=t.payload}},extraReducers:e=>{e.addCase(Fs.pending,(t,n)=>{t.status="loading"}).addCase(Fs.fulfilled,(t,n)=>{t.status="idle",Ie.setAll(t,n.payload)}).addCase(Ms.pending,t=>{t.status="saving"}).addCase(Ms.fulfilled,(t,n)=>{t.status="idle",Ie.setAll(t,n.payload)}).addCase(Us.pending,t=>{t.status="deleting"}).addCase(Us.fulfilled,(t,n)=>{t.status="idle",Ie.setAll(t,n.payload)}).addCase(Je.fulfilled,(t,n)=>{const r=A(n.payload.customer);t.customerKey!==r&&Ie.removeAll(t),t.customerKey=r}).addCase(ee,(t,n)=>{n.payload.loggedIn||Ie.removeAll(t)}).addCase(nt.fulfilled,(t,n)=>{Ie.setAll(t,n.payload?.users??[])}).addCase(rt.fulfilled,(t,n)=>{Ie.setAll(t,n.payload?.users??[])}).addCase(G.pending,(t,n)=>{t.customerKey!==A(n.meta.arg)&&Ie.removeAll(t)}).addCase(G.fulfilled,(t,n)=>{Ie.setAll(t,n.payload?.users??[])}).addCase(Oe.pending,(t,n)=>{!n.meta.arg?.isRepAccount&&A(n.meta.arg)!==t.customerKey&&Ie.removeAll(t)}).addCase(Te.fulfilled,(t,n)=>{t.customerKey&&(n.payload.find(o=>A(o)===t.customerKey)||Ie.removeAll(t))}).addMatcher(sn(Fs.rejected,Us.rejected,Ms.rejected),t=>{t.status="rejected"}).addMatcher(mg,t=>{t.status="idle"})},selectors:{selectCustomerUsers:e=>ig.selectAll(e),selectCustomerUsersSort:e=>e.sort,selectCustomerUsersStatus:e=>e.status}}),{setCustomerUsersSort:lg}=ar.actions,{selectCustomerUsers:Ea,selectCustomerUsersStatus:dg,selectCustomerUsersSort:Ll}=ar.selectors,ug=R([Ea,kr,ts,Ll],(e,t,n,r)=>e.filter(o=>t||n.filter(a=>o.shipToCode?.includes(a.ShipToCode)).length>0).sort(Eu(r)));function mg(e){return typeof e.payload=="string"?[Ms.typePrefix,Us.typePrefix,Fs.typePrefix].includes(e.payload):!1}const $e=be({selectId:e=>e.CreditCardGUID,sortComparer:(e,t)=>e.CreditCardGUID.localeCompare(t.CreditCardGUID)}),pg=$e.getSelectors(),hg={customerKey:null},Oo=de({name:"customerPaymentCards",initialState:$e.getInitialState(hg),reducers:{},extraReducers:e=>{e.addCase(Je.fulfilled,(t,n)=>{const r=A(n.payload.customer);t.customerKey!==r&&(t.customerKey=r,$e.removeAll(t))}).addCase(ee,(t,n)=>{n.payload.loggedIn||(t.customerKey=null,$e.removeAll(t))}).addCase(nt.fulfilled,(t,n)=>{$e.setAll(t,n.payload?.paymentCards??[])}).addCase(rt.fulfilled,(t,n)=>{$e.setAll(t,n.payload?.paymentCards??[])}).addCase(G.pending,(t,n)=>{const r=A(n.meta.arg);t.customerKey!==r&&(t.customerKey=r,$e.removeAll(t))}).addCase(G.fulfilled,(t,n)=>{t.customerKey=A(n.payload?.customer??null),$e.setAll(t,n.payload?.paymentCards??[])}).addCase(Oe.pending,(t,n)=>{!n.meta.arg?.isRepAccount&&A(n.meta.arg)!==t.customerKey&&$e.removeAll(t)}).addCase(Te.fulfilled,(t,n)=>{t.customerKey&&(n.payload.find(o=>A(o)===t.customerKey)||$e.removeAll(t))})},selectors:{selectCustomerPaymentCards:e=>pg.selectAll(e)}}),{selectCustomerPaymentCards:fg}=Oo.selectors,gg=R([fg],e=>{const t=F().format("YYYY-MM");return e.filter(n=>`${n.ExpirationDateYear}-${n.ExpirationDateMonth}`>=t)});async function xg(){try{return(await k("/api/features/banners/active.json"))?.banners??[]}catch(e){return e instanceof Error?(console.debug("fetchBanners()",e.message),Promise.reject(e)):(console.debug("fetchBanners()",e),Promise.reject(new Error("Error in fetchBanners()")))}}const Ws=L("banners/load",async()=>({list:await xg(),updated:new Date().valueOf()}),{condition:(e,{getState:t})=>{const n=t();return wg(n)==="idle"}}),Cg=(e,t)=>(e.priority??e.id)-(t.priority??t.id),ir=be({selectId:e=>e.id,sortComparer:(e,t)=>e.id-t.id}),jg=ir.getSelectors(),kl={status:"idle",updated:0};function yg(e){return ir.getInitialState({...kl,updated:e.length>0?new Date().valueOf():0},e)}const Do=de({name:"banners",initialState:ir.getInitialState(kl),reducers:{},extraReducers:e=>{e.addCase(Ws.pending,t=>{t.status="loading"}).addCase(Ws.fulfilled,(t,n)=>{t.status="idle",ir.setAll(t,n.payload.list),t.updated=n.payload.updated}).addCase(Ws.rejected,t=>{t.status="rejected"})},selectors:{selectAll:e=>jg.selectAll(e),selectBannersLoaded:e=>e.updated>0,selectBannersStatus:e=>e.status,selectBannersUpdated:e=>e.updated}}),{selectAll:Sg,selectBannersLoaded:vg,selectBannersStatus:wg,selectBannersUpdated:bg}=Do.selectors,Ig=R([Sg],e=>[...e].sort(Cg)),zn=L("reps/load",async()=>await Lr(),{condition:(e,{getState:t})=>{const n=t();return H(n)&&(Pr(n)||ma(n))&&!Rl(n)}}),Ls=be({selectId:e=>Rs(e),sortComparer:(e,t)=>Rs(e).localeCompare(Rs(t))}),Pg=Ls.getSelectors(),Tg={status:"idle",loaded:!1},Lo=de({name:"reps",initialState:Ls.getInitialState(Tg),reducers:{},extraReducers:e=>{e.addCase(ee,(t,n)=>{n.payload?.loggedIn||(Ls.removeAll(t),t.loaded=!1)}).addCase(zn.pending,t=>{t.status="loading"}).addCase(zn.fulfilled,(t,n)=>{t.status="idle",t.loaded=!0,Ls.setAll(t,n.payload)}).addCase(zn.rejected,t=>{t.status="idle",t.loaded=!0,Ls.removeAll(t)})},selectors:{selectAll:e=>Pg.selectAll(e),selectRepsLoading:e=>e.status,selectRepsLoaded:e=>e.loaded}}),{selectAll:Ag,selectRepsLoading:Rl,selectRepsLoaded:Ng}=Lo.selectors,Eg=R([Ag],e=>[...e].sort(fm)),Og=Nd({alerts:hh,app:gh,[Do.reducerPath]:Do.reducer,[sr.reducerPath]:sr.reducer,[Jn.reducerPath]:Jn.reducer,[To.reducerPath]:To.reducer,[nr.reducerPath]:nr.reducer,[jo.reducerPath]:jo.reducer,[yo.reducerPath]:yo.reducer,category:Oh,[rr.reducerPath]:rr.reducer,customer:Kh,[Oo.reducerPath]:Oo.reducer,[vo.reducerPath]:vo.reducer,[No.reducerPath]:No.reducer,[tr.reducerPath]:tr.reducer,[ar.reducerPath]:ar.reducer,[er.reducerPath]:er.reducer,[Zn.reducerPath]:Zn.reducer,invoices:lh,itemLookup:qh,keywords:Qh,menu:df,messages:gf,openOrders:Cf,page:wf,products:kf,promo_code:Ff,[Lo.reducerPath]:Lo.reducer,salesOrder:uh,search:Wf,[Eo.reducerPath]:Eo.reducer,user:mh,[Io.reducerPath]:Io.reducer,version:ag}),Dg=Ed({reducer:Og,middleware:e=>e({serializableCheck:!1,immutableCheck:!1}),preloadedState:Lg()}),I=()=>Cd(),d=jd;function Lg(){return{...typeof globalThis.window>"u"?{}:window.__PRELOADED_STATE__??{},banners:yg([]),activeCart:Mc(),customerList:$p(),invoices:fl(),salesOrder:gl(),user:Po()}}const Wn=js.forwardRef(function(t,n){const[r,o]=u.useState(!1),{slotProps:a,...i}=t,c=()=>o(p=>!p),l=p=>{p.preventDefault()},m=()=>s.jsx(ye,{position:"end",children:s.jsx(le,{"aria-label":"toggle password visibility",onClick:c,onMouseDown:l,edge:"end",children:r?s.jsx(Od,{}):s.jsx(Dd,{})})});return s.jsx(E,{slotProps:{...a,input:{...a?.input,ref:n,type:r?"text":"password",endAdornment:m()}},...i})}),kg=()=>{const e=I(),t=d(Ir),[n,r]=u.useState(!1),[o,a]=u.useState(""),[i,c]=u.useState(""),[l,m]=u.useState(null),p=async f=>{if(f.preventDefault(),n){await e(Hs(o)),r(!1);return}const g=await e(An({email:o,password:i}));Qt(g.payload)&&(m(g.payload.error??null),c(""))};return s.jsx(b,{component:"form",onSubmit:p,children:s.jsxs(v,{direction:"column",children:[!!l&&s.jsx(_,{severity:"warning",sx:{my:3},children:l}),t&&s.jsx(z,{variant:"indeterminate",title:"Processing Login Request"}),s.jsx(j,{component:"h3",children:"Login with your credentials"}),s.jsxs(b,{sx:{display:"flex",alignItems:"center",mb:1},children:[s.jsx(Ko,{sx:{color:"action.active",mr:1}}),s.jsx(E,{type:"email",fullWidth:!0,variant:"filled",label:"Email",onChange:f=>a(f.target.value),value:o,autoComplete:"username",slotProps:{htmlInput:{maxLength:255},inputLabel:{shrink:!0}},required:!0})]}),s.jsxs(b,{sx:{display:"flex",alignItems:"center",mb:1},children:[s.jsx(Ld,{sx:{color:"action.active",mr:1}}),s.jsx(Wn,{variant:"filled",fullWidth:!0,label:"Password",onChange:f=>c(f.target.value),value:i,autoComplete:"current-password",slotProps:{htmlInput:{maxLength:128},inputLabel:{shrink:!0}},required:!0})]}),s.jsxs(v,{direction:"row",spacing:2,useFlexGap:!0,justifyContent:"flex-end",children:[s.jsx(N,{type:"button",variant:"text",component:Q,to:"/reset-password",children:"Forgot Password"}),s.jsx(N,{type:"submit",variant:"contained",children:"Sign In"})]})]})})},Ml=e=>e.app.nonce,Ul=()=>{const e=I(),t=d(Ml),n=r=>{r.credential&&e($t(r.credential))};return s.jsx(yd,{onSuccess:n,use_fedcm_for_prompt:!0,nonce:t??void 0})};Ul.displayName="GoogleSignInButton";const re=({documentTitle:e})=>{const[t,n]=u.useState(e??"Chums B2B Dealer Website");return u.useEffect(()=>{n(e??"Chums B2B Dealer Website")},[e]),s.jsxs(s.Fragment,{children:[s.jsx("title",{children:[t,"Chums B2B"].join(" | ")}),s.jsx("meta",{property:"og:title",content:[t,"Chums B2B"].join(" | ")})]})},Fl=()=>s.jsxs(_,{severity:"error",title:"WARNING:",sx:{my:3,p:5},children:[s.jsx(j,{sx:{fontWeight:"bold",marginRight:1,mb:1},children:"WARNING"}),s.jsx(tt,{}),s.jsx(j,{children:"Unauthorized access to this system is forbidden and will be prosecuted by law. By accessing this system, you agree that your actions may be monitored if unauthorized usage is suspected."})]}),Xr=()=>{const e=d(H),t=xe(),n=Ue(),[r,o]=u.useState(null);return u.useEffect(()=>{n.state?.message&&o(n.state.message)},[]),u.useEffect(()=>{e&&n.pathname==="/login"&&t(Cs,{replace:!0})},[e]),s.jsxs(qe,{maxWidth:"sm",children:[s.jsx(re,{documentTitle:bs.login}),s.jsx(j,{variant:"h1",component:"h1",sx:{my:3},children:"Chums B2B Portal"}),s.jsx(j,{variant:"body1",children:"Hey there friend! This site is for authorized Chums dealers only."}),!!r&&s.jsx(_,{severity:"info",sx:{my:3},onClose:()=>o(null),children:r}),s.jsxs(v,{direction:"column",sx:{mt:5},spacing:3,children:[s.jsx(j,{component:"h2",variant:"h3",children:"Login"}),s.jsxs(b,{children:[s.jsx(j,{component:"h3",children:"Login with Google"}),s.jsx(Ul,{})]}),s.jsx(tt,{}),s.jsx(kg,{})]}),s.jsx(Fl,{})]})},Xa=e=>e?.endsWith("@chums.com")?"/images/chums/Chums_Logo_Booby.png":null,Rg=()=>{const e=I(),t=d(wc),n=d(an),r=d(Sm),o=d(Ir),[a,i]=u.useState(n),[c,l]=u.useState(t??Xa(n?.email));u.useEffect(()=>{if(!n){i(null),l(null);return}const{name:x,email:S}=n;i({name:x,email:S}),l(t??Xa(S))},[n,t]);const m=x=>{x.preventDefault(),a&&e(Bs(a))},p=x=>S=>{a&&i({...a,[x]:S.target.value,changed:!0})},f=()=>{e(ot())},g=()=>{e(_s())},C=()=>{},y=()=>r===wo?s.jsx(ye,{position:"end",title:"Logged in with Google",sx:{cursor:"not-allowed"},children:s.jsx(kd,{})}):null;return s.jsxs(qe,{maxWidth:"xl",children:[s.jsx(j,{variant:"h1",component:"h1",sx:{mb:5},children:"Login Profile"}),s.jsxs(P,{container:!0,spacing:3,alignItems:"start",children:[s.jsx(P,{size:{xs:3,sm:2},sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:s.jsx(wn,{alt:a?.name,src:c??void 0,sx:{width:80,height:80},slotProps:{img:{referrerPolicy:"no-referrer"}},variant:"rounded"})}),s.jsx(P,{size:{xs:9,sm:10},children:s.jsxs("form",{onSubmit:m,children:[o&&s.jsx(z,{variant:"indeterminate",sx:{mb:1}}),s.jsxs(v,{spacing:2,direction:{xs:"column",lg:"row"},children:[s.jsx(E,{label:"Name",type:"text",fullWidth:!0,variant:"filled",size:"small",value:a?.name??"",onChange:p("name"),slotProps:{htmlInput:{maxLength:45}}}),s.jsx(E,{label:"Email Address",type:"email",fullWidth:!0,variant:"filled",size:"small",value:a?.email??"",onChange:p("email"),slotProps:{htmlInput:{readOnly:r!==Qs,maxLength:255},input:{endAdornment:y()}},helperText:r===wo?"Please contact CHUMS customer service if you need to change your email address":void 0})]}),s.jsxs(v,{direction:"row",spacing:2,sx:{mt:5},useFlexGap:!0,justifyContent:"flex-end",children:[s.jsx(N,{type:"button",variant:"text",onClick:g,color:"error",children:"Logout"}),s.jsx(N,{type:"button",variant:"text",onClick:f,children:"Refresh"}),s.jsx(N,{type:"button",variant:"text",disabled:r!==Qs,component:Q,to:"/profile/set-password",children:"Change Password"}),s.jsx(N,{type:"button",variant:"text",onClick:C,children:"Clear All Settings"}),s.jsx(N,{type:"submit",variant:"contained",disabled:!a?.changed,children:"Save Changes"})]}),a?.changed&&s.jsx(_,{severity:"warning",children:"Don't forget to save your changes."})]})})]})]})},Mg=[Rt,bt];function Ug(e){const t=I(),[n,r]=u.useState(Qa()),o=i=>{switch(T.removeItem(i),i){case yr:t(Zc(null));break;case et:t(ot());break;case Tt:t(Gp(null));break;case Jt:t(Qn(null));break;case jr:t(qc(null));break;case Ve:t(Xm());break;case at:t(Oe(null));break}a()},a=()=>{r(Qa())};return s.jsxs(b,{...e,children:[s.jsx(j,{variant:"h2",component:"h2",children:"Stored Settings"}),s.jsxs(ct,{children:[s.jsx(j,{component:"caption",variant:"body2",children:s.jsxs(_,{severity:"warning",children:[s.jsx("div",{children:"Occasionally a setting will be stuck or not cleared from a previous version. Removing those settings may help to restore normal function. These settings will be regenerated automatically as needed."}),s.jsx("div",{children:"For best results, refresh your browser after clearing a setting."})]})}),s.jsx(Zt,{children:s.jsxs(U,{children:[s.jsx(h,{children:"Action"}),s.jsx(h,{children:"Key"}),s.jsx(h,{children:"Value"})]})}),s.jsx(lt,{children:Object.keys(n).map(i=>s.jsxs(U,{children:[s.jsx(h,{children:s.jsx(N,{type:"button",variant:"outlined",size:"small",onClick:()=>o(i),disabled:Mg.includes(i),children:"X"})}),s.jsx(h,{children:i}),s.jsx(h,{sx:{whiteSpace:"wrap"},children:n[i]})]},i))})]})]})}function Qa(){const e=[Rt,Tt,Ne,Mt,Jt,jr,yr,Js,Sr,et,Ve,ho,bt,at,na],t={};function n(a){const{email:i,name:c,chums:l}=a,{id:m,last_login:p,logins:f}=l?.user??{};return JSON.stringify({email:i,name:c,id:m,last_login:p,logins:f},void 0,2)}function r(a){return JSON.stringify(a.map(i=>Cr(i)),void 0,2)}function o(a){const{id:i,isRepAccount:c,ARDivisionNo:l,CustomerNo:m,CustomerName:p,SalespersonDivisionNo:f,SalespersonNo:g,SalespersonName:C}=a;return JSON.stringify(c?{id:i,SalespersonDivisionNo:f,SalespersonNo:g,SalespersonName:C}:{id:i,ARDivisionNo:l,CustomerNo:m,CustomerName:p},void 0,2)}return e.forEach(a=>{const i=T.getItem(a,null);if(i)switch(a){case et:t[a]=n(i);break;case Ve:t[a]=r(i);break;case bt:t[a]=JSON.stringify({getTokenExpirationDate:ic(i),isTokenExpired:vr(i)},void 0,2);break;case at:t[a]=o(i);break;default:t[a]=JSON.stringify(i,void 0,2)}}),t}function Fg({access:e,active:t}){const n=$(da,{customerSlug:A(e)});return s.jsx(N,{variant:t?"contained":"outlined",component:Q,to:n,children:s.jsxs(v,{direction:"column",textAlign:"center",children:[s.jsx("div",{children:ke(e)}),s.jsx("div",{children:e.CustomerName})]})})}function _g(){const e=d(el),t=d(Ce);return e.length===0?null:s.jsxs(b,{sx:{mt:3},children:[s.jsx(j,{variant:"h2",component:"h2",children:"Customer Accounts"}),s.jsx(v,{spacing:2,direction:"row",useFlexGap:!0,flexWrap:"wrap",children:e.sort(tc).map(n=>s.jsx(Fg,{access:n,active:n.id===t?.id},n.id))})]})}function Hg({access:e,active:t}){const n=$(ua,{id:`${e.id}`});return s.jsx(N,{variant:t?"contained":"outlined",component:Q,to:n,children:s.jsxs(v,{direction:"column",textAlign:"center",children:[s.jsx("div",{children:cs({SalespersonDivisionNo:e.SalespersonDivisionNo,SalespersonNo:e.SalespersonNo})}),s.jsx("div",{children:e.SalespersonName})]})})}function Bg(){const e=d(wa),t=d(Ce);return e.length===0?null:s.jsxs(b,{sx:{mt:3},children:[s.jsx(j,{variant:"h2",component:"h2",children:"Rep Accounts"}),s.jsx(v,{spacing:2,direction:"row",useFlexGap:!0,flexWrap:"wrap",children:e.sort(tc).map(n=>s.jsx(Hg,{access:n,active:n.id===t?.id},n.id))})]})}const Kg=()=>{const e=I(),t=d(Xc),n=Ue();return u.useEffect(()=>{n.state?.returnTo&&e(dn(n.state.returnTo))},[]),s.jsxs(qe,{maxWidth:"lg",children:[s.jsx(re,{documentTitle:bs.profile}),s.jsx(Rg,{}),t==="loading"&&s.jsx(z,{variant:"indeterminate"}),s.jsx(_g,{}),s.jsx(Bg,{}),s.jsx(Ug,{sx:{mt:5}})]})},$g=({title:e,pathname:t,active:n=!1})=>n?s.jsx(j,{"aria-current":"page",children:e}):s.jsx(X,{component:Q,to:t,children:e}),_l=({paths:e})=>{const t=Ue();return s.jsx(Rd,{sx:{mb:2},"aria-label":"Breadcrumb",children:e.map((n,r)=>s.jsx($g,{...n,active:n.pathname===t.pathname},r))})},zg=()=>{const e=d(Yp),t=d(Ce),n=d(q),r=Ue();if(e<2)return null;const o=[{title:"Profile",pathname:Cs}];return t?.isRepAccount?o.push({title:qn(t),pathname:Cs},{title:"Account List",pathname:$(ua,{id:`${t?.id??0}`})}):n&&o.push({title:`${n.ARDivisionNo}-${n.CustomerNo}`,pathname:r.pathname}),s.jsx(_l,{paths:o})},Wg=[{value:"billing",label:"Billing address",to:""},{value:"delivery",label:"Delivery Addresses",to:"delivery"},{value:"users",label:"Users",to:"users"},{value:"carts",label:"Carts",to:"carts"},{value:"orders",label:"Open Orders",to:"orders"},{value:"invoices",label:"Invoices",to:"invoices"}];function Gg({value:e,label:t,to:n}){return s.jsx(Ud,{component:en,to:n,label:t,value:e})}const Vg=()=>{const[e,t]=u.useState("billing"),n=Dt("/account/:customerSlug/:tab/*");return u.useEffect(()=>{switch(n?.params.tab){case"closed":return t("invoices");default:t(n?.params.tab??"billing")}},[n?.params]),s.jsx(b,{sx:{width:"100%",mb:1},children:s.jsx(Md,{value:e,children:Wg.map(r=>s.jsx(Gg,{...r},r.value))})})},Yg=e=>e.startsWith("/products")?"Continue Shopping":`Return to ${e}`,qg=()=>{const e=I(),t=d(eh);if(!t)return null;const n=()=>{e(dn(null))};return s.jsx(_,{severity:"info",onClose:n,children:s.jsx(X,{component:Q,to:t,children:Yg(t)})})};function Zg({customer:e,shipTo:t,loading:n}){return s.jsxs(s.Fragment,{children:[s.jsxs(j,{variant:"h1",component:"h1",children:[e?.CustomerName,t&&t.ShipToCode!==e?.PrimaryShipToCode&&s.jsxs(s.Fragment,{children:[s.jsx(b,{component:"span",sx:{mx:1},children:"/"}),s.jsx(b,{component:"span",children:t.ShipToName})]})]}),s.jsxs(j,{variant:"h2",component:"h2",children:[mo(e)&&s.jsxs(b,{sx:{me:3},children:[ta(e),t&&t.ShipToCode!==e?.PrimaryShipToCode&&s.jsxs(b,{component:"span",children:["/",t.ShipToCode]})]}),!mo(e)&&!n&&s.jsx(b,{children:"Please select a customer"})]})]})}const Jg=()=>{const e=I(),t=xe(),n=d(q),r=d(Ce),o=Ye(),a=d(rl),i=d(sl);return u.useEffect(()=>()=>{e(dn(null))},[]),u.useEffect(()=>{n&&Xu(A(n))},[n]),u.useEffect(()=>{const c=Ss(o.customerSlug??"");if(!c||!A(c)){if(console.log("nextCustomer",c,A(c)),!r?.id){t("/profile");return}t($("/profile/:id",{id:`${r.id}`}));return}Ou(n,c)||a==="idle"&&e(G(c))},[o,n,a,r]),s.jsxs("div",{children:[s.jsx(re,{documentTitle:n?.CustomerName??""}),s.jsx(zg,{}),s.jsx(qg,{}),s.jsx(Zg,{customer:n,shipTo:i,loading:a!=="idle"}),s.jsx(Vg,{}),s.jsx(Bo,{})]})};function Hl({line:e}){const t={"table-warning":e.changed,"table-info":e.newLine};return s.jsxs(U,{className:Ae(t),children:[e.ItemType==="4"&&s.jsx(h,{className:"text-center",children:s.jsx(Ii,{})}),s.jsx(h,{colSpan:3,children:e.CommentText}),s.jsx(h,{colSpan:4,children:""}),e.ItemType==="4"&&s.jsx(h,{children:""})]})}const Xg="/api/images/products/find/80/:ItemCode",mn=({itemCode:e,itemCodeDesc:t,colorCode:n,image:r})=>{if(!e)return null;r&&r?.includes("?")&&n&&(r=oa({image:r,colorCode:n}));const o=r?`/images/products/80/${encodeURIComponent(r)}`:Xg.replace(":ItemCode",encodeURIComponent(e));return s.jsx("img",{src:o,alt:t??void 0,className:"img-thumbnail"})},Oa=({priceLevel:e=""})=>!e||!Ga[e]?null:s.jsxs(j,{component:"div",variant:"body2",children:[Ga[e]," Price"]}),cr=({onCopyToCart:e,copyToCartDisabled:t})=>{const n=[{icon:s.jsx(Ni,{}),name:"Add to Cart",disabled:!e||t,onClick:e}];return s.jsx(b,{sx:{position:"relative",height:"calc(0.5rem + 80px + 24px)"},children:s.jsx(Pi,{ariaLabel:"Cart Item Actions",icon:s.jsx(Ai,{}),direction:"left",sx:{position:"absolute",bottom:8,right:0},children:n.filter(r=>!r.disabled).map(r=>s.jsx(Ti,{icon:r.icon,slotProps:{tooltip:{title:r.name}},onClick:r.onClick},r.name))})})};class We{static CHUMS="000298";static raw(t){const n=/[0-9]/;return t.split("").filter(r=>n.test(r)).join("")}static format(t){if(t=We.raw(t),t.length===5&&(t=We.CHUMS+t),t.length!==11&&t.length!==12)return t;const[,n,r,o]=/(\d)(\d{5})(\d{5})(\d)/.exec(t)??[];return[n,r,o,We.checkdigit(t)].join(" ")}static checkdigit(t){if(t=We.raw(t.trim()).slice(0,11),t.length===5&&(t=We.CHUMS+t),t.length!==11)return console.log("UPCA.checkdigit() UPC is too short",t),t;const n={even:0,odd:0};return t.split("").map((r,o)=>{const a=parseInt(r,10);o%2===0?n.even+=a:n.odd+=a}),n.even*=3,(10-(n.odd+n.even)%10)%10}}const Da=({value:e})=>e?s.jsx(j,{variant:"bodyMono",children:We.format(e)}):null;function lr(e){return new w(1).sub(new w(e.LineDiscountPercent).div(100)).times(new w(e.UnitPrice).div(e.UnitOfMeasureConvFactor??1))}function dr(e){return new w(1).sub(new w(e.LineDiscountPercent).div(100)).times(e.UnitPrice)}function Qg({line:e,customerPriceLevel:t,onAddToCart:n}){const[r,o]=u.useState(lr(e)),[a,i]=u.useState(dr(e)),[c,l]=u.useState(new w(e.LineDiscountPercent));return u.useEffect(()=>{o(lr(e)),i(dr(e)),l(new w(e.LineDiscountPercent))},[e]),s.jsxs(s.Fragment,{children:[s.jsxs(U,{sx:{'& > *:not([rowspan="2"])':{borderBottom:e.CommentText?"unset":void 0},verticalAlign:"top"},children:[s.jsxs(h,{rowSpan:e.CommentText?2:1,component:"th",children:[s.jsx(j,{variant:"body1",sx:{fontWeight:700},component:"div",children:e.ItemCode}),e.ItemType==="1"&&s.jsx(mn,{itemCode:e.ItemCode,itemCodeDesc:e.ItemCodeDesc,image:e.image})]}),s.jsxs(h,{children:[s.jsx(j,{variant:"body1",children:e.ItemCodeDesc}),!!e.UDF_UPC&&s.jsx(Da,{value:e.UDF_UPC})]}),s.jsx(h,{children:e.UnitOfMeasure}),s.jsx(h,{align:"right",children:D(e.QuantityOrdered).format("0,0")}),s.jsxs(h,{align:"right",children:[s.jsx("div",{children:D(r).format("0,0.00")}),!c.eq(0)&&s.jsxs("div",{className:"sale",children:[D(c).format("0,0.0"),"% Off"]}),!!e.PriceLevel&&e.PriceLevel!==t&&s.jsx(Oa,{priceLevel:e.PriceLevel})]}),s.jsx(h,{align:"right",children:D(e.SuggestedRetailPrice).format("0,0.00")}),s.jsx(h,{align:"right",children:D(a).format("0,0.00")}),s.jsx(h,{align:"right",children:D(new w(e.QuantityOrdered).times(a)).format("0,0.00")}),s.jsx(h,{rowSpan:e.CommentText?2:1,children:s.jsx(cr,{onCopyToCart:n,copyToCartDisabled:!e.ProductType||e.ProductType==="D"||e.InactiveItem==="Y"||e.ItemType!=="1"})})]}),!!e.CommentText&&s.jsx(Hl,{line:e})]})}function ex({line:e,onAddToCart:t}){const[n,r]=u.useState(lr(e)),[o,a]=u.useState(dr(e));u.useEffect(()=>{r(lr(e)),a(dr(e))},[e]);const i={};return s.jsxs(U,{sx:{verticalAlign:"top"},className:Ae(i),children:[s.jsx(h,{children:s.jsxs(v,{direction:"row",children:[s.jsx("div",{children:s.jsx(Fd,{})}),s.jsxs("div",{children:[s.jsx("div",{children:e.ItemCode}),e.ItemType==="1"&&s.jsx(mn,{itemCode:e.ItemCode,itemCodeDesc:e.ItemCodeDesc,image:e.image})]})]})}),s.jsxs(h,{children:[s.jsx("p",{children:e.ItemCodeDesc}),!!e.UDF_UPC&&s.jsx("p",{children:We.format(e.UDF_UPC)})]}),s.jsx(h,{children:e.UnitOfMeasure}),s.jsx(h,{align:"right",children:D(e.QuantityOrdered).format("0,0")}),s.jsx(h,{align:"right",children:new w(n).eq(0)?null:D(n).format("0,0.00")}),s.jsx(h,{align:"right",sx:{display:{xs:"none",sm:"table-cell"}},children:D(e.SuggestedRetailPrice).format("0,0.00")}),s.jsx(h,{align:"right",sx:{display:{xs:"none",sm:"table-cell"}},children:new w(o).eq(0)?null:D(o).format("0,0.00")}),s.jsx(h,{align:"right",children:new w(o).eq(0)?null:D(new w(e.QuantityOrdered).times(o)).format("0,0.00")}),s.jsx(h,{align:"right",children:s.jsx(cr,{onCopyToCart:t})})]})}function tx({line:e,customerPriceLevel:t,onAddToCart:n}){const r=()=>{n&&n(e)},o=!!e.SalesKitLineKey&&e.SalesKitLineKey!==e.LineKey;return s.jsxs(s.Fragment,{children:[e.ItemType!=="4"&&!o&&s.jsx(Qg,{line:e,customerPriceLevel:t,onAddToCart:r}),e.ProductType==="K"&&e.ExplodedKitItem==="Y"&&s.jsxs(U,{sx:{verticalAlign:"top"},children:[s.jsx(h,{children:""}),s.jsx(h,{colSpan:4,children:"Contains:"}),s.jsx(h,{colSpan:2,sx:{display:{xs:"none",sm:"table-cell"}},children:""}),s.jsx(h,{colSpan:2,children:""})]}),e.ItemType!=="4"&&o&&s.jsx(ex,{line:e,onAddToCart:r}),e.ItemType==="4"&&e.ItemCode==="/C"&&s.jsx(Hl,{line:e})]})}const ei=/^(RCP|COL|FREE|THRD)[ ~-]+([\w ]*)[ ~-]+(SWR|HOLD|RUSH)/,ti=e=>{if(ei.test(e?.Comment??"")){const t=ei.exec(e?.Comment??"")??[];return{isCharged:!1,freightMethod:t[1]?.trim()??"",freightAmt:"0.00",freightAcct:t[2]?.trim()??"",status:t[3]?.trim()??""}}return{isCharged:!0,freightAmt:new w(e?.FreightAmt??0).gt(0)?D(e?.FreightAmt).format("0,0.00"):"TBD"}};function sx({salesOrderNo:e}){const t=d(i=>Er(i,e??"")),[n,r]=js.useState(ti(t));if(u.useEffect(()=>{r(ti(t))},[t]),!t)return null;const a=new w(t.NonTaxableAmt).add(t.TaxableAmt).add(t.FreightAmt??0).add(t.SalesTaxAmt??0).sub(t.DepositAmt??0).sub(t.DiscountAmt??0);return s.jsxs($o,{children:[s.jsxs(U,{children:[s.jsx(h,{component:"th",scope:"row",colSpan:5,align:"right",children:"Sub Total"}),s.jsx(h,{colSpan:2,children:" "}),s.jsx(h,{align:"right",children:D(new w(t.NonTaxableAmt).add(t.TaxableAmt)).format("$ 0,0.00")}),s.jsx(h,{children:" "})]}),s.jsxs(U,{children:[s.jsxs(h,{component:"th",scope:"row",colSpan:5,align:"right",children:["Sales Tax ",new w(t.SalesTaxAmt).eq(0)?"":t.TaxSchedule]}),s.jsx(h,{colSpan:2,children:" "}),s.jsx(h,{align:"right",children:D(t.SalesTaxAmt||0).format("$ 0,0.00")}),s.jsx(h,{children:" "})]}),s.jsxs(U,{children:[s.jsx(h,{colSpan:5,align:"right",children:"Freight"}),s.jsx(h,{colSpan:2,children:!!n.freightAcct&&s.jsxs("span",{children:[n.freightMethod," - ",n.freightAcct]})}),s.jsx(h,{align:"right",children:n.freightAmt==="TBD"||new w(n.freightAmt).isNaN()?"TBD":D(n.freightAmt).format("$ 0,0.00")}),s.jsx(h,{children:" "})]}),!new w(t.DiscountAmt??0).eq(0)&&s.jsxs(U,{children:[s.jsx(h,{colSpan:5,align:"right",children:"Discount"}),s.jsx(h,{colSpan:2,children:" "}),s.jsx(h,{align:"right",children:D(t.DiscountAmt).format("$ 0,0.00")}),s.jsx(h,{children:" "})]}),!new w(t.DepositAmt??0).eq(0)&&s.jsxs(U,{children:[s.jsx(h,{colSpan:5,align:"right",children:"Deposit"}),s.jsx(h,{colSpan:2,children:" "}),s.jsx(h,{align:"right",children:D(t.DepositAmt).format("$ 0,0.00")}),s.jsx(h,{children:" "})]}),s.jsxs(U,{children:[s.jsx(h,{colSpan:5,align:"right",children:"Total"}),s.jsx(h,{colSpan:2,children:" "}),s.jsx(h,{align:"right",children:n.freightAmt==="TBD"||new w(n.freightAmt).isNaN()?"TBD":D(a.toString()).format("$ 0,0.00")}),s.jsx(h,{children:" "})]})]})}const is="__ALL";function Is({value:e,label:t,disabledShipToLocations:n,allowAllLocations:r,onChange:o,readOnly:a,required:i,...c}){const l=d(q),m=d(ts),p=d(kr),f=d(Ut),g=u.useId(),C=S=>{if(!l)return o(S.target.value,null);const O=S.target.value??l?.PrimaryShipToCode??"";if(r&&O===is)return o(null,null);const[M]=m.filter(ce=>ce.ShipToCode===O);if(!M&&f?.billTo)return o(O,Iu(l));const{ShipToName:V,ShipToAddress1:Qe,ShipToAddress2:Y,ShipToAddress3:Z,ShipToCity:fe,ShipToState:ft,ShipToCountryCode:Be,ShipToZipCode:Fe}=M;o(O,{ShipToName:V,ShipToAddress1:Qe,ShipToAddress2:Y,ShipToAddress3:Z,ShipToCity:fe,ShipToState:ft,ShipToCountryCode:Be,ShipToZipCode:Fe})};if(!m.length)return null;const y=S=>{if(S===""&&f?.billTo)return"Billing address";if(S===is)return"All Locations";const[O]=m.filter(M=>M.ShipToCode===S);return O?`[${O?.ShipToCode}]  ${O?.ShipToName}, ${O?.ShipToCity} ${O?.ShipToState}`:""},x=e===""||r&&e===is||!!m.filter(S=>S.ShipToCode===e).length;return s.jsxs(dt,{fullWidth:!0,variant:"filled",size:"small",...c,children:[s.jsx(Lt,{id:g,shrink:!0,children:t??"Ship-To Location"}),s.jsxs(nn,{onChange:C,variant:c.variant??"filled",id:g,value:x?e??(r?is:""):"",displayEmpty:!0,renderValue:y,readOnly:a,required:i,children:[r&&s.jsx(ie,{value:is,children:"All Addresses"}),p&&s.jsx(ie,{value:"",children:"Billing Address"}),m.filter(S=>S.ShipToCode!==""||f?.billTo).map(S=>s.jsx(ie,{value:S.ShipToCode,disabled:n?.includes(S.ShipToCode),children:s.jsxs(v,{direction:"row",spacing:2,sx:{width:"100%"},children:[s.jsx(Wt,{label:S.ShipToCode,size:"small",sx:{flex:"0 0 20%"}}),s.jsxs(b,{sx:{width:"80%"},children:[s.jsx(j,{variant:"body1",sx:{whiteSpace:"wrap"},children:S.ShipToName}),s.jsxs(j,{variant:"body1",sx:{fontSize:"80%"},children:[S.ShipToCity,", ",S.ShipToState]})]})]},S.ShipToCode)},S.ShipToCode))]})]})}const nx=({value:e,onChange:t,...n})=>{const r=u.useId(),o=a=>{t(a.target.value)};return s.jsx(E,{id:r,label:"Cart Name",value:e,onChange:o,slotProps:{htmlInput:{maxLength:30}},size:"small",variant:"filled",...n})};function Bl({disabled:e,children:t,...n}){return s.jsx(N,{color:"primary",variant:"contained",type:"submit",size:"small",fullWidth:!0,disabled:e,endIcon:s.jsx(zo,{}),...n,children:t??"Add to Cart"})}function rx({cartId:e=0,onChange:t,excludeCartId:n,required:r,ref:o}){const a=u.useId(),i=d(Pa),c=m=>{T.setItem(Ne,+m.target.value),t(+m.target.value)};if(!i.length)return null;const l=`${e??0}`;return s.jsxs(dt,{fullWidth:!0,size:"small",variant:"filled",children:[s.jsx(Lt,{id:a,children:"Cart"}),s.jsxs(nn,{labelId:a,value:l,label:"Cart",onChange:c,required:r,ref:o,children:[s.jsx(ie,{value:0,children:"New Cart"}),i.map(m=>s.jsx(ie,{value:m.id,disabled:m.id===n,children:s.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",width:"100%"},children:[s.jsx("div",{children:m.customerPONo}),m.shipToCode&&s.jsxs("div",{children:["[",m.shipToCode,"] ",m.shipToName]}),!m.shipToCode&&s.jsx("div",{children:m.shipToName})]})},m.id))]})]})}const ox=te(Wo)`
    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }
`,Kl=({quantity:e,unitOfMeasure:t="EA",onChange:n,min:r=0,disabled:o,required:a})=>{const i=hr(),c=u.useId(),l=()=>{n(e+1)},m=()=>{n(Math.max(r,e-1))},p=f=>{const g=+f.target.value;if(isNaN(g))return;const C=Math.max(g,0);n(C)};return s.jsxs(dt,{fullWidth:!0,children:[s.jsx(Lt,{htmlFor:c,sx:{...ks},children:"Quantity"}),s.jsx(ox,{value:e??"",size:"small",onChange:p,type:"number",inputProps:{inputMode:"numeric",pattern:"[0-9]*",readOnly:o,min:1,maxLength:4,sx:{textAlign:"center",minWidth:"4rem",flex:"1 0 4rem"},id:c,autoCorrect:"off",autoComplete:"off"},required:a,"aria-label":"Quantity to add to cart",startAdornment:s.jsx(ye,{position:"start",children:s.jsx(le,{onClick:m,size:"small",edge:"start","aria-label":"decrease by one",disabled:o||+e===r,children:s.jsx(Oi,{})})}),endAdornment:s.jsxs(ye,{position:"end",children:[s.jsx(le,{onClick:l,size:"small",edge:"end","aria-label":"increase by 1",disabled:o,children:s.jsx(Ei,{})}),s.jsx(b,{sx:{ml:1},color:i.palette.chumsGrey.dark,children:t??"EA"})]})})]})};function pn(e){return e.filter(t=>!(t.lineStatus==="U"&&t.quantityOrdered===0)).map(t=>({item_id:t.itemCode,item_name:t.itemCodeDesc??t.itemCode,quantity:+t.quantityOrdered,price:new w(t.extensionAmt).toNumber()}))}function hn(e){return new w(e.subTotalAmt).sub(e.DiscountAmt??0).toNumber()}function ax(e,t){ue()&&e&&t.length>0&&he("view_cart",{currency:"USD",value:hn(e),items:pn(t)})}function ix(e,t){ue()&&he("add_payment_info",{currency:"USD",value:hn(e),payment_type:e.PaymentType,items:pn(t)})}function cx(e,t){ue()&&he("begin_checkout",{currency:"USD",value:hn(e),items:pn(t)})}function lx(e,t){ue()&&he("add_shipping_info",{currency:"USD",value:hn(e),shipping_tier:e.shipVia,items:pn(t)})}function dx(e,t){ue()&&he("purchase",{currency:"USD",value:hn(e),transaction_id:e.salesOrderNo??e.id.toString(),items:pn(t)})}function ux(e,t){if(!ue())return;const n=e.price?new w(e.price).toNumber():0,r=e.price?new w(e.price).times(t).toNumber():0;he("add_to_cart",{currency:"USD",value:r,items:[{item_id:e.itemCode,item_name:e.name,price:n,quantity:t}]})}function Hr({cartItem:e,quantity:t,unitOfMeasure:n,comment:r,disabled:o,onDone:a,onChangeQuantity:i,excludeCartId:c,setActiveCart:l}){const m=I(),p=d(se),f=d(Pa),g=d(ln),C=d(ne=>ss(ne,g)),y=d(q),x=d(Ut),S=d(Hc),O=d(tl),M=d(ya),[V,Qe]=u.useState(C?.id??null),[Y,Z]=u.useState(r??""),[fe,ft]=u.useState(C?.customerPONo??""),[Be,Fe]=u.useState(C?.shipToCode??null),ce=d(ne=>ve(ne,V??0)),gt=u.useCallback(async ne=>{ne.preventDefault(),!(o||!p||!fe)&&(ux(e,t),V?await m(Se({cartId:V,customerKey:p,shipToCode:Be,setActiveCart:l,item:{itemCode:e.itemCode,itemType:"1",unitOfMeasure:n??e.salesUM??"EA",commentText:Y,productId:e.productId,quantityOrdered:t}})):await m(Se({cartId:null,cartName:fe,customerKey:p,shipToCode:Be,setActiveCart:!0,item:{itemCode:e.itemCode,itemType:"1",unitOfMeasure:n??e.salesUM??"EA",commentText:Y,productId:e.productId,quantityOrdered:t}})),a&&a())},[V,t,p,fe,Be,e,Y,l,a]),B=u.useCallback(ne=>{Qe(ne?.id??0),Fe(ne?.shipToCode??null),ft(ne?.customerPONo??"")},[]);u.useEffect(()=>{!x&&S==="idle"&&m(Os(y))},[y,m,x,S]),u.useEffect(()=>{B(C??null)},[C]),u.useEffect(()=>{let ne="";e.season?.active&&!(e.season.product_available||e.seasonAvailable)&&(ne=[`PRE-SEASON ITEM: ${e.season.code}`,r??""].filter(Kr=>!!Kr).join("; ")),Z(ne)},[e]),u.useEffect(()=>{const ne=O;ne||(x?.billTo?Fe(y?.PrimaryShipToCode??""):Fe(x?.shipTo[0]??"")),Fe(ne??"")},[O,y,x]);const me=ne=>{const[Kr]=f.filter(xd=>xd.id===ne);B(Kr??null)},fd=ne=>{ft(ne)},gd=ne=>{Fe(ne)};return s.jsx("form",{onSubmit:gt,className:"add-to-cart",method:"post",children:s.jsxs(v,{spacing:2,direction:"column",children:[s.jsx(rx,{cartId:V===c?0:V,onChange:me,required:!0,excludeCartId:c}),!V&&M==="loading"&&s.jsx(z,{variant:"indeterminate","aria-label":"Loading Carts"}),!V&&M==="idle"&&s.jsxs(v,{spacing:2,direction:{xs:"column",md:"row"},children:[s.jsx(b,{sx:{width:"50%"},children:s.jsx(nx,{value:fe,onChange:fd,required:!0,error:!fe,fullWidth:!0,helperText:"Please name your cart."})}),s.jsx(b,{sx:{width:"50%"},children:s.jsx(Is,{value:Be,onChange:gd})})]}),s.jsxs(v,{direction:"row",spacing:2,justifyContent:"flex-end",children:[s.jsx(Kl,{quantity:t,onChange:i,unitOfMeasure:n??e.salesUM??"EA",disabled:o,required:!0}),s.jsx(Bl,{disabled:o||!t||ce!=="idle"})]}),ce!=="idle"&&s.jsx(z,{variant:"indeterminate"})]})})}function $l({salesOrderNo:e}){const t=d(m=>$m(m,e??"")),[n,r]=u.useState(null),[o,a]=u.useState("EA"),i=m=>{a(m.UnitOfMeasure);const p=Em(m);if(!p){r(null);return}r({...p,name:m.ItemCodeDesc,productId:0,image:""})},c=m=>{n&&r({...n,quantity:m})},l=!!n;return e?s.jsxs(fr,{sx:{mt:3},children:[s.jsxs(ct,{size:"small",children:[s.jsx(Zt,{children:s.jsxs(U,{children:[s.jsx(h,{children:"Item"}),s.jsx(h,{children:"Description"}),s.jsx(h,{children:"U/M"}),s.jsx(h,{align:"right",children:"Ordered"}),s.jsx(h,{align:"right",children:"Unit Price"}),s.jsx(h,{align:"right",children:"MSRP"}),s.jsx(h,{align:"right",children:"Item Price"}),s.jsx(h,{align:"right",children:"Ext Price"}),s.jsx(h,{align:"center",children:"Action"})]})}),s.jsx(lt,{children:t.map(m=>s.jsx(tx,{line:m,onAddToCart:i},m.LineSeqNo))}),s.jsx(sx,{salesOrderNo:e})]}),s.jsxs(ut,{open:l,onClose:()=>r(null),children:[s.jsxs(kt,{children:["Add ",n?.itemCode," To Cart"]}),s.jsx(mt,{children:!!n&&s.jsx(Hr,{cartItem:n,unitOfMeasure:o,quantity:n?.quantity??1,onChangeQuantity:c,onDone:()=>r(null)})}),s.jsx(pt,{children:s.jsx(N,{autoFocus:!0,onClick:()=>r(null),children:"Cancel"})})]})]}):null}const mx=(e,t,n)=>$("/account/:customerSlug/invoices/:invoiceType/:invoiceNo",{customerSlug:A(e),invoiceType:"IN",invoiceNo:t}),vt="/account/:customerSlug/users/:id?",zl=({open:e,salesOrderNo:t,shipToCode:n,onClose:r})=>{const o=I(),a=xe(),i=d(se),c=d(C=>ve(C,0)),[l,m]=u.useState(""),[p,f]=u.useState(n??""),g=u.useCallback(async()=>{if(!t||!i)return;const y=await o(Nt({customerKey:i,salesOrderNo:t,cartName:l,shipToCode:p}));if(y.payload?.header){const x=y.payload.header.id;r(),a($("/account/:customerSlug/carts/:cartId",{customerSlug:A(Ss(i)),cartId:x.toString()}))}},[t,i,p,l]);return s.jsxs(ut,{open:e,onClose:r,title:"Confirm",children:[s.jsxs(kt,{children:["Duplicate SO# ",t,"?"]}),s.jsxs(mt,{children:[s.jsxs(_t,{children:["Are you sure you want to duplicate order #",t,"?"]}),s.jsxs(v,{spacing:2,direction:"column",children:[s.jsx(_,{severity:"info",children:s.jsxs(v,{direction:"column",spacing:1,children:[s.jsx("div",{children:"Any discontinued items will no longer be available. Please check your new cart for accuracy."}),s.jsx("div",{children:"Comments will not copy to the new order - you may need to add those manually, or copy them from this order."})]})}),s.jsx(E,{autoFocus:!0,label:"New Cart Name",type:"text",fullWidth:!0,variant:"filled",value:l,onChange:C=>m(C.target.value)}),s.jsx(Is,{value:p??"",onChange:C=>f(C??"")}),c!=="idle"&&s.jsx(z,{variant:"indeterminate"})]})]}),s.jsxs(pt,{children:[s.jsx(N,{onClick:r,children:"Cancel"}),s.jsx(N,{onClick:g,disabled:!l,children:"Duplicate Order"})]})]})};function ko(e){return!!e&&F(e).isValid()&&F(e).valueOf()>0}function rs(e){return ko(e)?F(e).format("YYYY-MM-DD"):""}const Wl=()=>{const e=I(),t=Ye(),n=d(q),r=d(S=>Er(S,t?.salesOrderNo??"")),o=d(S=>Wm(S,t?.salesOrderNo??"")),[a,i]=u.useState(!1),[c,l]=u.useState(ko(r?.UDF_CANCEL_DATE)),[m,p]=u.useState(rs(r?.UDF_CANCEL_DATE)),[f,g]=u.useState(rs(r?.OrderDate)),[C,y]=u.useState(rs(r?.ShipExpireDate));u.useEffect(()=>{l(ko(r?.UDF_CANCEL_DATE)),p(rs(r?.UDF_CANCEL_DATE)),g(rs(r?.OrderDate)),y(rs(r?.ShipExpireDate))},[r]);const x=()=>{!n||!r||e(st(r?.SalesOrderNo))};return!n||!r?null:s.jsxs("div",{children:[s.jsxs(P,{container:!0,spacing:2,children:[s.jsx(P,{size:{xs:12,lg:6},children:s.jsxs(v,{spacing:2,direction:"column",children:[s.jsx(E,{label:"Ship To Code",type:"text",variant:"filled",size:"small",value:r?.ShipToCode??"Default address",slotProps:{htmlInput:{readOnly:!0}}}),s.jsx(E,{label:"Delivery Address",type:"text",multiline:!0,variant:"filled",size:"small",value:Qo(Xo(r)).join(`
`),slotProps:{htmlInput:{readOnly:!0}}}),s.jsxs(v,{spacing:2,direction:{xs:"column",md:"row"},children:[s.jsx(E,{label:"Ship Via",type:"text",fullWidth:!0,value:Xi(r?.ShipVia)?.description??r?.ShipVia??"",variant:"filled",size:"small",slotProps:{htmlInput:{readOnly:!0}}}),s.jsx(E,{label:"Ship Comment",type:"text",fullWidth:!0,value:r?.Comment??"",variant:"filled",size:"small",slotProps:{htmlInput:{readOnly:!0}}})]}),s.jsxs(v,{spacing:2,direction:{sm:"column",md:"row"},sx:{justifyContent:"flex-end"},children:[s.jsx(N,{type:"button",variant:"text",onClick:x,children:"Reload"}),s.jsx(N,{type:"button",variant:"outlined",onClick:()=>i(!0),children:"Duplicate Order"})]})]})}),s.jsx(P,{size:{xs:12,lg:6},children:s.jsxs(v,{spacing:2,direction:"column",children:[s.jsx(E,{label:"Order Date",type:"date",fullWidth:!0,variant:"filled",size:"small",value:f,placeholder:"",slotProps:{htmlInput:{readOnly:!0}}}),s.jsx(E,{label:"Purchase Order No",type:"text",fullWidth:!0,variant:"filled",size:"small",value:r?.CustomerPONo??"",slotProps:{htmlInput:{readOnly:!0}}}),c&&s.jsx(E,{label:"Cancel Date",type:"date",fullWidth:!0,value:m,variant:"filled",size:"small",slotProps:{htmlInput:{readOnly:!0}}}),s.jsx(E,{label:"Requested Ship Date",type:"date",size:"small",variant:"filled",fullWidth:!0,value:C,slotProps:{htmlInput:{readOnly:!0}}}),Ec(r)&&r.LastInvoiceNo&&s.jsxs(v,{spacing:2,direction:"row",children:[s.jsx(E,{label:"Invoice No",type:"text",fullWidth:!0,value:r.LastInvoiceNo,variant:"filled",size:"small",slotProps:{htmlInput:{readOnly:!0}}}),F(r.LastInvoiceDate).isValid()&&s.jsx(E,{label:"Invoice Date",type:"date",fullWidth:!0,value:F(r.LastInvoiceDate).format("YYYY-MM-DD"),variant:"filled",size:"small",slotProps:{htmlInput:{readOnly:!0}}})]}),r?.UDF_PROMO_DEAL&&s.jsx(E,{label:"Promo Code",type:"text",fullWidth:!0,value:r?.UDF_PROMO_DEAL??"",variant:"filled",size:"small",slotProps:{htmlInput:{readOnly:!0}}}),!!o.length&&s.jsxs("div",{children:[s.jsx(j,{children:"Invoices:"}),o.map(S=>s.jsx(Wt,{label:S,component:en,to:mx(n,S)},S))]})]})})]}),s.jsx(zl,{open:a,salesOrderNo:r?.SalesOrderNo,shipToCode:r.ShipToCode,onClose:()=>i(!1)})]})};function Ro(){return s.jsxs(P,{container:!0,spacing:2,children:[s.jsx(P,{size:{xs:12,sm:6},children:s.jsxs(v,{direction:"column",spacing:2,children:[s.jsx(Le,{variant:"rectangular",height:30}),s.jsx(Le,{variant:"rectangular",height:30}),s.jsx(Le,{variant:"rectangular",height:30})]})}),s.jsx(P,{size:{xs:12,sm:6},children:s.jsxs(v,{direction:"column",spacing:2,children:[s.jsx(Le,{variant:"rectangular",height:30}),s.jsx(Le,{variant:"rectangular",height:60}),s.jsx(Le,{variant:"rectangular",height:30})]})})]})}function ur({salesOrderNo:e}){const t=d(n=>zm(n,e));return t==="idle"||t==="rejected"?null:s.jsx(z,{variant:"indeterminate",sx:{my:1}})}const px=()=>{const e=I(),t=Ye(),n=Dt("/account/:customerSlug/:orderType/:salesOrderNo"),r=d(Ce),o=d(q),a=d(m=>Er(m,t?.salesOrderNo??"")),i=d(Ar),c=d(je);if(u.useEffect(()=>{i||c||t?.salesOrderNo&&t?.salesOrderNo!==a?.SalesOrderNo&&e(st(t.salesOrderNo))},[o,r,t,i,a]),!o&&!c){tn("/profile");return}const l=`Sales Order #${n?.params?.salesOrderNo}`;return!a||!o?s.jsxs("div",{children:[s.jsx(re,{documentTitle:l}),s.jsxs(j,{variant:"h3",component:"h2",children:["Sales Order #",n?.params?.salesOrderNo]}),s.jsx("div",{className:"sales-order-page",children:s.jsx(Ro,{})}),s.jsx(ur,{salesOrderNo:n?.params?.salesOrderNo})]}):a.OrderStatus==="X"?s.jsxs("div",{children:[s.jsx(re,{documentTitle:l}),s.jsxs(j,{variant:"h3",component:"h2",children:["Cancelled Order #",a.SalesOrderNo]}),s.jsx("div",{className:"sales-order-page",children:s.jsx(Ro,{})}),s.jsx(_,{severity:"error",title:"Note:",children:"This order has been cancelled. Please contact Customer Service if you have any questions."})]}):s.jsxs("div",{children:[s.jsx(re,{documentTitle:l}),s.jsxs("div",{className:"sales-order-page",children:[s.jsxs(j,{variant:"h3",component:"h2",children:["Sales Order #",a.SalesOrderNo]}),s.jsx(Wl,{}),s.jsx(ur,{salesOrderNo:n?.params?.salesOrderNo}),s.jsx($l,{salesOrderNo:n?.params?.salesOrderNo})]})]})},Gl=({countryCode:e,value:t,filterList:n,allowAllStates:r,onChange:o,id:a,...i})=>{const[c,l]=u.useState(bo.filter(f=>!n||!n.length||n.includes(f.code))),m=a??u.useId();u.useEffect(()=>{switch(e){case"USA":case"US":return l(bo.filter(f=>!n||!n.length||n.includes(f.code)));case"CA":case"CAN":return l(Bp.filter(f=>!n||!n.length||n.includes(f.code)));default:return l([])}},[e,n]);const p=f=>{o(f.target.value)};return s.jsxs(E,{select:!0,label:"State / Territory",slotProps:{input:{id:m},inputLabel:{htmlFor:m}},...i,value:t??"",onChange:p,fullWidth:!0,children:[!r&&s.jsx(ie,{children:"Select One"}),r&&s.jsx(ie,{children:"All States"}),c.map(f=>s.jsx(ie,{value:f.code,children:f.name},f.code))]})},hx=[{cca3:"ABW",cca2:"AW",name:"Aruba"},{cca3:"AFG",cca2:"AF",name:"Afghanistan"},{cca3:"AGO",cca2:"AO",name:"Angola"},{cca3:"AIA",cca2:"AI",name:"Anguilla"},{cca3:"ALA",cca2:"AX",name:"land Islands"},{cca3:"ALB",cca2:"AL",name:"Albania"},{cca3:"AND",cca2:"AD",name:"Andorra"},{cca3:"ARE",cca2:"AE",name:"United Arab Emirates"},{cca3:"ARG",cca2:"AR",name:"Argentina"},{cca3:"ARM",cca2:"AM",name:"Armenia"},{cca3:"ASM",cca2:"AS",name:"American Samoa"},{cca3:"ATA",cca2:"AQ",name:"Antarctica"},{cca3:"ATF",cca2:"TF",name:"French Southern and Antarctic Lands"},{cca3:"ATG",cca2:"AG",name:"Antigua and Barbuda"},{cca3:"AUS",cca2:"AU",name:"Australia"},{cca3:"AUT",cca2:"AT",name:"Austria"},{cca3:"AZE",cca2:"AZ",name:"Azerbaijan"},{cca3:"BDI",cca2:"BI",name:"Burundi"},{cca3:"BEL",cca2:"BE",name:"Belgium"},{cca3:"BEN",cca2:"BJ",name:"Benin"},{cca3:"BFA",cca2:"BF",name:"Burkina Faso"},{cca3:"BGD",cca2:"BD",name:"Bangladesh"},{cca3:"BGR",cca2:"BG",name:"Bulgaria"},{cca3:"BHR",cca2:"BH",name:"Bahrain"},{cca3:"BHS",cca2:"BS",name:"Bahamas"},{cca3:"BIH",cca2:"BA",name:"Bosnia and Herzegovina"},{cca3:"BLM",cca2:"BL",name:"Saint Barthlemy"},{cca3:"BLR",cca2:"BY",name:"Belarus"},{cca3:"BLZ",cca2:"BZ",name:"Belize"},{cca3:"BMU",cca2:"BM",name:"Bermuda"},{cca3:"BOL",cca2:"BO",name:"Bolivia"},{cca3:"BRA",cca2:"BR",name:"Brazil"},{cca3:"BRB",cca2:"BB",name:"Barbados"},{cca3:"BRN",cca2:"BN",name:"Brunei"},{cca3:"BTN",cca2:"BT",name:"Bhutan"},{cca3:"BVT",cca2:"BV",name:"Bouvet Island"},{cca3:"BWA",cca2:"BW",name:"Botswana"},{cca3:"CAF",cca2:"CF",name:"Central African Republic"},{cca3:"CAN",cca2:"CA",name:"Canada"},{cca3:"CCK",cca2:"CC",name:"Cocos (Keeling) Islands"},{cca3:"CHE",cca2:"CH",name:"Switzerland"},{cca3:"CHL",cca2:"CL",name:"Chile"},{cca3:"CHN",cca2:"CN",name:"China"},{cca3:"CIV",cca2:"CI",name:"Ivory Coast"},{cca3:"CMR",cca2:"CM",name:"Cameroon"},{cca3:"COD",cca2:"CD",name:"DR Congo"},{cca3:"COG",cca2:"CG",name:"Republic of the Congo"},{cca3:"COK",cca2:"CK",name:"Cook Islands"},{cca3:"COL",cca2:"CO",name:"Colombia"},{cca3:"COM",cca2:"KM",name:"Comoros"},{cca3:"CPV",cca2:"CV",name:"Cape Verde"},{cca3:"CRI",cca2:"CR",name:"Costa Rica"},{cca3:"CUB",cca2:"CU",name:"Cuba"},{cca3:"CUW",cca2:"CW",name:"Curaao"},{cca3:"CXR",cca2:"CX",name:"Christmas Island"},{cca3:"CYM",cca2:"KY",name:"Cayman Islands"},{cca3:"CYP",cca2:"CY",name:"Cyprus"},{cca3:"CZE",cca2:"CZ",name:"Czech Republic"},{cca3:"DEU",cca2:"DE",name:"Germany"},{cca3:"DJI",cca2:"DJ",name:"Djibouti"},{cca3:"DMA",cca2:"DM",name:"Dominica"},{cca3:"DNK",cca2:"DK",name:"Denmark"},{cca3:"DOM",cca2:"DO",name:"Dominican Republic"},{cca3:"DZA",cca2:"DZ",name:"Algeria"},{cca3:"ECU",cca2:"EC",name:"Ecuador"},{cca3:"EGY",cca2:"EG",name:"Egypt"},{cca3:"ERI",cca2:"ER",name:"Eritrea"},{cca3:"ESH",cca2:"EH",name:"Western Sahara"},{cca3:"ESP",cca2:"ES",name:"Spain"},{cca3:"EST",cca2:"EE",name:"Estonia"},{cca3:"ETH",cca2:"ET",name:"Ethiopia"},{cca3:"FIN",cca2:"FI",name:"Finland"},{cca3:"FJI",cca2:"FJ",name:"Fiji"},{cca3:"FLK",cca2:"FK",name:"Falkland Islands"},{cca3:"FRA",cca2:"FR",name:"France"},{cca3:"FRO",cca2:"FO",name:"Faroe Islands"},{cca3:"FSM",cca2:"FM",name:"Micronesia"},{cca3:"GAB",cca2:"GA",name:"Gabon"},{cca3:"GBR",cca2:"GB",name:"United Kingdom"},{cca3:"GEO",cca2:"GE",name:"Georgia"},{cca3:"GGY",cca2:"GG",name:"Guernsey"},{cca3:"GHA",cca2:"GH",name:"Ghana"},{cca3:"GIB",cca2:"GI",name:"Gibraltar"},{cca3:"GIN",cca2:"GN",name:"Guinea"},{cca3:"GLP",cca2:"GP",name:"Guadeloupe"},{cca3:"GMB",cca2:"GM",name:"Gambia"},{cca3:"GNB",cca2:"GW",name:"Guinea-Bissau"},{cca3:"GNQ",cca2:"GQ",name:"Equatorial Guinea"},{cca3:"GRC",cca2:"GR",name:"Greece"},{cca3:"GRD",cca2:"GD",name:"Grenada"},{cca3:"GRL",cca2:"GL",name:"Greenland"},{cca3:"GTM",cca2:"GT",name:"Guatemala"},{cca3:"GUF",cca2:"GF",name:"French Guiana"},{cca3:"GUM",cca2:"GU",name:"Guam"},{cca3:"GUY",cca2:"GY",name:"Guyana"},{cca3:"HKG",cca2:"HK",name:"Hong Kong"},{cca3:"HMD",cca2:"HM",name:"Heard Island and McDonald Islands"},{cca3:"HND",cca2:"HN",name:"Honduras"},{cca3:"HRV",cca2:"HR",name:"Croatia"},{cca3:"HTI",cca2:"HT",name:"Haiti"},{cca3:"HUN",cca2:"HU",name:"Hungary"},{cca3:"IDN",cca2:"ID",name:"Indonesia"},{cca3:"IMN",cca2:"IM",name:"Isle of Man"},{cca3:"IND",cca2:"IN",name:"India"},{cca3:"IOT",cca2:"IO",name:"British Indian Ocean Territory"},{cca3:"IRL",cca2:"IE",name:"Ireland"},{cca3:"IRN",cca2:"IR",name:"Iran"},{cca3:"IRQ",cca2:"IQ",name:"Iraq"},{cca3:"ISL",cca2:"IS",name:"Iceland"},{cca3:"ISR",cca2:"IL",name:"Israel"},{cca3:"ITA",cca2:"IT",name:"Italy"},{cca3:"JAM",cca2:"JM",name:"Jamaica"},{cca3:"JEY",cca2:"JE",name:"Jersey"},{cca3:"JOR",cca2:"JO",name:"Jordan"},{cca3:"JPN",cca2:"JP",name:"Japan"},{cca3:"KAZ",cca2:"KZ",name:"Kazakhstan"},{cca3:"KEN",cca2:"KE",name:"Kenya"},{cca3:"KGZ",cca2:"KG",name:"Kyrgyzstan"},{cca3:"KHM",cca2:"KH",name:"Cambodia"},{cca3:"KIR",cca2:"KI",name:"Kiribati"},{cca3:"KNA",cca2:"KN",name:"Saint Kitts and Nevis"},{cca3:"KOR",cca2:"KR",name:"South Korea"},{cca3:"UNK",cca2:"XK",name:"Kosovo"},{cca3:"KWT",cca2:"KW",name:"Kuwait"},{cca3:"LAO",cca2:"LA",name:"Laos"},{cca3:"LBN",cca2:"LB",name:"Lebanon"},{cca3:"LBR",cca2:"LR",name:"Liberia"},{cca3:"LBY",cca2:"LY",name:"Libya"},{cca3:"LCA",cca2:"LC",name:"Saint Lucia"},{cca3:"LIE",cca2:"LI",name:"Liechtenstein"},{cca3:"LKA",cca2:"LK",name:"Sri Lanka"},{cca3:"LSO",cca2:"LS",name:"Lesotho"},{cca3:"LTU",cca2:"LT",name:"Lithuania"},{cca3:"LUX",cca2:"LU",name:"Luxembourg"},{cca3:"LVA",cca2:"LV",name:"Latvia"},{cca3:"MAC",cca2:"MO",name:"Macau"},{cca3:"MAF",cca2:"MF",name:"Saint Martin"},{cca3:"MAR",cca2:"MA",name:"Morocco"},{cca3:"MCO",cca2:"MC",name:"Monaco"},{cca3:"MDA",cca2:"MD",name:"Moldova"},{cca3:"MDG",cca2:"MG",name:"Madagascar"},{cca3:"MDV",cca2:"MV",name:"Maldives"},{cca3:"MEX",cca2:"MX",name:"Mexico"},{cca3:"MHL",cca2:"MH",name:"Marshall Islands"},{cca3:"MKD",cca2:"MK",name:"Macedonia"},{cca3:"MLI",cca2:"ML",name:"Mali"},{cca3:"MLT",cca2:"MT",name:"Malta"},{cca3:"MMR",cca2:"MM",name:"Myanmar"},{cca3:"MNE",cca2:"ME",name:"Montenegro"},{cca3:"MNG",cca2:"MN",name:"Mongolia"},{cca3:"MNP",cca2:"MP",name:"Northern Mariana Islands"},{cca3:"MOZ",cca2:"MZ",name:"Mozambique"},{cca3:"MRT",cca2:"MR",name:"Mauritania"},{cca3:"MSR",cca2:"MS",name:"Montserrat"},{cca3:"MTQ",cca2:"MQ",name:"Martinique"},{cca3:"MUS",cca2:"MU",name:"Mauritius"},{cca3:"MWI",cca2:"MW",name:"Malawi"},{cca3:"MYS",cca2:"MY",name:"Malaysia"},{cca3:"MYT",cca2:"YT",name:"Mayotte"},{cca3:"NAM",cca2:"NA",name:"Namibia"},{cca3:"NCL",cca2:"NC",name:"New Caledonia"},{cca3:"NER",cca2:"NE",name:"Niger"},{cca3:"NFK",cca2:"NF",name:"Norfolk Island"},{cca3:"NGA",cca2:"NG",name:"Nigeria"},{cca3:"NIC",cca2:"NI",name:"Nicaragua"},{cca3:"NIU",cca2:"NU",name:"Niue"},{cca3:"NLD",cca2:"NL",name:"Netherlands"},{cca3:"NOR",cca2:"NO",name:"Norway"},{cca3:"NPL",cca2:"NP",name:"Nepal"},{cca3:"NRU",cca2:"NR",name:"Nauru"},{cca3:"NZL",cca2:"NZ",name:"New Zealand"},{cca3:"OMN",cca2:"OM",name:"Oman"},{cca3:"PAK",cca2:"PK",name:"Pakistan"},{cca3:"PAN",cca2:"PA",name:"Panama"},{cca3:"PCN",cca2:"PN",name:"Pitcairn Islands"},{cca3:"PER",cca2:"PE",name:"Peru"},{cca3:"PHL",cca2:"PH",name:"Philippines"},{cca3:"PLW",cca2:"PW",name:"Palau"},{cca3:"PNG",cca2:"PG",name:"Papua New Guinea"},{cca3:"POL",cca2:"PL",name:"Poland"},{cca3:"PRI",cca2:"PR",name:"Puerto Rico"},{cca3:"PRK",cca2:"KP",name:"North Korea"},{cca3:"PRT",cca2:"PT",name:"Portugal"},{cca3:"PRY",cca2:"PY",name:"Paraguay"},{cca3:"PSE",cca2:"PS",name:"Palestine"},{cca3:"PYF",cca2:"PF",name:"French Polynesia"},{cca3:"QAT",cca2:"QA",name:"Qatar"},{cca3:"REU",cca2:"RE",name:"Runion"},{cca3:"ROU",cca2:"RO",name:"Romania"},{cca3:"RUS",cca2:"RU",name:"Russia"},{cca3:"RWA",cca2:"RW",name:"Rwanda"},{cca3:"SAU",cca2:"SA",name:"Saudi Arabia"},{cca3:"SDN",cca2:"SD",name:"Sudan"},{cca3:"SEN",cca2:"SN",name:"Senegal"},{cca3:"SGP",cca2:"SG",name:"Singapore"},{cca3:"SGS",cca2:"GS",name:"South Georgia"},{cca3:"SJM",cca2:"SJ",name:"Svalbard and Jan Mayen"},{cca3:"SLB",cca2:"SB",name:"Solomon Islands"},{cca3:"SLE",cca2:"SL",name:"Sierra Leone"},{cca3:"SLV",cca2:"SV",name:"El Salvador"},{cca3:"SMR",cca2:"SM",name:"San Marino"},{cca3:"SOM",cca2:"SO",name:"Somalia"},{cca3:"SPM",cca2:"PM",name:"Saint Pierre and Miquelon"},{cca3:"SRB",cca2:"RS",name:"Serbia"},{cca3:"SSD",cca2:"SS",name:"South Sudan"},{cca3:"STP",cca2:"ST",name:"So Tom and Prncipe"},{cca3:"SUR",cca2:"SR",name:"Suriname"},{cca3:"SVK",cca2:"SK",name:"Slovakia"},{cca3:"SVN",cca2:"SI",name:"Slovenia"},{cca3:"SWE",cca2:"SE",name:"Sweden"},{cca3:"SWZ",cca2:"SZ",name:"Swaziland"},{cca3:"SXM",cca2:"SX",name:"Sint Maarten"},{cca3:"SYC",cca2:"SC",name:"Seychelles"},{cca3:"SYR",cca2:"SY",name:"Syria"},{cca3:"TCA",cca2:"TC",name:"Turks and Caicos Islands"},{cca3:"TCD",cca2:"TD",name:"Chad"},{cca3:"TGO",cca2:"TG",name:"Togo"},{cca3:"THA",cca2:"TH",name:"Thailand"},{cca3:"TJK",cca2:"TJ",name:"Tajikistan"},{cca3:"TKL",cca2:"TK",name:"Tokelau"},{cca3:"TKM",cca2:"TM",name:"Turkmenistan"},{cca3:"TLS",cca2:"TL",name:"Timor-Leste"},{cca3:"TON",cca2:"TO",name:"Tonga"},{cca3:"TTO",cca2:"TT",name:"Trinidad and Tobago"},{cca3:"TUN",cca2:"TN",name:"Tunisia"},{cca3:"TUR",cca2:"TR",name:"Turkey"},{cca3:"TUV",cca2:"TV",name:"Tuvalu"},{cca3:"TWN",cca2:"TW",name:"Taiwan"},{cca3:"TZA",cca2:"TZ",name:"Tanzania"},{cca3:"UGA",cca2:"UG",name:"Uganda"},{cca3:"UKR",cca2:"UA",name:"Ukraine"},{cca3:"UMI",cca2:"UM",name:"United States Minor Outlying Islands"},{cca3:"URY",cca2:"UY",name:"Uruguay"},{cca3:"USA",cca2:"US",name:"United States"},{cca3:"UZB",cca2:"UZ",name:"Uzbekistan"},{cca3:"VAT",cca2:"VA",name:"Vatican City"},{cca3:"VCT",cca2:"VC",name:"Saint Vincent and the Grenadines"},{cca3:"VEN",cca2:"VE",name:"Venezuela"},{cca3:"VGB",cca2:"VG",name:"British Virgin Islands"},{cca3:"VIR",cca2:"VI",name:"United States Virgin Islands"},{cca3:"VNM",cca2:"VN",name:"Vietnam"},{cca3:"VUT",cca2:"VU",name:"Vanuatu"},{cca3:"WLF",cca2:"WF",name:"Wallis and Futuna"},{cca3:"WSM",cca2:"WS",name:"Samoa"},{cca3:"YEM",cca2:"YE",name:"Yemen"},{cca3:"ZAF",cca2:"ZA",name:"South Africa"},{cca3:"ZMB",cca2:"ZM",name:"Zambia"},{cca3:"ZWE",cca2:"ZW",name:"Zimbabwe"}],fx=({value:e,onChange:t,id:n,...r})=>{const o=n??u.useId(),a=i=>{t(i.target.value)};return s.jsxs(E,{select:!0,label:"Country",slotProps:{input:{id:o},inputLabel:{htmlFor:o}},...r,onChange:a,value:e??"",fullWidth:!0,children:[s.jsx(ie,{children:"Select One"}),hx.map(i=>s.jsx(ie,{value:i.cca3,children:i.name},i.cca3))]})},La=({address:e,onChange:t,readOnly:n,addressType:r})=>{r||(r="billing");const o=yu(e.CountryCode??"")||Su(e.CountryCode??""),a=c=>l=>{switch(c){case"AddressLine1":case"AddressLine2":case"AddressLine3":case"City":case"State":case"ZipCode":return t({[c]:l.target.value})}},i=c=>l=>{switch(c){case"State":case"CountryCode":return t({[c]:l})}};return s.jsxs(v,{direction:"column",spacing:1,children:[s.jsx(E,{variant:"filled",fullWidth:!0,label:"Address 1",size:"small",onChange:a("AddressLine1"),value:e.AddressLine1??"",slotProps:{htmlInput:{readOnly:n,maxLength:30,autoComplete:`${r} address-line1`}},required:!0}),s.jsx(E,{variant:"filled",fullWidth:!0,label:"Address 2",size:"small",onChange:a("AddressLine2"),value:e.AddressLine2??"",slotProps:{htmlInput:{readOnly:n,maxLength:30,autoComplete:`${r} address-line2`}}}),s.jsx(E,{variant:"filled",onChange:a("AddressLine3"),value:e.AddressLine3??"",slotProps:{htmlInput:{readOnly:n,maxLength:30,autoComplete:`${r} address-line3`}},size:"small",fullWidth:!0,label:"Address 3"}),s.jsx(E,{variant:"filled",fullWidth:!0,size:"small",label:"City",onChange:a("City"),value:e.City??"",slotProps:{htmlInput:{readOnly:n,maxLength:30,autoComplete:`${r} address-level2`}},required:!0}),s.jsxs(v,{direction:{xs:"column",md:"row"},spacing:1,children:[o&&s.jsx(Gl,{value:e.State??"",countryCode:e.CountryCode,required:!0,slotProps:{htmlInput:{readOnly:n,disabled:n,autoComplete:`${r} address-level1`}},variant:"filled",size:"small",onChange:i("State")}),!o&&s.jsx(E,{variant:"filled",onChange:a("State"),value:e.State??"",slotProps:{htmlInput:{readOnly:n,maxLength:30,autoComplete:`${r} address-level1`}},size:"small",required:!0,fullWidth:!0,label:"State"}),s.jsx(E,{variant:"filled",fullWidth:!0,label:"Postal Code",size:"small",onChange:a("ZipCode"),value:e.ZipCode??"",slotProps:{htmlInput:{readOnly:n,maxLength:10,autoComplete:`${r} postal-code`}},required:!0}),s.jsx(fx,{value:e.CountryCode??"",onChange:i("CountryCode"),variant:"filled",size:"small",slotProps:{htmlInput:{autoComplete:`${r} country-code`,readOnly:n,disabled:n}},required:!0})]})]})},gx={email:"",name:"",hasAccount:!0,account:"",accountName:"",telephone:"",address:null,agreeToPolicy:!1},si={CustomerName:"",AddressLine1:"",AddressLine2:"",AddressLine3:"",City:"",State:"",ZipCode:"",CountryCode:"USA"},xx=()=>{const e=I(),[t,n]=u.useState(gx),r=d(_r),o=d(Zf),a=l=>{l.preventDefault(),e(Bn(t))},i=l=>m=>{const p={...t};switch(l){case"hasAccount":case"agreeToPolicy":n({...p,[l]:m.target.checked});return;case"address":return;default:n({...p,[l]:m.target.value})}},c=l=>{const m=t.address??si;n({...t,address:{...m,...l}})};return s.jsxs(s.Fragment,{children:[r==="saving"&&s.jsx(z,{variant:"indeterminate"}),s.jsx("form",{onSubmit:a,children:s.jsxs(v,{spacing:1,direction:"column",children:[s.jsx(E,{variant:"filled",label:"Your Name",required:!0,value:t.name,onChange:i("name"),autoComplete:"name"}),s.jsx(E,{variant:"filled",label:"Your Email Address",required:!0,type:"email",value:t.email,onChange:i("email"),autoComplete:"email"}),s.jsx(E,{label:"Your Company Name",variant:"filled",value:t.accountName,onChange:i("accountName"),required:!0}),s.jsx(Gn,{children:s.jsx(qs,{control:s.jsx(gs,{checked:t.hasAccount,onChange:i("hasAccount")}),label:"I have a CHUMS Account"})}),t.hasAccount&&s.jsx(E,{label:"Your Account Number",variant:"filled",value:t.account,onChange:i("account"),helperText:s.jsxs("div",{children:["Your account number will be in the format ##-XX#### and can be found in a recent order or invoice.",s.jsx("br",{}),s.jsx("em",{children:"Example: 01-UT0000"})]})}),!t.hasAccount&&s.jsx(La,{onChange:c,address:t.address??si,addressType:"billing"}),s.jsx(E,{label:"Your Telephone #",type:"tel",variant:"filled",autoComplete:"tel",required:!t.hasAccount,value:t.telephone,onChange:i("telephone")}),s.jsx(Gn,{children:s.jsx(qs,{control:s.jsx(gs,{checked:t.agreeToPolicy,onChange:i("agreeToPolicy")}),label:"I Agree to CHUMS Minimum Advertised Price and Site Usage Policies."})}),s.jsx(N,{type:"submit",variant:"contained",disabled:!t.agreeToPolicy,children:"Request Account"})]})}),!!o&&o===Tp&&s.jsxs(_,{severity:"warning",variant:"filled",children:["If you've recently signed up and have not received an email to validate your account"," "," and set your password please contact CHUMS Customer Service (800-222-2486 or"," "," ",s.jsx(X,{href:"mailto:cs@chums.com?subject=Problems%20signing%20up%20for%20CHUMS%20B2B",target:"_blank",children:"send an email"}),") or"," "," go to the ",s.jsx(X,{component:Q,to:xo,children:"Login Page"})," to send a new link to set"," "," your password;"]})]})},Cx=[{find:/youtube\.com/g,replace:"youtube-nocookie.com"}];function it({html:e,...t}){const n=d(Fh),[r,o]=u.useState(e);return u.useEffect(()=>{if(!n){let a=e;Cx.forEach(({find:i,replace:c})=>a=a.replace(i,c)),o(a);return}o(e)},[e,n]),e?s.jsx(b,{...t,dangerouslySetInnerHTML:{__html:r}}):null}const jx=()=>{const e=I(),t=d(Pl);return u.useEffect(()=>{e(hs("map-policy"))},[]),!t||t.keyword!=="map-policy"?null:s.jsx(Di,{variant:"outlined",children:s.jsxs(Li,{children:[s.jsx(j,{gutterBottom:!0,variant:"h3",component:"h3",children:t.title}),s.jsx(j,{variant:"body1",sx:{fontSize:"small"},children:s.jsx(it,{html:t?.content??""})})]})})},yx=()=>s.jsx(Di,{variant:"outlined",children:s.jsxs(Li,{children:[s.jsx(j,{gutterBottom:!0,variant:"h3",component:"h3",children:"Usage Policy"}),s.jsxs(j,{variant:"body1",sx:{fontSize:"small"},children:[s.jsx("p",{children:"This system is for the use of authorized users only. Individuals using this computer system without authority, or in excess of their authority, are subject to having all of their activities on this system monitored and recorded by system personnel."}),s.jsx("p",{children:"In the course of monitoring individuals improperly using this system, or in the course of system maintenance, the activities of authorized users may also be monitored."}),s.jsx("p",{children:"Anyone using this system expressly consents to such monitoring and is advised that if such monitoring reveals possible evidence of criminal activity, system personnel may provide the evidence of such monitoring to law enforcement officials."})]})]})}),Xe=()=>{const[e,t]=u.useState(!0);return u.useEffect(()=>{t(!1)},[]),e},Sx=()=>{const e=Xe(),t=xe(),n=d(H);return u.useEffect(()=>{n&&t("/profile",{replace:!0})},[n]),u.useEffect(()=>{if(e)return;const r=new URLSearchParams(document?.location?.search),o=r.get("h")??"",a=r.get("key")??"";!n&&o&&a&&t(um+document?.location?.search,{replace:!0})},[e]),s.jsxs("div",{children:[s.jsx(re,{documentTitle:bs.signUp}),s.jsx(j,{variant:"h1",component:"h1",sx:{my:3},children:"Chums B2B Portal"}),s.jsx(j,{component:"h2",variant:"h2",gutterBottom:!0,children:"Sign Up"}),s.jsxs(P,{container:!0,spacing:2,children:[s.jsx(P,{size:{xs:12,sm:6},children:s.jsxs(v,{direction:"column",spacing:2,children:[s.jsx(yx,{}),s.jsx(jx,{})]})}),s.jsx(P,{size:{xs:12,sm:6},children:s.jsx(xx,{})})]})]})};function vx(){const e=I(),t=xe();return u.useEffect(()=>{e(_s()).then(()=>{t("/login")})},[e,t]),s.jsx("div",{children:"Logging out."})}const Qr=256,eo=8,Vl=({email:e,disabled:t,isPasswordReset:n,onSubmit:r,onCancel:o})=>{const[a,i]=u.useState(""),[c,l]=u.useState(""),[m,p]=u.useState(""),f=g=>(g.preventDefault(),r({oldPassword:a,newPassword:c}));return s.jsxs(b,{children:[s.jsx(j,{component:"h3",variant:"h3",sx:{my:3},children:n?"Set your password":"Update your password"}),s.jsxs(v,{direction:"column",spacing:2,component:"form",onSubmit:f,name:"username",children:[s.jsx(E,{variant:"filled",value:e??"",label:"Email",slotProps:{htmlInput:{readOnly:!0,autoComplete:"username"}}}),!n&&s.jsx(Wn,{type:"password",label:"Old Password",variant:"filled",value:a,onChange:g=>i(g.target.value),slotProps:{htmlInput:{maxLength:Qr,minLength:eo,autoComplete:"current-password"}},fullWidth:!0,required:!0}),s.jsx(Wn,{type:"password",label:"New Password",variant:"filled",fullWidth:!0,required:!0,value:c,onChange:g=>l(g.target.value),slotProps:{htmlInput:{maxLength:Qr,minLength:eo,autoComplete:"new-password"},formHelperText:{component:"div"}}}),s.jsx(Wn,{type:"password",label:"Confirm New Password",variant:"filled",fullWidth:!0,required:!0,value:m,onChange:g=>p(g.target.value),slotProps:{htmlInput:{maxLength:Qr,minLength:eo,autoComplete:"new-password"}},helperText:m!==c?"Your new passwords do not match":""}),s.jsxs(v,{direction:"row",justifyContent:"flex-end",spacing:2,children:[s.jsx(N,{type:"button",variant:"text",onClick:o,children:"Cancel"}),s.jsx(N,{type:"submit",variant:"contained",disabled:c!==m||t,children:"Update Password"})]})]})]})},to=()=>{const e=I(),t=d(qf),n=d(_r),r=Xe(),o=Ye(),[a,i]=u.useState(null),c=xe();u.useEffect(()=>{if(!r){let p=o.hash??"",f=o.key??"";if(!p||!f){const g=new URLSearchParams(document?.location?.search);p=g.get("h")??"",f=g.get("key")??""}e(Kn({hash:p,key:f})).then(g=>{const C=g.payload;Qt(C)&&i(C.error??"An error occurred while loading the request.")})}},[r,o]);const l=u.useCallback(async p=>{if(!o||!o.key||!o.hash)return;const f=o.hash,g=o.key,y=(await e(On({...p,hash:f,key:g}))).payload;y?.success?c("/login",{state:{message:"Your password has been updated. Please log in again."}}):y?.error&&i(y.error)},[o]),m=()=>{c("/login")};return s.jsxs(qe,{maxWidth:"sm",children:[s.jsx(j,{component:"h1",variant:"h1",sx:{my:3},children:"Chums B2B Portal"}),n!=="idle"&&s.jsx(z,{variant:"indeterminate"}),t&&s.jsxs(j,{component:"h2",variant:"h2",children:["Welcome ",t?.name]}),s.jsxs(v,{direction:"column",spacing:2,children:[!!a&&s.jsx(_,{severity:"warning",title:"Reset password error:",children:a}),s.jsx(Vl,{isPasswordReset:!0,disabled:!t,email:t?.email,onSubmit:l,onCancel:m})]})]})},ni=({children:e})=>s.jsx(P,{size:{xs:12,sm:6},sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:e}),wx=ys.img`
    max-width: 100%;
    width: 100%;
    height: auto;
    max-height: 50vh;
`,Gs=()=>s.jsx(qe,{maxWidth:"md",children:s.jsxs(P,{container:!0,children:[s.jsxs(ni,{children:[s.jsx(j,{variant:"body1",sx:{fontSize:"2rem",textAlign:"center",mb:2},children:"It looks like the page you were looking for can't be found."}),s.jsxs(j,{variant:"body2",children:["If you're looking for a product, browse our ",s.jsx(X,{component:Q,to:"/products/all",children:"products listing"}),"."]})]}),s.jsx(ni,{children:s.jsx(wx,{src:"/images/chums/404-Booby.gif",alt:"Page not found"})})]})});function bx(){const e=I(),t=d(H),n=d(Pl),r=d(Il),o=d(yf),a=d(Sf),i=Ye();u.useEffect(()=>{e(hs(i.keyword))},[i]);const c=()=>{n?.keyword&&e(hs(n.keyword))},l=`${r==="loading"?"Loading: ":""}${n?.title??i.keyword}`;if(!n){if(r==="loading")return s.jsxs("div",{children:[s.jsx(re,{documentTitle:l}),s.jsx(z,{variant:"indeterminate"})]});if(o)return s.jsx(Gs,{})}return n?.status?!t&&n.requiresLogin?s.jsxs("div",{className:`page-${n?.keyword}`,children:[s.jsx(re,{documentTitle:l}),s.jsx(j,{component:"h1",variant:"h1",children:n?.title}),s.jsx(tt,{sx:{my:3}}),s.jsx(_,{severity:"warning",children:"Warning: This content requires login."})]}):s.jsxs("div",{className:`page-${n?.keyword}`,children:[s.jsx(re,{documentTitle:l}),s.jsx(j,{component:"h1",variant:"h1",onClick:c,children:n?.title}),s.jsx(tt,{sx:{my:3}}),r==="loading"&&s.jsx(z,{variant:"indeterminate"}),!!a&&s.jsx(it,{html:a,className:"has-bootstrap"})]}):s.jsxs("div",{className:`page-${n?.keyword}`,children:[s.jsx(re,{documentTitle:l}),s.jsx(j,{component:"h1",variant:"h1",children:n?.title}),s.jsx(tt,{sx:{my:3}}),s.jsx(Gs,{})]})}const Mo=()=>{},us={"1FEX_GROUND":{code:"1FEX_GROUND",description:"FedEX Ground",allowCustomerAccount:!0,carrier:"fedex",enabled:!0},"1UPS_GROUND":{code:"1UPS_GROUND",description:"UPS Ground",allowCustomerAccount:!0,carrier:"ups",enabled:!0},"APP_PRI_EXP ":{code:"APP_PRI_EXP",description:"USPS Priority",allowCustomerAccount:!1,carrier:"usps",enabled:!0},"USPS GND ADV":{code:"USPS GND ADV",description:"USPS Ground Advantage",allowCustomerAccount:!1,carrier:"usps",enabled:!0},"1FEX_1ST_ONIGHT":{code:"1FEX_1ST_ONIGHT",description:"FedEx 1st Overnight",allowCustomerAccount:!0,carrier:"fedex"},"1FEX_DEFAIR":{code:"1FEX_DEFAIR",description:"FedEx Defered Air",allowCustomerAccount:!0,carrier:"fedex"},"1FEX_ECN_2DAY":{code:"1FEX_ECN_2DAY",description:"FedEx Economy 2 Day",allowCustomerAccount:!0,carrier:"fedex"},"1FEX_EXP_SAVER":{code:"1FEX_EXP_SAVER",description:"FedEx Express Saver",allowCustomerAccount:!0,carrier:"fedex"},"1FEX_PRI_ONIGHT":{code:"1FEX_PRI_ONIGHT",description:"FedEx Priority Ovn",allowCustomerAccount:!0,carrier:"fedex"},"1FEX_STD_ONIGHT":{code:"1FEX_STD_ONIGHT",description:"FedEx Std Overnight",allowCustomerAccount:!0,carrier:"fedex"},"1UPS_2DAY":{code:"1UPS_2DAY",description:"UPS 2nd Day Air",allowCustomerAccount:!0,carrier:"ups"},"1UPS_2DAY_AM":{code:"1UPS_2DAY_AM",description:"UPS 2nd Day Air AM",allowCustomerAccount:!0,carrier:"ups"},"1UPS_3DAY":{code:"1UPS_3DAY",description:"UPS 3 Day Select",allowCustomerAccount:!0,carrier:"ups"},"1UPS_NEXT_DAY":{code:"1UPS_NEXT_DAY",description:"UPS Next Day Air",allowCustomerAccount:!0,carrier:"ups"},"1UPS_NEXT_DAY_S":{code:"1UPS_NEXT_DAY_S",description:"UPS Next Day SAVER",allowCustomerAccount:!0,carrier:"ups"},"TO BE DECIDED":{code:"TO BE DECIDED",description:"To Be Decided",allowCustomerAccount:!1,carrier:"",enabled:!0}},Ix=({trackingId:e,shipVia:t})=>{let n=Ji[t]?.carrier;switch(n||(/fedex/i.test(t)?n="fedex":/usps/i.test(t)?n="usps":/ups/i.test(t)&&(n="ups")),n){case"ups":return`https://wwwapps.ups.com/WebTracking/processInputRequest?TypeOfInquiryNumber=T&InquiryNumber1=${e}`;case"fedex":return`https://www.fedex.com/fedextrack/?tracknumbers=${e}`;case"usps":return`https://tools.usps.com/go/TrackConfirmAction.action?tLabels=${e}`;default:return null}},Px=({trackingId:e,shipVia:t,weight:n})=>{const r=Ix({trackingId:e,shipVia:t});if(!r)return null;const o=`${e}; ${n} lb${n===1?"":"s"}`;return s.jsx(Wt,{component:X,target:"_blank",href:r,icon:s.jsx(gr,{}),label:o,clickable:!0})},Tx=()=>{const e=I(),t=d(Rr),n=d(Ut),[r,o]=u.useState(!1),a=()=>{o(!1)},i=()=>{t&&e(Ks(t))};if(!t)return null;const c=!t.UDF_CANCEL_DATE||F(t.UDF_CANCEL_DATE).valueOf()===0;return s.jsxs("div",{className:"mb-1",children:[s.jsxs(P,{container:!0,spacing:2,children:[s.jsx(P,{size:{xs:12,sm:6},children:s.jsxs(v,{spacing:2,direction:"column",children:[s.jsxs(v,{spacing:2,direction:{xs:"column",lg:"row"},children:[s.jsx(E,{label:"Sales Order",type:"text",fullWidth:!0,variant:"filled",size:"small",value:t.SalesOrderNo??"Direct Invoice",placeholder:"",slotProps:{htmlInput:{readOnly:!0}}}),s.jsx(E,{label:"Purchase Order #",type:"text",fullWidth:!0,variant:"filled",size:"small",value:t.CustomerPONo,placeholder:"",slotProps:{htmlInput:{readOnly:!0}}})]}),s.jsxs(v,{spacing:2,direction:{xs:"column",lg:"row"},children:[!!t.OrderDate&&!!t.SalesOrderNo&&s.jsx(E,{label:"Order Date",type:"date",fullWidth:!0,variant:"filled",size:"small",value:F(t.OrderDate).format("YYYY-MM-DD"),placeholder:"",slotProps:{htmlInput:{readOnly:!0}}}),!!t.ShipDate&&s.jsx(E,{label:"Req. Ship Date",type:"date",fullWidth:!0,variant:"filled",size:"small",value:F(t.ShipDate).format("YYYY-MM-DD"),placeholder:"",slotProps:{htmlInput:{readOnly:!0}}}),!c&&s.jsx(E,{label:"Cancel Date",type:"date",fullWidth:!0,variant:"filled",size:"small",value:F(t.UDF_CANCEL_DATE).format("YYYY-MM-DD"),placeholder:"",slotProps:{htmlInput:{readOnly:!0}}})]}),s.jsxs(v,{spacing:2,direction:{xs:"column",lg:"row"},children:[s.jsx(E,{label:"Invoice Date",type:"date",fullWidth:!0,variant:"filled",size:"small",value:F(t.InvoiceDate).format("YYYY-MM-DD"),placeholder:"",slotProps:{htmlInput:{readOnly:!0}}}),!!t.InvoiceDueDate&&s.jsx(E,{label:"Invoice Due Date",type:"date",fullWidth:!0,variant:"filled",size:"small",value:F(t.InvoiceDueDate).format("YYYY-MM-DD"),placeholder:"",slotProps:{htmlInput:{readOnly:!0}}}),n?.billTo&&s.jsx(E,{label:"Balance Due",type:"text",fullWidth:!0,variant:"filled",size:"small",value:D(new w(t.Balance??"0")).format("$ 0,0.00"),placeholder:"",slotProps:{htmlInput:{readOnly:!0}}})]}),s.jsx(v,{spacing:2,direction:{xs:"column",lg:"row"},children:!!t.UDF_PROMO_DEAL&&s.jsx(E,{label:"Promo Code",type:"text",fullWidth:!0,variant:"filled",size:"small",value:t.UDF_PROMO_DEAL,placeholder:"",slotProps:{htmlInput:{readOnly:!0}}})})]})}),s.jsx(P,{size:{xs:12,sm:6},children:s.jsxs(v,{spacing:2,direction:"column",children:[s.jsx(Is,{value:t.ShipToCode,onChange:()=>{},readOnly:!0}),s.jsx(E,{label:"Delivery Address",type:"text",multiline:!0,variant:"filled",size:"small",value:Qo(Xo(t)).join(`
`),slotProps:{htmlInput:{readOnly:!0}}}),s.jsxs(v,{spacing:2,direction:"row",useFlexGap:!0,children:[s.jsx("div",{children:s.jsx(E,{label:"Ship Method",type:"text",fullWidth:!0,variant:"filled",size:"small",value:us[t.ShipVia??"-"]?.description??"Unknown",placeholder:"",slotProps:{htmlInput:{readOnly:!0}}})}),s.jsxs("div",{children:[!t.Track?.length&&s.jsx(_,{severity:"info",children:"Tracking is not available for this invoice."}),!!t.Track?.length&&t.Track.map(l=>s.jsx(Px,{trackingId:l.TrackingID,shipVia:l.StarshipShipVia,weight:l.Weight},l.PackageNo))]})]})]})})]}),s.jsxs(v,{spacing:2,direction:"row",sx:{justifyContent:"flex-end",mt:2},children:[s.jsx(N,{variant:"outlined",disabled:!t.SalesOrderNo,onClick:()=>o(!0),children:"Duplicate Order"}),s.jsx(N,{variant:"text",onClick:i,children:"Reload Invoice"})]}),s.jsx(zl,{open:r,salesOrderNo:t.SalesOrderNo??"",shipToCode:t.ShipToCode,onClose:a})]})},Ax=({line:e,onAddToCart:t})=>{const{ItemType:n,ItemCode:r,ItemCodeDesc:o,UnitOfMeasure:a,QuantityOrdered:i,ProductType:c,ExplodedKitItem:l,PriceLevel:m,LineDiscountPercent:p,SuggestedRetailPrice:f,UDF_UPC:g,CommentText:C}=e,y=e.KitItem==="N"&&e.ExplodedKitItem==="C",x={"item-comment":n!=="4"&&!!C,"line-comment":n==="4","kit-item":c==="K"&&l==="Y"},S=new w(1).sub(new w(e.LineDiscountPercent??0).div(100)).times(new w(e.UnitPrice??0).div(e.UnitOfMeasureConvFactor??1)).toString(),O=new w(1).sub(new w(e.LineDiscountPercent??0).div(100)).times(e.UnitPrice??0).toString(),M=n!=="4"&&!!C;return s.jsxs(u.Fragment,{children:[!(n==="4"&&r==="/C")&&!y&&s.jsxs(U,{sx:{'& > *:not([rowspan="2"])':{borderBottom:M?"unset":void 0},verticalAlign:"top"},children:[s.jsxs(h,{rowSpan:M?2:1,children:[s.jsx(j,{variant:"body1",sx:{fontWeight:700},children:e.ItemCode}),n==="1"&&s.jsx(mn,{itemCode:r,itemCodeDesc:o,image:null})]}),s.jsxs(h,{children:[s.jsx("p",{children:o}),!!g&&s.jsx(Da,{value:e.UDF_UPC})]}),s.jsx(h,{children:a||null}),s.jsx(h,{align:"right",children:D(e.QuantityOrdered).format("0,0")}),s.jsxs(h,{align:"right",children:[s.jsx("div",{children:D(S).format("0,0.00")}),!!p&&s.jsxs("div",{className:"sale",children:[p,"% Off"]}),!!m&&s.jsx(Oa,{priceLevel:m})]}),s.jsx(h,{align:"right",sx:{display:{xs:"none",md:"table-cell"}},children:D(f).format("0,0.00")}),s.jsx(h,{align:"right",sx:{display:{xs:"none",md:"table-cell"}},children:D(O).format("0,0.00")}),s.jsx(h,{align:"right",children:D(new w(e.QuantityOrdered??0).times(O).toString()).format("0,0.00")}),s.jsx(h,{rowSpan:M?2:1,children:s.jsx(cr,{onCopyToCart:()=>t(e),copyToCartDisabled:!e.ProductType||e.ProductType==="D"||e.InactiveItem==="Y"||e.ItemType!=="1"})})]}),!(n==="4"&&r==="/C")&&y&&s.jsxs(U,{sx:{verticalAlign:"top"},children:[s.jsx(h,{}),s.jsxs(h,{children:[s.jsx("p",{children:o}),!!g&&s.jsx("p",{children:We.format(g)})]}),s.jsx(h,{children:a||null}),s.jsx(h,{align:"right",children:D(i).format("0,0")}),s.jsx(h,{align:"right",children:""}),s.jsx(h,{sx:{display:{xs:"none",md:"table-cell"}},align:"right",children:D(f).format("0,0.00")}),s.jsx(h,{sx:{display:{xs:"none",md:"table-cell"}},align:"right",children:""}),s.jsx(h,{align:"right",children:""}),s.jsx(h,{align:"right",children:s.jsx(cr,{onCopyToCart:()=>t(e),copyToCartDisabled:!e.ProductType||e.ProductType==="D"||e.InactiveItem==="Y"||e.ItemType!=="1"})})]}),c==="K"&&l==="Y"&&s.jsxs(U,{children:[s.jsx(h,{children:""}),s.jsx(h,{colSpan:6,children:"Contains:"})]}),(!!C||n==="4")&&s.jsxs(U,{className:Ae("order-detail",x),children:[s.jsx(h,{children:""}),s.jsx(h,{colSpan:4,children:C}),s.jsx(h,{colSpan:2,sx:{display:{xs:"none",md:"table-cell"}},children:""}),s.jsx(h,{children:""}),s.jsx(h,{align:"right",children:" "})]})]})},Ns=({title:e,value:t})=>s.jsxs(U,{children:[s.jsx(h,{component:"th",scope:"row",colSpan:6,align:"right",children:e}),s.jsx(h,{align:"right",colSpan:2,children:t}),s.jsx(h,{})]}),Nx=()=>{const e=d(Rr);if(!e)return null;const t=new w(e.NonTaxableSalesAmt).add(e.TaxableSalesAmt),n=new w(e.SalesTaxAmt),r=new w(e.FreightAmt),o=new w(e.DiscountAmt),a=t.add(n).add(r).sub(o);return s.jsxs(s.Fragment,{children:[s.jsx(Ns,{title:"Sub Total",value:D(t).format("$ 0,0.00")}),s.jsx(Ns,{title:`Sales Tax ${n.eq(0)?"":e.TaxSchedule}`,value:D(n).format("$ 0,0.00")}),s.jsx(Ns,{title:"Freight",value:D(r).format("$ 0,0.00")}),!o.eq(0)&&s.jsx(Ns,{title:"Discount",value:D(o).format("$ 0,0.00")}),s.jsx(Ns,{title:"Total",value:D(a).format("$ 0,0.00")})]})},Ex=()=>{const e=d(Rr),[t,n]=u.useState(null),[r,o]=u.useState("EA"),a=l=>{o(l.UnitOfMeasure);const m={itemCode:l.ItemCode,quantity:Math.abs(+l.QuantityOrdered),comment:l.CommentText,name:l.ItemCodeDesc,productId:0,image:""};n(m)},i=l=>{t&&n({...t,quantity:l})};if(!e)return null;const c=!!t;return s.jsxs(fr,{sx:{mt:3},children:[s.jsxs(ct,{size:"small",children:[s.jsx(Zt,{children:s.jsxs(U,{className:"order-detail",children:[s.jsx(h,{children:"Item"}),s.jsx(h,{children:"Description"}),s.jsx(h,{children:"U/M"}),s.jsx(h,{align:"right",children:"Ordered"}),s.jsx(h,{align:"right",children:"Unit Price"}),s.jsx(h,{align:"right",sx:{display:{xs:"none",md:"table-cell"}},children:"MSRP"}),s.jsx(h,{align:"right",sx:{display:{xs:"none",md:"table-cell"}},children:"Item Price"}),s.jsx(h,{align:"right",children:"Ext Price"}),s.jsx(h,{align:"right",children:"Action"})]})}),s.jsx(lt,{children:[...e.Detail].sort((l,m)=>Number(l.DetailSeqNo)-Number(m.DetailSeqNo)).map(l=>s.jsx(Ax,{line:l,onAddToCart:a},l.DetailSeqNo))}),s.jsx($o,{children:s.jsx(Nx,{})})]}),s.jsxs(ut,{open:c,onClose:()=>n(null),children:[s.jsxs(kt,{children:["Add '",t?.itemCode,"' To Cart"]}),s.jsx(mt,{children:!!t&&s.jsx(Hr,{cartItem:t,unitOfMeasure:r,quantity:t?.quantity??1,onChangeQuantity:i,onDone:()=>n(null)})}),s.jsx(pt,{children:s.jsx(N,{autoFocus:!0,onClick:()=>n(null),children:"Cancel"})})]})]})},Ox=e=>{switch(e){case"CM":return"Credit Memo";case"DM":return"Debit Memo";case"AD":return"Adjustment";case"FC":return"Finance Charge";case"CA":return"Cash Invoice";case"XD":return"Deleted Invoice"}return"Invoice"},Dx=()=>{const e=I(),t=Dt("/account/:customerSlug/invoices/:invoiceType/:invoiceNo"),n=d(Rr),r=d(al),o=d(se);u.useEffect(()=>{if(o&&Ee(o)!==t?.params?.customerSlug){tn("/profile");return}if(!r&&t?.params.invoiceNo&&t.params.invoiceType&&(!n||t.params?.invoiceNo!==n.InvoiceNo)){const i={InvoiceNo:t.params.invoiceNo,InvoiceType:t.params.invoiceType};e(Ks(i))}},[t,n]);const a=`Invoice: ${t?.params?.invoiceNo??""}-${t?.params?.invoiceType??""}`;return s.jsxs("div",{className:"sales-order-page",children:[s.jsx(re,{documentTitle:a}),s.jsx(j,{component:"h2",variant:"h2",children:a}),!!n&&n.InvoiceType!=="IN"&&s.jsx(j,{component:"h3",variant:"h3",children:Ox(n.InvoiceType)}),r&&s.jsx(z,{variant:"indeterminate"}),s.jsx(Tx,{}),s.jsx(Ex,{})]})};function Lx({error:e}){return s.jsxs(_,{severity:"error",children:[s.jsx("strong",{children:"Sorry! Something went wrong."}),s.jsx("div",{style:{whiteSpace:"pre-wrap"},children:e.message})]})}function fn({reportErrors:e,children:t}){const n=d(an),r=(o,a)=>{e!==!1&&go({message:o.message,userId:n?.id,componentStack:a.componentStack??""}).catch(i=>console.log(i.message))};return s.jsx(vi,{onError:r,FallbackComponent:Lx,children:t})}const kx=()=>{const e=Xe(),t=I(),n=d(Wc),r=u.useRef(0),[o,a]=u.useState(n),[i,c]=u.useState(n);u.useEffect(()=>{t(zp(o))},[o]),u.useEffect(()=>{c(n),a(n)},[n]),u.useEffect(()=>(r.current=window.setTimeout(()=>a(i),500),()=>{e||window.clearTimeout(r.current)}),[e,i]);const l=m=>{c(m.target.value)};return s.jsxs(b,{sx:{display:"flex",alignItems:"flex-end"},children:[s.jsx(xr,{sx:{color:"action.active",mr:1,my:.5}}),s.jsx(E,{variant:"standard",type:"search",slotProps:{htmlInput:{maxLength:50}},value:i,onChange:l,label:"Filter Customers",fullWidth:!0})]})},Rx=({value:e="",onChange:t})=>{const n=I(),r=d(Ce),o=d(Eg),a=d(Rl),i=d(Ng),c=/[%_]+/.test(r?.SalespersonNo??""),l=u.useId(),m=u.useId();u.useEffect(()=>{!a&&!i&&c&&n(zn())},[c,a,i]);const p=o.filter(g=>!!g.active).sort((g,C)=>{const y=cs(g),x=cs(C);return y===x?0:y>x?1:-1}).map(g=>({value:cs(g),text:`${cs(g)} - ${g.SalespersonName}`}));if(!c||p.length===0)return null;const f=g=>t(g.target.value??null);return s.jsxs(dt,{fullWidth:!0,children:[s.jsx(Lt,{id:l,htmlFor:m,children:"Sales Rep"}),s.jsxs(nn,{labelId:l,label:"Sales Rep",variant:"standard",inputProps:{id:m},onChange:f,value:e??"",children:[s.jsx(ie,{value:"",children:"All Available Reps"}),p.map(g=>s.jsx(ie,{value:g.value,children:g.text},g.value))]})]})},Mx=()=>{const e=I(),t=d(Gc),n=d(Qc),r=o=>{e(qc(o??""))};return n?s.jsx(Rx,{value:t,onChange:r}):null},Ux=()=>{const e=I(),t=d(Jc),n=d(Vc),r=u.useId(),[o,a]=u.useState([]);u.useEffect(()=>{n&&!t.includes(n)?a([...t,n]):a(t)},[t,n]);const i=c=>{e(Zc(c))};return t.length<2?null:s.jsx(Gl,{countryCode:"USA",value:n,filterList:o,allowAllStates:!0,id:r,variant:"standard",onChange:i})},Fx=()=>{const e=I(),t=d(Ce),n=d(Qc),r=d(Jc),o=()=>{e(Te(t))};return s.jsxs(P,{container:!0,spacing:2,alignContent:"center",sx:{mt:5,mb:1},justifyContent:"space-between",children:[s.jsx(P,{sx:{flex:"1 1 auto"},children:s.jsx(kx,{})}),n&&s.jsx(P,{sx:{flex:"1 1 auto"},children:s.jsx(Mx,{})}),r.length>1&&s.jsx(P,{sx:{flex:"1 1 auto"},children:s.jsx(Ux,{})}),s.jsx(P,{size:"auto",children:s.jsx(N,{variant:"contained",onClick:o,children:"Refresh List"})})]})},Yl=({customer:e,selected:t=!1})=>{const n=A(e);if(!n)return null;let r;return e.ShipToCode?r=$(Cc,{customerSlug:encodeURIComponent(Ee(e)),code:encodeURIComponent(e.ShipToCode)}):r=$(da,{customerSlug:encodeURIComponent(n)}),s.jsx(X,{component:Q,to:r,sx:{whiteSpace:"nowrap"},color:t?"chumsRed":void 0,"aria-label":`Select '${e.CustomerName}'`,children:ke(e)})},_x=({customer:e})=>e.ShipToCode?s.jsxs(v,{direction:"column",children:[s.jsx("div",{children:e.BillToName}),s.jsx("div",{children:e.CustomerName})]}):e.CustomerName,Hx=({telephoneNo:e})=>e?s.jsx(X,{href:`tel:${e}`,color:"inherit",children:e}):null,so={display:{xs:"none",sm:"table-cell"}},ql=[{field:"CustomerNo",title:"Account",width:50,render:e=>s.jsx(Yl,{customer:e}),sortable:!0},{field:"CustomerName",title:"Name",width:80,sortable:!0,render:e=>s.jsx(_x,{customer:e})},{field:"AddressLine1",title:"Address",width:80,sortable:!0,sx:so},{field:"City",title:"City",width:80,sortable:!0},{field:"State",title:"State",width:40,sortable:!0,render:e=>ls(e)},{field:"ZipCode",title:"ZIP",width:40,sortable:!0,sx:so},{field:"TelephoneNo",title:"Phone",width:40,sortable:!0,sx:so,render:e=>s.jsx(Hx,{telephoneNo:e.TelephoneNo})}],Bx={Scroller:u.forwardRef(function(t,n){return s.jsx(fr,{component:ki,...t,ref:n,elevation:0})}),Table:e=>s.jsx(ct,{...e,sx:{borderCollapse:"separate",tableLayout:"fixed"}}),TableRow:({item:e,...t})=>s.jsx(U,{...t}),TableBody:u.forwardRef(function(t,n){return s.jsx(lt,{...t,ref:n})})};function Kx(){const e=d(Wp);return s.jsx(b,{sx:{height:600,maxHeight:"75vh",width:"100%",mb:3},children:s.jsx(Sd,{data:e,components:Bx,fixedHeaderContent:$x,itemContent:zx})})}function $x(){const e=I(),t=d(Yc),n=t.ascending?"asc":"desc",r=o=>()=>{if(o===t.field){e(za({field:o,ascending:!t.ascending}));return}e(za({field:o,ascending:!0}))};return s.jsx(U,{children:ql.map(o=>s.jsx(h,{variant:"head",component:"th",sortDirection:o.field===t.field?n:!1,align:o.align,style:{width:o.width},sx:{backgroundColor:"background.paper",...o.sx},children:s.jsx(Vn,{active:t.field===o.field,direction:t.field===o.field?n:"asc",onClick:r(o.field),children:o.title})},o.id??o.field))})}function zx(e,t){return s.jsx(s.Fragment,{children:ql.map(n=>s.jsx(h,{align:n.align,sx:n.sx,children:n.render?n.render(t):t[n.field]},n.id??n.field))})}const Wx=()=>{const e=I(),t=Dt("/profile/:id"),n=Ue(),r=d(Ce),o=d(zc);if(u.useEffect(()=>{const c=+(t?.params.id??0);o==="idle"&&c===r?.id&&e(Te(r))},[o,t,r,e]),!r)return s.jsx("div",{children:s.jsx(_,{severity:"info",children:"Please select a valid profile."})});const a=bs.accountList.replace(":name",r.SalespersonName||""),i=[{title:"Profile",pathname:Cs},{title:qn(r),pathname:Cs},{title:"Account List",pathname:n.pathname}];return s.jsxs(fn,{children:[s.jsx(re,{documentTitle:a}),s.jsx(_l,{paths:i}),s.jsx(j,{variant:"h1",component:"h1",children:"Account List"}),s.jsxs(j,{variant:"h2",component:"h2",children:[r?.SalespersonName??""," ",s.jsxs("small",{className:"ms-3",children:["(",uo(r),")"]})]}),s.jsx(Fx,{}),o==="loading"&&s.jsx(z,{variant:"indeterminate",sx:{my:1}}),s.jsx(Kx,{})]})},Gx=()=>{const e=I(),t=Ye(),n=d(Ce),r=d(va),o=d(Xc),a=Ue();return u.useEffect(()=>{a.state?.returnTo&&e(dn(a.state.returnTo))},[]),u.useEffect(()=>{if(o!=="idle")return;const i=Number(t.id??0),[c]=r.filter(l=>l.id===i);if(!c){tn(Cs);return}c.id!==n?.id&&e(Oe(c))},[t,n,r,o]),s.jsx(Wx,{})},Zl=60*1e3,Vx=5*Zl;function Yx(e){const[t,n]=u.useState(0),r=u.useRef(0);return u.useEffect(()=>(r.current=window.setInterval(()=>{const o=e*1e3-new Date().valueOf();n(o)},Zl),()=>{window.clearInterval(r.current)}),[e]),t}const qx=()=>{const e=I(),t=Xe(),n=d(H),r=d(vm),o=Yx(r);return u.useEffect(()=>{t||!n||n&&o<Vx&&o>0&&(console.log("dispatching updateLocalAuth()"),e(Nn()))},[e,t,n,o]),n?s.jsx("div",{className:"login-container",style:{display:"none"},"data-expires-in":o}):null};function Zx({canClose:e,onClick:t}){return e?s.jsx(le,{onClick:t,children:s.jsx(rn,{})}):null}const Uo=({alertId:e,severity:t,message:n,alertTitle:r,context:o,count:a,onDismiss:i,onDismissContext:c,children:l})=>{const m=()=>{if(o&&c){c(o);return}i&&e&&i(e)};return s.jsxs(_,{severity:t,onClose:m,action:s.jsx(Zx,{canClose:!!c||!!i,onClick:m}),children:[(!!o||!!r)&&s.jsx(_d,{sx:{display:"inline-block",mr:3},children:s.jsxs(v,{direction:"row",spacing:2,children:[!!o&&s.jsxs(j,{sx:{fontWeight:700},children:["[",o,"]"]}),!!r&&s.jsx(j,{sx:{fontWeight:700},children:r}),(a??0)>1&&s.jsxs(j,{variant:"caption",children:["(",a,")"]})]})}),s.jsx(j,{sx:{display:"inline-block"},variant:"body1",children:n??l??"Undefined alert"})]})},Jx=e=>e.alerts.list??[],Xx=R([Jx,(e,t)=>t],(e,t)=>e.filter(n=>!t||n.context===t).sort(yt)),Jl=({context:e})=>{const t=I(),n=d(a=>Xx(a,e)),r=a=>{t(Rc(a))},o=a=>{t(es(a))};return s.jsx(s.Fragment,{children:n.map(a=>s.jsx(Uo,{alertId:a.alertId,severity:a.severity,count:a.count,context:a.context,title:a.title,message:a.message,onDismiss:r,onDismissContext:o},a.alertId))})};function Qx({children:e}){const t=Hd();return s.jsx(Go,{appear:!1,direction:"down",in:!t,children:e})}const eC=240,tC=({children:e})=>{const t=Xe(),n=I(),r=d(af),o=()=>{n(Ta())};return t?null:s.jsx(b,{component:"nav","aria-label":"mobile app menu",children:s.jsx(Ri,{container:window?.document?.body,variant:"temporary",open:r,anchor:"top",onClose:o,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",md:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:eC,maxWidth:"75vw"}},children:e})})};function sC(e){return s.jsx(X,{underline:"hover",...e,component:Q})}const nC=ys.img`
    width: 100%;
    height: auto;
`;function Xl({sx:e}){return s.jsx(b,{sx:{maxWidth:{xs:"33vw",sm:"15vw"},width:"150px",margin:{xs:"1rem",sm:"0",md:"0 1.5rem"},...e},children:s.jsx(nC,{src:"/images/logos/Chums-Logo-Badge-Red-RGB.png",alt:"Chums",width:"1920",height:"1080",loading:"eager"})})}function ri({sx:e}){return s.jsx(j,{variant:"h6",component:"div",sx:{flexGrow:0,display:{xs:"none",sm:"block"},...e},children:s.jsx(sC,{to:"/",className:"nav-link home-link",children:s.jsx(Xl,{})})})}function Ht({to:e,replace:t,children:n,...r}){return s.jsx(ie,{component:Q,to:e,replace:t,underline:"hover",...r,children:n})}function rC(e){let t=0,n;for(n=0;n<e.length;n+=1)t=e.charCodeAt(n)+((t<<5)-t);let r="#";for(n=0;n<3;n+=1){const o=t>>n*8&255;r+=`00${o.toString(16)}`.slice(-2)}return r}function oC(e){const t=e.split(" ").filter(n=>n.length>1).filter((n,r)=>r<2).map(n=>n[0]).join("");return{sx:{bgColor:rC(e)},children:`${t}`}}const Fo=e=>{const t=d(H),n=d(an),r=d(wc);return s.jsxs(b,{...e,children:[(!t||!n)&&s.jsx(wn,{"aria-label":"Please log in",children:s.jsx(Ko,{"aria-hidden":"true"})}),t&&n&&r&&s.jsx(wn,{alt:n.name,src:r,slotProps:{img:{referrerPolicy:"no-referrer"}}}),t&&n&&!r&&s.jsx(wn,{...oC(n.name)})]})},aC=()=>{const e=d(H),t=d(Ce),n=u.useId(),r=u.useId(),[o,a]=js.useState(null),i=!!o;u.useEffect(()=>{i&&!e&&a(null)},[e]);const c=m=>{a(m.currentTarget)},l=()=>{a(null)};return e?s.jsxs(s.Fragment,{children:[s.jsx(le,{onClick:c,children:s.jsx(Fo,{})}),s.jsxs(lo,{id:r,open:i,onClose:l,anchorEl:o,slotProps:{list:{"aria-labelledby":n}},children:[s.jsx(Ht,{to:"/profile",children:"Profile"}),t&&s.jsx(Ht,{to:$("/profile/:id",{id:`${t.id}`}),children:"Accounts"}),s.jsx(Ht,{to:"/logout",children:"Logout"})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(le,{onClick:c,children:s.jsx(Fo,{})}),s.jsx(lo,{id:r,open:i,onClose:l,anchorEl:o,slotProps:{list:{"aria-labelledby":n}},children:s.jsx(Ht,{to:"/login",children:"Login"})})]})},Vs=({to:e,replace:t,children:n,sx:r,...o})=>{const a=hr();return s.jsx(N,{component:Q,size:"large",disabled:!e,to:e,replace:t,sx:{color:a.palette.grey[900],...r},...o,children:n})};function no(){const e=I(),t=d(q),n=d(sl),r=Ye(),o=d(rl),a=d(je),i=d(ba);return u.useEffect(()=>{const c=Ee(r.customerSlug??"");if(!c&&!i&&t&&!a){e(G(t));return}if(c){if(!t||A(t)!==c){if(o!=="idle")return;e(G(Ss(c)));return}o==="idle"&&!i&&e(G(t))}},[r,t,o,i]),t?s.jsx(Zs,{title:s.jsxs(s.Fragment,{children:[s.jsx(j,{color:"inherit",component:"div",children:t.CustomerName}),n&&s.jsx(j,{color:"inherit",sx:{fontSize:"small"},children:n.ShipToName})]}),arrow:!0,children:s.jsxs(b,{sx:{mx:1,whiteSpace:"pre"},children:[ta(t),!!n&&s.jsxs("span",{children:["/",n.ShipToCode]})]})}):null}function oi(){const e=d(ln),t=d(o=>Sp(o,e)),n=d(o=>Sh(o,e)),r=d(o=>ve(o,e??0));return e?s.jsxs(s.Fragment,{children:[s.jsx(Zs,{title:`Cart #${e}`,children:s.jsxs(b,{sx:{m:1,position:"relative"},children:[s.jsx(Bd,{badgeContent:t,color:"primary",max:99999,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:s.jsx(zo,{fontSize:"medium"})}),r!=="idle"&&s.jsx(Mi,{size:36,sx:{position:"absolute",top:-6,left:-6,zIndex:1}})]})}),s.jsx(b,{sx:{ml:2},children:D(n).format("$0,0")})]}):s.jsx(Vo,{fontSize:"medium"})}const iC=()=>{const e=d(H),t=d(q),n=d(ln);return e?t?!n||n===0?s.jsxs(Vs,{to:$a(t),children:[s.jsx(no,{}),s.jsx(oi,{})]}):s.jsxs(Vs,{to:$a(t,n),children:[s.jsx(no,{}),s.jsx(oi,{})]}):s.jsxs(Vs,{to:"/profile",children:[s.jsx(no,{}),s.jsx(Vo,{fontSize:"medium"})]}):null};function cC(e,t){return e===t}function ka(e,t=0,n){const r=u.useRef(0),[o,a]=u.useState(e),i=u.useCallback(cC,[n]),c=u.useCallback(l=>{window.clearInterval(r.current),r.current=window.setTimeout(()=>{i(l,o)||a(l)},t)},[t,i]);return u.useEffect(()=>()=>{window.clearInterval(r.current)},[t]),[o,c]}const Ql=e=>{switch(e.pagetype){case"category":return $(mm,{category:e.keyword});case"page":return $(lm,{keyword:e.keyword});default:return e.parent?$(jc,{category:e.parent,product:e.keyword}):$(dm,{product:e.keyword})}},ai=te("div")`
    flex: 0 0 25%;
    text-align: center;
`,lC=te("img")`
    flex: 0 0 25%;
    display: block;
    max-width: 100%;
    height: auto;
`;function dC({option:e}){const t=yc.replace(":image",encodeURIComponent(e.image??"missing.png"));switch(e.pagetype){case"category":return s.jsx(ai,{children:s.jsx($d,{"aria-label":"Product Category"})});case"page":return s.jsx(ai,{children:s.jsx(Kd,{"aria-label":"Information Page"})});case"product":return s.jsx(lC,{src:t,alt:e.keyword});default:return null}}const uC=te("div")`
    flex: 1 1 100%;
    padding-left: 0.25rem;
    text-align: center;
`;function mC({option:e}){return s.jsxs(uC,{children:[s.jsx(b,{children:s.jsx(j,{variant:"button",children:e.title})}),!!e.additional_data?.subtitle&&s.jsx(b,{children:s.jsx(j,{variant:"caption",children:e.additional_data.subtitle})})]})}function pC({option:e,...t}){const n=Ql(e);return u.createElement(b,{component:"li",...t,key:e.keyword},s.jsx(X,{component:en,to:n,sx:{width:"100%"},children:s.jsxs(v,{direction:"row",sx:{width:"100%"},alignItems:"center",children:[s.jsx(dC,{option:e}),s.jsx(mC,{option:e})]})}))}function hC(){const e=I(),t=d(Bf),n=xe(),[r,o]=u.useState(null),[a,i]=u.useState(""),[c,l]=ka(a,500);u.useEffect(()=>{l(a)},[a]);const[m,p]=u.useState(t??[]);u.useEffect(()=>{p(t??[])},[t]),u.useEffect(()=>{e(Hn(c))},[c]);const f=(C,y)=>{if(o(null),i(""),y){const x=Ql(y);n(x)}},g=(C,y)=>{i(y)};return s.jsx(Ui,{sx:{width:300,display:"inline-block"},renderInput:({inputProps:C,...y})=>s.jsx(E,{...y,slotProps:{htmlInput:{...C,maxLength:30}},variant:"outlined",size:"small",label:"Search",fullWidth:!0}),inputValue:a,onInputChange:g,options:m,noOptionsText:"No results found.",blurOnSelect:!0,getOptionLabel:C=>C.title,filterOptions:C=>C,onChange:f,renderOption:(C,y)=>s.jsx(pC,{option:y,...C}),value:r})}function fC({ref:e,...t}){return s.jsx(Q,{ref:e,...t,role:void 0})}function mr(e){const{icon:t,primary:n,to:r,...o}=e;return s.jsxs(Fi,{component:fC,to:r,sx:{color:"theme.palette.common.black"},...o,children:[t?s.jsx(_i,{children:t}):null,s.jsx(Yo,{primary:n})]})}function gn({title:e,to:t,items:n}){const[r,o]=u.useState(!1),a=i=>{i.preventDefault(),i.stopPropagation(),o(!r)};return!n?.length&&t?s.jsx(mr,{primary:e,to:t}):s.jsxs(s.Fragment,{children:[s.jsxs(Hi,{onClick:a,children:[s.jsx(Yo,{primary:e}),r?s.jsx(Bi,{}):s.jsx(Ki,{})]}),s.jsx(Gt,{in:r,children:s.jsx(qo,{component:"div",disablePadding:!0,children:n?.map(i=>s.jsx(mr,{sx:{pl:4},primary:i.title,to:i.url},i.id))})}),r&&s.jsx(tt,{sx:{my:"0.5rem"}})]})}gn.displayName="DrawerMenu";const gC=te(N)(({theme:e})=>({color:e.palette.grey[900]})),ed=({children:e,sx:t,...n})=>s.jsx(gC,{size:"large",sx:t,...n,children:e}),xC={textTransform:"uppercase",fontWeight:700};function td({title:e,items:t,slotProps:n,mediaQuery:r,urlFormat:o,requiresLogin:a}){const i=Ue(),c=n?.anchorButton?.id??u.useId(),l=u.useId(),m=u.useRef(null),p=$i(r??"(min-width: 1200px)"),f=d(H),[g,C]=u.useState(!1);u.useEffect(()=>{C(!1)},[i]);const y=()=>{C(!0)},x=()=>{C(!1)};return s.jsxs("div",{children:[s.jsx(ed,{id:c,ref:m,disabled:n?.anchorButton?.disabled||!t.length||a&&!f,sx:{height:"100%"},"aria-controls":g?l:void 0,"aria-expanded":g?"true":void 0,"aria-haspopup":"true",onClick:y,children:e}),s.jsx(zi,{open:!!m.current&&g,id:l,anchorEl:m.current,anchorOrigin:{vertical:"bottom",horizontal:"left"},onClick:x,onClose:x,children:s.jsx(b,{sx:{p:1,maxHeight:"75vh",width:p?"fit-content":"75vw",maxWidth:"100vw",overflow:"auto"},"aria-describedby":c,children:s.jsx(v,{direction:"row",spacing:2,children:t.map(S=>s.jsxs(zd,{children:[s.jsx(Ht,{to:o(S.url),sx:xC,children:S.title}),S.menu?.items?.map(O=>s.jsx(Ht,{disabled:O.requireLogin&&!f,onClick:y,to:o(O.url),children:O.title},O.id))]},S.id))})})})]})}const CC=e=>`/products${e}`;function jC({inDrawer:e}){const t=I(),n=d(cf),r=d(sf),[o,a]=u.useState(r?.items??[]);return u.useEffect(()=>{n&&t(Un())},[t,n]),u.useEffect(()=>{a(r?.items??[])},[r]),e?s.jsx(gn,{title:"Products",items:o.map(i=>({...i,url:`/products${i.url}`}))}):s.jsx(td,{title:"Products",items:o,urlFormat:CC,mediaQuery:"(min-width: 1000px)"})}function yC({inDrawer:e}){return d(H)?null:e?s.jsx(mr,{to:xo,primary:"Login"}):s.jsx(Vs,{to:xo,children:"Login"})}function SC({inDrawer:e}){return d(H)?null:e?s.jsx(mr,{to:Ka,primary:"Sign Up"}):s.jsx(Vs,{to:Ka,children:"Sign Up"})}function ii({linkCode:e,linkName:t}){return s.jsxs(s.Fragment,{children:[e,s.jsx(j,{sx:{marginLeft:"1rem",maxWidth:"12rem",fontWeight:"bold"},variant:"inherit",noWrap:!0,children:t})]})}const ro=[{id:"profile",title:"Profile",url:"/profile",menu:{items:[{id:"avatar",title:s.jsx(Fo,{}),url:"/profile"}]}},{id:"access-list",title:"Customer List",url:"/profile"},{id:"recent-customers",title:"Recent Customers",url:"/profile"}];function vC({inDrawer:e}){const t=d(H),n=d(wa),r=d(Ce),o=d(ja),a=[{id:"profile",title:"Profile",url:"/profile"},...n.map(c=>({id:c.id,title:c.SalespersonName??qn(c),url:ds(c)}))],i=[ro[0],{...ro[1],url:r?ds(r):"/profile",menu:{items:n.map(c=>({id:c.id,title:s.jsx(ii,{linkCode:qn(c),linkName:c.SalespersonName??""}),url:ds(c)}))}},{...ro[2],url:r?ds(r):"/profile",menu:{items:o.map(c=>({id:Cr(c),title:s.jsx(ii,{linkCode:ta(c),linkName:c.CustomerName??""}),url:gm(c)}))}}];return t?e?s.jsx(gn,{title:"Accounts",items:a}):s.jsx(td,{title:"Accounts",items:i,urlFormat:c=>c}):null}function sd({title:e,items:t,sx:n,urlFormat:r,mediaQuery:o,requiresLogin:a,...i}){const c=Ue(),l=d(H),m=$i(o??"(min-width: 1200px)"),p=u.useId(),f=u.useId(),[g,C]=js.useState(null);u.useEffect(()=>{C(null)},[c]);const y=!!g,x=O=>{C(O.currentTarget)},S=()=>{C(null)};return s.jsxs(s.Fragment,{children:[s.jsx(ed,{id:p,disabled:!t.length||a&&!l,sx:{height:"100%"},"aria-controls":y?f:void 0,"aria-expanded":y?"true":void 0,"aria-haspopup":"true",onClick:x,children:e}),s.jsx(lo,{id:f,...i,open:y,onClose:S,anchorEl:g,sx:Wd({"& .MuiMenu-list":{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start",color:"#000000"}},n),slotProps:{list:{"aria-labelledby":p},paper:{style:{maxHeight:"75vh",width:m?"fit-content":"75vw",maxWidth:"100vw"}}},children:t.map(O=>s.jsx(Ht,{to:r?r(O.url):O.url,children:O.title},O.id))})]})}function wC({inDrawer:e}){const t=d(H),n=d(q),[r,o]=js.useState([]);return u.useEffect(()=>{if(!n||!t){o([]);return}o(ef(n))},[n,t]),t?e?s.jsx(gn,{title:"Customer",items:r}):s.jsx(sd,{title:"Customer",sx:{"& .MuiMenu-list":{flexDirection:"column"}},items:r}):null}function bC({inDrawer:e}){const t=I(),n=d(lf),r=d(nf);return u.useEffect(()=>{n&&t(Fn())},[t,n]),e?s.jsx(gn,{title:"Resources",to:"/resources",items:r?.items??[]}):s.jsx(sd,{title:"Resources",items:r?.items??[],sx:{"& .MuiMenu-list":{flexDirection:"column"}}})}function ci({inDrawer:e}){return s.jsxs(s.Fragment,{children:[s.jsx(jC,{inDrawer:e}),s.jsx(yC,{inDrawer:e}),s.jsx(SC,{inDrawer:e}),s.jsx(vC,{inDrawer:e}),s.jsx(wC,{inDrawer:e}),s.jsx(bC,{inDrawer:e})]})}const IC=()=>{const e=I(),t=()=>{e(Ta())};return s.jsxs("div",{children:[s.jsx(Qx,{children:s.jsx(Gd,{component:"nav",color:"default",children:s.jsx(qe,{maxWidth:"xl",children:s.jsxs(Ma,{disableGutters:!0,children:[s.jsx(le,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:t,sx:{mr:2,display:{md:"none"}},children:s.jsx(Vd,{})}),s.jsx(ri,{}),s.jsx(b,{sx:{display:{xs:"none",md:"flex"},flex:"1 1 auto",flexDirection:"row",alignItems:"center"},children:s.jsx(ci,{})}),s.jsx(b,{sx:{display:{xs:"none",md:"flex"},flex:"1 1 auto"},children:s.jsx(hC,{})}),s.jsxs(v,{spacing:2,direction:"row",useFlexGap:!0,children:[s.jsx(iC,{}),s.jsx(aC,{})]})]})})})}),s.jsx(Ma,{}),s.jsx(tC,{children:s.jsxs(b,{onClick:t,sx:{textAlign:"center"},children:[s.jsx(ri,{sx:{display:{xs:"block",md:"none"}}}),s.jsx(tt,{}),s.jsx(qo,{children:s.jsx(ci,{inDrawer:!0})})]})})]})};function PC(){return s.jsx("header",{children:s.jsx(IC,{})})}function TC(){const e=Xe(),t=I(),n=d(Na),r=d(ng),o=u.useRef(0);u.useEffect(()=>{if(!e)return n||a(),o.current=window.setInterval(a,Dl),()=>{e||(window.clearInterval(o.current),window.removeEventListener("visibilityChange",i))}},[e,n]);const a=(m=!1)=>{t($n(m))},i=()=>{a()},c=m=>{m.preventDefault(),m.stopPropagation(),t(Ol())},l=()=>{window.location.reload()};if(!e)return s.jsxs("div",{children:[s.jsxs("span",{onClick:()=>a(!0),className:"app__version",children:["Version: ",n]}),s.jsx(Wi,{open:r,autoHideDuration:1e4,children:s.jsx(_,{severity:"info",sx:{width:"100%"},onClose:c,onClick:l,children:s.jsx("strong",{children:"Update Available! Click here to refresh"})})})]})}const AC="/images/chums/homepage/2024/06/B2BPopUpImage-landscape.jpg",NC="/images/chums/homepage/2024/06/B2BPopUpImage-portrait.jpg";function EC({children:e,ref:t,...n}){return s.jsx(Go,{direction:"up",ref:t,...n,children:e})}const OC=/^\/(login|signup|set-password|reset-password)/,li=ys.img`
    width: 100%;
    height: auto;
`,DC=()=>{const e=u.useId(),t=Xe(),n=Ue(),r=u.useRef(0),o=u.useRef(10*1e3),a=d(H),[i,c]=u.useState(!1),[l,m]=js.useState(T.getItem(ho,!a));u.useEffect(()=>{if(!t){if(a||OC.test(n.pathname)){window.clearTimeout(r.current),f();return}if(!l){window.clearTimeout(r.current);return}return p(),()=>{t||window.clearTimeout(r.current)}}},[a,t,l,o.current,n.pathname]);const p=()=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>{c(!0)},o.current)},f=()=>{c(!1),m(!1),T.setItem(ho,!1)};return t||a||!l?null:s.jsx(s.Fragment,{children:s.jsxs(ut,{open:i,slots:{transition:EC},keepMounted:!0,onClose:f,"aria-describedby":e,maxWidth:"sm",children:[s.jsx(kt,{id:e,children:s.jsx(j,{sx:{textTransform:"uppercase"},children:"Are you a member?"})}),s.jsx(le,{"aria-label":"close",onClick:f,sx:{position:"absolute",right:8,top:8},children:s.jsx(rn,{})}),s.jsx(mt,{children:s.jsxs(P,{container:!0,spacing:2,children:[s.jsx(P,{size:{xs:12,sm:6},children:s.jsxs(v,{direction:"column",spacing:2,sx:{alignItems:"center",justifyContent:"center",height:"100%"},children:[s.jsx(Xl,{sx:{maxWidth:"75%"}}),s.jsx(j,{sx:{textAlign:"center"},children:"Open your B2B account today for easy ordering and world-class customer service."})]})}),s.jsxs(P,{size:{xs:12,sm:6},children:[s.jsx(b,{sx:{display:{xs:"inline",sm:"none"}},children:s.jsx(li,{src:NC,width:"361",height:"542",loading:"lazy",alt:"",role:"presentation"})}),s.jsx(b,{sx:{display:{xs:"none",sm:"inline"}},children:s.jsx(li,{src:AC,width:"722",height:"542",loading:"lazy",alt:"",role:"presentation"})})]})]})}),s.jsxs(pt,{children:[s.jsx(N,{variant:"text",onClick:f,children:"No Thanks"}),s.jsx(N,{variant:"contained",component:en,to:"/signup",children:"Open an Account"})]})]})})},LC=te(X)(({theme:e})=>({color:e.palette.primary.contrastText,padding:"0 0.5rem"}));function Pt({href:e,target:t,rel:n,children:r,...o}){return s.jsx(LC,{underline:"hover",href:e,target:t,rel:n,...o,children:r})}function yn({consentSection:e,checked:t,onChange:n,...r}){const o=d(Hh),[a,i]=u.useState(o?.[e]??null),[c,l]=u.useState(!1),m=u.useId(),p=u.useId();return u.useEffect(()=>{i(o?.[e]??null)},[o,e]),a?s.jsxs(Fi,{alignItems:"flex-start",...r,disablePadding:!0,children:[s.jsx(Hi,{role:"checkbox",onClick:()=>n(!t),disabled:a.required,children:s.jsx(_i,{children:s.jsx(gs,{edge:"start",checked:t,tabIndex:-1,disableRipple:!0,role:"presentation",disabled:a.required,onChange:()=>n(!t),id:p,slotProps:{input:{"aria-labelledby":m}}})})}),s.jsx(Yo,{id:m,slots:{primary:"div",secondary:"div"},primary:s.jsxs(v,{direction:"row",spacing:1,justifyContent:"space-between",alignItems:"center",children:[s.jsx(j,{component:"label",htmlFor:p,variant:"body1",children:a.title}),s.jsxs(le,{onClick:()=>l(!c),"aria-expanded":c,"aria-label":"show more",children:[c&&s.jsx(Bi,{}),!c&&s.jsx(Ki,{})]})]}),secondary:s.jsxs("div",{children:[s.jsx(j,{component:"div",variant:"body2",color:"text.primary",sx:{mb:1},children:a.description}),s.jsx(Gt,{in:c,children:a.cookies?.map((f,g)=>s.jsx(j,{component:"div",variant:"caption",color:"text.secondary",sx:{mb:1},children:f},g))})]})})]}):null}function kC({ref:e,...t}){return s.jsx(Go,{direction:"up",ref:e,...t})}const di={functional:!0,preferences:!0,analytics:!1,marketing:!1};function nd({open:e,onClose:t,...n}){const r=I(),o=d(jl),a=d(Mr),[i,c]=u.useState(o?.preferences??di),l=u.useId();u.useEffect(()=>{e&&r(kn())},[r,e]),u.useEffect(()=>{c(o?.preferences??di)},[o]);const m=async y=>{const x={accepted:["functional"],rejected:[]};y.preferences?x.accepted.push("preferences"):x.rejected.push("preferences"),y.analytics?x.accepted.push("analytics"):x.rejected.push("analytics"),y.marketing?x.accepted.push("marketing"):x.rejected.push("marketing"),await r($s(x)),t()},p=async y=>{y.preventDefault(),await m(i)},f=y=>x=>{y!=="functional"&&c({...i,[y]:x})},g=async()=>{await m({preferences:!0,analytics:!0,marketing:!0})},C=async()=>{await m({preferences:!1,analytics:!1,marketing:!1})};return s.jsxs(ut,{open:e,onClose:t,...n,slots:{transition:kC},"aria-describedby":"Cookie consent form for B2B.chums.com",children:[s.jsx(kt,{children:"Cookie and Privacy Preferences"}),s.jsx(le,{"aria-label":"close",onClick:()=>t(),sx:y=>({position:"absolute",right:8,top:8,color:y.palette.grey[500]}),children:s.jsx(rn,{})}),s.jsxs(mt,{children:[a!=="idle"&&s.jsx(z,{variant:"indeterminate"}),s.jsx(_t,{sx:{mb:2},children:s.jsx("strong",{children:"You value your privacy"})}),s.jsx(_t,{sx:{mb:2},children:"This website uses cookies and similar technologies to enable site functionality as well as for analytics, personalization and targeted advertising."}),o?.gpc&&s.jsxs(_t,{sx:{mb:2},children:["We have detected a ",s.jsx("strong",{children:"Global Privacy Control"})," signal from your browser and have automatically opted you out of our marketing and analytics cookies. You can opt back in to the analytics and marketing cookies at any time by changing your privacy settings."]}),!!o?.uuid&&s.jsxs(_t,{sx:{mb:2},children:["Your cookie ID: ",o.uuid]}),s.jsx("form",{id:l,onSubmit:p,children:s.jsxs(qo,{children:[s.jsx(yn,{consentSection:"functional",checked:!0,onChange:f("functional")}),s.jsx(yn,{consentSection:"preferences",checked:i.preferences,onChange:f("preferences")}),s.jsx(yn,{consentSection:"analytics",checked:i.analytics,onChange:f("analytics")}),s.jsx(yn,{consentSection:"marketing",checked:i.marketing,onChange:f("marketing")})]})})]}),s.jsxs(pt,{children:[s.jsx(N,{type:"button",onClick:t,disabled:a!=="idle",children:"Cancel"}),s.jsx(N,{type:"button",variant:"outlined",onClick:C,disabled:a!=="idle",children:"Deny All"}),s.jsx(N,{type:"button",variant:"outlined",onClick:g,disabled:a!=="idle",children:"Accept All"}),s.jsx(N,{type:"submit",form:l,variant:"contained",color:"primary",disabled:a!=="idle",children:"Save Settings"})]})]})}function RC(){const e=d(jl),[t,n]=u.useState(!1);return u.useEffect(()=>{e&&T.setItem(sa,e.preferences)},[e]),s.jsxs(s.Fragment,{children:[s.jsx(Pt,{sx:{cursor:"pointer"},onClick:()=>n(!0),children:"Cookie Policy"}),s.jsx(nd,{open:t,onClose:()=>n(!1)})]})}const MC=te(b)(({theme:e})=>({display:"flex",flexDirection:"column",justifyContent:"space-between",width:"100%",backgroundColor:"#262626",color:"#EEEEEE",fontSize:"12px",textTransform:"uppercase",padding:"calc(var(--footer-contacts-padding) / 2)",alignItems:"center",[e.breakpoints.up("md")]:{flexDirection:"row"}})),UC=te(v)(({theme:e})=>({margin:"0 7px",display:"flex",flexWrap:"wrap",justifyContent:"center","* a":{padding:"0 calc(var(--footer-contacts-padding) / 3)",color:"#EEEEEE !important",whiteSpace:"nowrap","&:hover":{color:e.palette.primary.light}}}));function FC(){const[e]=u.useState(new Date().getFullYear());return s.jsxs(MC,{children:[s.jsx(b,{sx:{ml:{xs:"1rem"}},children:s.jsx(TC,{})}),s.jsx(b,{sx:{ml:{xs:"1rem"}},children:s.jsx(DC,{})}),s.jsxs(UC,{direction:"row",useFlexGap:!0,flexWrap:"wrap",children:[s.jsx(Pt,{underline:"hover",href:"//intranet.chums.com/apps/current-openings",target:"_blank",rel:"noreferrer",children:"CAREERS"}),s.jsx(Pt,{underline:"hover",href:"//chums.com/page/customization",target:"_blank",rel:"noreferrer",children:"CUSTOMIZE"}),s.jsx(Pt,{underline:"hover",href:"//chums.com/page/contact-us",target:"_blank",rel:"noreferrer",children:"CONTACT"}),s.jsx(RC,{}),s.jsx(X,{component:Q,to:"/pages/privacy-policy",sx:{color:"primary.contrastText"},children:"Privacy Policy"}),s.jsx(Pt,{underline:"hover",href:"https://chums.com",target:"_blank",rel:"noreferrer",children:"CHUMS.COM"})]}),s.jsxs(b,{sx:{mr:1},children:[" ",e," Chums. All rights reserved"]})]})}const _C=te(v)`
    padding: var(--footer-contacts-padding);
`;function HC(){return s.jsxs(_C,{sx:{mr:1},direction:"row",spacing:1,children:[s.jsxs(Pt,{href:"https://www.linkedin.com/company/chums-inc-",target:"_blank",rel:"noreferrer",children:[s.jsx(Yd,{}),s.jsx(b,{component:"span",sx:ks,children:"Follow Chums on LinkedIn"})]}),s.jsxs(Pt,{href:"https://www.facebook.com/Chumsusa",target:"_blank",rel:"noreferrer",children:[s.jsx(qd,{}),s.jsx(b,{sx:ks,children:"Like Chums on Facebook"})]}),s.jsxs(Pt,{href:"https://instagram.com/chumsusa",target:"_blank",rel:"noreferrer",children:[s.jsx(Zd,{}),s.jsx(b,{sx:ks,children:"Like Chums on Instagram"})]})]})}const BC=te(b)(({theme:e})=>({padding:"var(--footer-contacts-padding)",textAlign:"center",[e.breakpoints.up("sm")]:{textAlign:"left"}}));function KC(){return s.jsxs(BC,{children:[s.jsx("div",{children:s.jsx("strong",{children:"CONTACT US"})}),s.jsx("div",{children:s.jsxs(j,{component:"address",variant:"body1",children:[s.jsx("div",{children:"2424 SOUTH 2570 WEST"}),s.jsx("div",{children:"SALT LAKE CITY, UT 84119"}),s.jsx("div",{children:"(800) 222-2486"})]})})]})}const $C=te(v)(()=>({backgroundColor:"#000000",color:"#FFFFFF",justifyContent:"space-between",alignItems:"center"})),zC=()=>s.jsxs(b,{component:"footer",sx:{width:"100%",maxWidth:"100%"},children:[s.jsxs($C,{spacing:1,direction:{xs:"column",sm:"row"},children:[s.jsx(KC,{}),s.jsx(HC,{})]}),s.jsx(FC,{})]}),WC=1e3*60*30,GC=()=>{const e=I(),t=Xe(),n=d(mf),r=d(hf),o=u.useRef(0);u.useEffect(()=>{if(!t)return o.current=window.setInterval(()=>{e(zs())},WC),()=>{t||window.clearInterval(o.current)}},[t,n,r]);const a=()=>{e(zs())};if(!n.length)return null;const i=c=>{switch(c.type){case"shipping":return{severity:"info",icon:s.jsx(gr,{onClick:a})};case"site":return{severity:"warning",icon:s.jsx(Jd,{onClick:a})}}return{}};return s.jsx(qe,{children:s.jsx(v,{spacing:1,sx:{mb:5},children:n.map(c=>s.jsx(_,{...i(c),children:s.jsx(j,{children:c.message})},c.id))})})};function VC({onDone:e}){const t=I();return vd({onSuccess:o=>{o?.credential&&t($t(o.credential)),e&&e()},onError:()=>{e&&e()},use_fedcm_for_prompt:!0}),s.jsx("span",{"data-logged-in":!1})}function YC(){const e=I(),t=d(Ih),[n,r]=u.useState(!1),[o,a]=u.useState(t),[i,c]=u.useState(o[0]??null);u.useEffect(()=>{a(t)},[t]),u.useEffect(()=>{o.length&&!i?(c(o[0]??null),a(p=>p.slice(1)),r(!0)):o.length&&i&&n&&r(!1)},[o,i,n]);const l=(p,f)=>{f!=="clickaway"&&(r(!1),e(Ph()))},m=()=>{r(!1),c(null)};return s.jsx(Wi,{open:n,autoHideDuration:5e3,onClose:l,slotProps:{transition:{onExited:m}},message:i?.message??null,action:s.jsx(le,{"aria-label":"close",color:"inherit",sx:{p:.5},onClick:l,children:s.jsx(rn,{})})})}function qC(){const e=I(),t=d(Uh),n=d(Mh),r=d(_h),[o,a]=u.useState(!1),i=()=>{e($s({accepted:t?["functional","preferences"]:["functional","preferences","analytics","marketing"],rejected:t?["analytics","marketing"]:[]}))},c=()=>{e(Bh())};return r||n?null:s.jsxs(Ri,{open:!0,anchor:"bottom",variant:"permanent",children:[s.jsxs(P,{container:!0,spacing:2,sx:{padding:2,alignItems:"center"},children:[s.jsxs(P,{size:{xs:12,lg:"grow"},children:[s.jsx(j,{sx:{mb:1},children:"This website uses cookies and similar technologies to enable site functionality as well as for analytics, personalization and targeted advertising."}),t&&s.jsxs(j,{sx:{mb:1},component:"p",children:["We have detected a"," ",s.jsx("strong",{children:"Global Privacy Control"})," ","signal from your browser and have automatically opted you out of our marketing and analytics cookies."]}),s.jsxs(j,{sx:{fontWeight:700},color:"chumsRed",children:["Chums does not sell or rent personal information to third parties. See ",s.jsx(X,{component:Q,to:"/pages/privacy-policy",children:"Privacy Policy"})," for more information."]})]}),s.jsx(P,{size:{xs:5,lg:"auto"},children:s.jsx(N,{onClick:()=>a(!0),children:"Cookie Settings"})}),s.jsx(P,{size:{xs:5,lg:"auto"},children:s.jsx(N,{variant:"contained",color:"chumsGrey",onClick:i,children:"Accept Cookies"})}),s.jsx(P,{size:{xs:2,lg:"auto"},children:s.jsx(le,{onClick:c,children:s.jsx(rn,{})})})]}),s.jsx(nd,{open:o,onClose:()=>a(!1)})]})}const ZC=()=>{const e=d(H);return s.jsxs(s.Fragment,{children:[s.jsx(PC,{}),s.jsxs(b,{component:"main",sx:{marginTop:"100px",marginBottom:"3rem"},children:[s.jsx(GC,{}),s.jsxs(qe,{maxWidth:"xl",children:[e&&s.jsx(qx,{}),!e&&s.jsx(VC,{}),s.jsx(Jl,{}),s.jsx(fn,{children:s.jsx(Bo,{})})]}),s.jsx(YC,{})]}),s.jsx(zC,{}),s.jsx(qC,{})]})},pr=({className:e,children:t})=>s.jsx(P,{size:{xs:6,sm:4,md:3},className:e,sx:{marginBottom:5,textAlign:"center"},children:t}),ui=[80,250,400,800,2048],JC=te("img")`
    max-width: 100%;
    width: 100%;
    height: auto;

`,Yt=({filename:e,preferredSize:t,src:n,alt:r,srcSet:o,sizes:a,...i})=>{if(e=e?.replace(/\s/g,"%20"),n||(n=`/images/products/${i.width??800}/${e}`),!o){const[c=2048]=ui.filter(l=>l>=(t??2048));o=ui.filter(l=>l<=c).map(l=>`/images/products/${l}/${e} ${l}w`).join(",")}return s.jsx(JC,{src:n,alt:r,srcSet:o,sizes:a,...i})},XC=({title:e,keyword:t,description:n,imageUrl:r,className:o=""})=>s.jsxs(pr,{className:o,children:[s.jsxs(X,{component:Q,to:`/products/${t}`,underline:"hover",children:[s.jsx(Yt,{filename:r,title:e,alt:e,preferredSize:400}),s.jsx("div",{className:"product-title",children:e})]}),s.jsx("div",{className:"description",children:s.jsx(it,{html:n})})]}),QC=te(Wt)(()=>({width:"auto",borderRadius:0,height:"16px",lineHeight:"16px",fontWeight:700,"& .MuiChip-label":{fontSize:"75%"}})),ej=e=>{switch(e){case"best-seller":return{backgroundColor:"#f89d67",color:"#000000"};case"upcycled":return{backgroundColor:"#7bb291",color:"#000000"};case"rfid-blocking":return{backgroundColor:"#1f4c7a",color:"#FFFFFF"};case"dome":return{backgroundColor:"#574e1f",color:"#FFFFFF"};case"sublimation":return{backgroundColor:"#101b42",color:"#FFFFFF"};case"heat-transfer":return{backgroundColor:"#b75931",color:"#FFFFFF"};case"screen-printing":return{backgroundColor:"#dbb687",color:"#000000"};case"new-colors":return{backgroundColor:"var(--chums-red)",color:"#FFFFFF"};case"new":return{backgroundColor:"var(--chums-red)",color:"#FFFFFF"}}return{}},tj=e=>{switch(e){case"best-seller":return"BEST SELLER";case"upcycled":return"UPCYCLED";case"rfid-blocking":return"RFID-BLOCKING";case"dome":return"3D DOME";case"sublimation":return"SUBLIMATION";case"heat-transfer":return"HEAT TRANSFER";case"screen-printing":return"SCREEN PRINTING";case"new-colors":return"NEW COLORS";case"new":return"NEW"}return e};function ze({feature:e,label:t,sx:n,...r}){n||(n={});const o=ej(e);return t||(t=tj(e)),s.jsx(QC,{label:t,...r,size:"small",sx:{...o,...n}})}const sj=({season_teaser:e,season_active:t,...n})=>!!t&&!!e?s.jsxs(v,{direction:"row",spacing:2,alignItems:"center",justifyContent:"center",...n,children:[s.jsx(ze,{feature:"new"}),s.jsx("span",{children:e})]}):null,mi={sm:"SMALL",md:"MEDIUM",lg:"LARGE"},nj=ys.div`
    display: inline-block;
    width: 16px;
    height: 16px;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;

    &.size--sm {
        background-image: url('/css/size-icon-sm.svg');
    }

    &.size--md {
        background-image: url('/css/size-icon-md.svg');
    }

    &.size--lg {
        background-image: url('/css/size-icon-lg.svg');
    }
`,rj=({size:e})=>mi[e]?s.jsxs(b,{sx:ks,children:["Fits size: ",mi[e]]}):null,oo=({size:e})=>s.jsxs(b,{style:{height:"32px",display:"flex",alignItems:"center"},children:[s.jsx(nj,{className:`size--${e}`}),s.jsx(rj,{size:e})]}),oj=({size:e,spacing:t})=>{const n=e.split(",").map(r=>r.trim()).map(r=>r.toLowerCase());return!e||!n.length?null:s.jsxs(v,{direction:"row",spacing:t??2,children:[(n.includes("s")||n.includes("sm"))&&s.jsx(oo,{size:"sm"}),(n.includes("m")||n.includes("md"))&&s.jsx(oo,{size:"md"}),(n.includes("l")||n.includes("lg"))&&s.jsx(oo,{size:"lg"})]})};function rd({product:e,spacing:t,direction:n,flexWrap:r,justifyContent:o,alignItems:a,isNew:i,...c}){return s.jsxs(v,{spacing:t??1,useFlexGap:!0,direction:n??"row",flexWrap:r??"wrap",justifyContent:o??"center",alignItems:a??"center",...c,children:[!!e.additionalData?.size&&s.jsx(oj,{size:e.additionalData.size,spacing:1}),i&&s.jsx(ze,{feature:"new"}),e.additionalData?.best_seller&&s.jsx(ze,{feature:"best-seller"}),e.canScreenPrint&&s.jsx(ze,{feature:"screen-printing"}),e.canDome&&s.jsx(ze,{feature:"dome"}),!!e.additionalData?.upcycled&&s.jsx(ze,{feature:"upcycled"}),!!e.additionalData?.heatTransfer&&s.jsx(ze,{feature:"heat-transfer"}),!!e.additionalData?.sublimation&&s.jsx(ze,{feature:"sublimation"}),!!e.additionalData?.rfidBlocking&&s.jsx(ze,{feature:"rfid-blocking"}),!!e.additionalData?.newColors&&s.jsx(ze,{feature:"new-colors"})]})}function _o({categoryKeyword:e,productKeyword:t,children:n,...r}){if(!t)return s.jsx(s.Fragment,{children:n});const o=e?`/products/${e}/${t}`:`/products/${t}`;return s.jsx(X,{component:Q,to:o,underline:"hover",...r,children:n})}const aj=({title:e,description:t,product:n,imageUrl:r,className:o=""})=>{const a=r||Xs(n.image,n.defaultColor);return s.jsxs(pr,{className:o,children:[s.jsxs(_o,{categoryKeyword:n.defaultCategoryKeyword,productKeyword:n.keyword,children:[s.jsx(Yt,{filename:a,title:e,alt:e,preferredSize:400}),s.jsx("div",{className:"product-title",children:e}),s.jsx(rd,{product:n}),s.jsx(sj,{season_teaser:n.season_teaser,season_active:n.season_active,sx:{justifyContent:"center"}})]}),s.jsx("div",{className:"description",children:s.jsx(it,{html:t})})]})},pi="(max-width: 600px) 168px, (max-width: 900px) 268px, 354px";function ij({item:e}){return Gu(e)?s.jsx(XC,{title:e.title,description:e.description,keyword:e.category.keyword,imageUrl:e.imageUrl}):hc(e)?s.jsx(aj,{title:e.title,description:e.description,product:e.product,imageUrl:e.imageUrl}):Ba(e)&&e.urlOverride?s.jsxs(pr,{className:e.className,children:[s.jsxs(X,{component:Q,to:e.urlOverride,children:[!!e.imageUrl&&s.jsx(Yt,{filename:e.imageUrl,alt:e.title,loading:"lazy",sizes:pi,width:400,height:400}),s.jsx("div",{className:"product-title",children:e.title})]}),s.jsx("div",{className:"description",children:s.jsx(it,{html:e.description})})]}):Ba(e)?s.jsxs(pr,{className:e.className,children:[!!e.imageUrl&&s.jsx(Yt,{filename:e.imageUrl,alt:e.title,loading:"lazy",sizes:pi,width:400,height:400}),s.jsx("div",{className:"product-title",children:e.title}),s.jsx("div",{className:"description",children:s.jsx(it,{html:e.description})})]}):Wu(e)?s.jsxs(P,{size:12,className:e.className,children:[s.jsx(j,{variant:"h3",component:"h3",sx:{textAlign:"center"},children:e.sectionTitle}),!!e.sectionDescription&&s.jsx(j,{variant:"subtitle1",sx:{textAlign:"center"},children:e.sectionDescription})]}):null}function cj({keyword:e}){const t=I(),n=d(Th),r=d(Nh);if(u.useEffect(()=>{t(Ln(e))},[e]),u.useEffect(()=>{r&&Ju(r)},[r]),!r)return s.jsx(b,{children:n&&s.jsx(z,{variant:"indeterminate"})});const{title:o,lifestyle:a,pageText:i}=r,c=r.children.filter(l=>!!l.status).sort((l,m)=>l.priority-m.priority);return s.jsxs(b,{children:[s.jsx(re,{documentTitle:o}),!!a&&s.jsx("img",{src:a,alt:"lifestyle image","aria-hidden":"true",style:{width:"100%"}}),s.jsx(j,{component:"h1",variant:"h1",sx:{textAlign:"center",mb:3},children:o}),n&&s.jsx(z,{variant:"indeterminate"}),!!i&&s.jsx(it,{html:i}),s.jsx(P,{container:!0,spacing:3,justifyContent:c.length<4?"center":"start",sx:{mt:3},children:c.filter(l=>!!l.status).sort((l,m)=>l.priority-m.priority).map(l=>s.jsx(ij,{item:l},l.id))})]})}const lj=te(Wt)`
    height: 1rem;
    font-size: 0.625rem;
    border-radius: 6px;
`,dj=({bgColor:e,textColor:t,color:n,label:r,sx:o,...a})=>(e&&!t&&(t=Xd(e,"#FFF")>4.5?"#FFF":"#000"),s.jsx(lj,{label:r,color:n,sx:{...o,color:t,backgroundColor:e,mr:"2px"},...a,size:"small"})),uj=te(N)`
    width: 48px;
    min-width: 48px;
    padding: 3px;
    margin: 3px;
`,mj=te(dj)`
    background-color: var(--chums-red);
    color: #FFF;
    margin-top: 1px;
    border-radius: 0;
    width: 100%;
    height: 0.75rem;
`,pj=te(b)`
    width: 42px;
    height: 42px;
    display: block;
    background-size: contain;
`,hj=({color:e,itemQuantity:t,swatchFormat:n="?",active:r=!1,newColor:o,onClick:a})=>{const i=pc(`color-swatch color-swatch--${n}`,e?.swatchCode||e?.code),c=()=>{a(e?.code??null)};return s.jsx(uj,{variant:r?"outlined":"text",className:"swatch",onClick:c,children:s.jsxs(v,{direction:"column",children:[s.jsx(b,{className:"color-code",children:e?.code}),!!t&&s.jsxs(b,{className:"color-qty",children:["x",t]}),s.jsx(pj,{className:i}),o&&s.jsx(mj,{label:"New"})]})})},fj=te(b)`
    display: flex;
    flex-direction: row;
    justify-content: center;
    flex-wrap: wrap;
    align-items: flex-start;
`,gj=()=>{const e=I(),t=d(ht),n=d(He),r=d(Tl),[o,a]=wi(),[i,c]=u.useState([]),[l,m]=u.useState(t?.additionalData?.swatch_format||"?");u.useEffect(()=>{const f=o.get("sku");f&&Ot(t)&&n?.itemCode!==f&&n&&f!==n.itemCode&&a(g=>(g.set("sku",n.itemCode),g),{replace:!0})},[o,t,n]),u.useEffect(()=>{t&&(m(t?.additionalData?.swatch_format||"?"),vs(t)?c(t.mix.items):Ot(t)?c(t.items.filter(f=>f.status)):c([]))},[t]),u.useEffect(()=>{em(t,n)},[t,n]);const p=f=>{f&&e(Nl(f))};return!t||!i.length?null:s.jsxs(s.Fragment,{children:[s.jsxs(b,{children:[s.jsxs(j,{variant:"body1",sx:{mr:3,display:"inline-block"},children:[t.sellAs===ra&&s.jsx("span",{children:"Selected Color:"}),t.sellAs===dc&&s.jsx("span",{children:"Color:"})]}),s.jsx(j,{variant:"body1",sx:{fontWeight:700,display:"inline-block"},children:n?.colorName})]}),s.jsx(fj,{children:i.map(f=>s.jsx(hj,{color:f.color??null,itemQuantity:f.itemQuantity,swatchFormat:f?.additionalData?.swatch_code||l,active:r===f.color?.code,newColor:f.additionalData?.season?.active,onClick:p},f.id))})]})},Sn=te("span")`
    margin-left: 5px;
    font-size: 12px;
    font-weight: 600;
`,xj=({priceCodeRecord:e=null,priceLevel:t=""})=>{if(!e?.ItemCode&&!t)return null;if(e?.ItemCode)switch(e?.PricingMethod){case"P":return s.jsxs(Sn,{children:["(Negotiated Discount: ",D(e.DiscountMarkup1).format("$0.00"),")"]});case"D":return s.jsxs(Sn,{children:["(Negotiated Discount: ",D(e.DiscountMarkup1/100).format("0%"),")"]});case"O":return s.jsxs(Sn,{children:["(Negotiated Price: ",D(e.DiscountMarkup1).format("$0.00"),")"]});default:return null}return Fa[t]?s.jsxs(Sn,{children:["(",Fa[t]," pricing)"]}):null},os=te(h)`
    font-weight: 400;
    font-size: 16px;
    color: 'inherit';
`,as=te(h)`
    font-weight: 600;
    font-size: 16px;
    color: 'inherit';
`,Cj=({cartItem:e,msrp:t})=>{const n=d(pa),r=hr();if(!e||!e.itemCode)return null;const o=new w(e.quantity??1).times(e.salesUMFactor??1).times(new w(e.msrp??0).sub(new w(e.price??0).div(e.salesUMFactor??1))),a=new w(e.quantityAvailable??0).div(e.salesUMFactor??1);return s.jsxs(b,{sx:{mt:3},children:[s.jsx(Gt,{in:!!e.message,children:s.jsx(_,{severity:"info",children:e.message})}),s.jsx(ct,{size:"small",children:s.jsxs(lt,{children:[(!t||t.length>1||(e.salesUMFactor??1)>1)&&new w(e.msrp??0).gt(0)&&s.jsxs(U,{children:[s.jsx(os,{component:"th",scope:"row",align:"left",children:"MSRP"}),s.jsxs(as,{align:"right",children:["$ ",D(e.msrp??0).format("0,0.00")," (",e.stdUM,")"]})]}),s.jsxs(U,{children:[s.jsxs(os,{component:"th",scope:"row",align:"left",children:["Your Price",s.jsx(xj,{priceCodeRecord:e.priceCodeRecord??null,priceLevel:e.priceLevel})]}),s.jsxs(as,{align:"right",children:["$ ",D(e.price).format("0,0.00")," (",e.salesUM,")"]})]}),s.jsxs(U,{children:[s.jsx(os,{component:"th",scope:"row",align:"left",children:"Ext Price"}),s.jsxs(as,{align:"right",children:["$ ",D(new w(e.price??0).times(e.quantity)).format("0,0.00")]})]}),s.jsxs(U,{children:[s.jsx(os,{component:"th",scope:"row",align:"left",children:"ROI"}),s.jsxs(as,{align:"right",children:["$ ",D(o.toString()).format("0,0.00")]})]}),s.jsxs(U,{className:"item-code",children:[s.jsx(os,{component:"th",scope:"row",align:"left",children:"SKU"}),s.jsx(as,{align:"right",children:e.itemCode})]}),n&&s.jsxs(U,{sx:{color:(e.quantityAvailable??0)<=0?r.palette.error.main:void 0},children:[s.jsx(os,{component:"th",scope:"row",align:"left",sx:{color:"inherit"},children:"Available Today"}),s.jsxs(as,{align:"right",sx:{color:"inherit"},children:[D(a.toString()).format("0,0")," (",e.salesUM,")"]})]})]})}),new w(e.quantity??1).gt(a)&&s.jsx(_,{severity:"warning",children:"Product is not available for immediate delivery."})]})},od=()=>{const e=d(q),t=d(je),n=d(ba),r=d(H);return!e||!r||!n||t||e?.TaxSchedule?null:s.jsxs(_,{severity:"error",children:[s.jsx("strong",{className:"me-1",children:"Warning:"}),"Missing Tax Schedule. Please contact",s.jsx("a",{href:`mailto:cs@chums.com?subject=${e.ARDivisionNo}-${e.CustomerNo}${encodeURIComponent(" Missing Tax Schedule (B2B)")}`,rel:"noreferrer",target:"_blank",children:"customer service."})]})},hi=({fallback:e,children:t})=>!d(H)||!t?e??null:s.jsx(fn,{children:t}),ad="(max-width: 600px) 456px, (max-width: 900px) 755px, (max-width: 1200px) 559px, (max-width: 1536px) 755px, 800px";function jj({image:e}){const[t,n]=u.useState(e.image.replace(/\s/g,"%20"));return u.useLayoutEffect(()=>{n(e.image.replace(/\s/g,"%20"))},[e]),s.jsx(b,{children:s.jsx(Yt,{filename:t,alt:e.altText,loading:"eager",sizes:ad,width:800,height:800})})}function yj({currentImage:e,images:t,onSelectImage:n}){return s.jsx(v,{direction:"column",useFlexGap:!0,flexWrap:"wrap",spacing:2,sx:{justifyContent:"center"},children:t.sort((r,o)=>r.priority-o.priority).map(r=>s.jsx(ki,{elevation:e.image===r.image?1:0,children:s.jsx(b,{sx:{width:"80px"},onClick:()=>n(r),children:s.jsx(Yt,{filename:r.image,preferredSize:80,alt:r.altText,width:80,height:80,loading:"lazy"})})},r.id))})}function ao({image:e,colorCode:t,altText:n}){return{id:0,productId:0,image:Xs(e,t),altText:n??"",status:!0,priority:-1}}function fi({selectedItem:e,altImages:t}){if(!t||!t.length||!e)return[];const n=`#${e}`,r=/^#[A-Z0-9]+/i;return t.filter(o=>!!o.status).filter(o=>!r.test(o.altText)||o.altText.includes(n))}function Sj(e){const[t,n]=u.useState(ao(e)),[r,o]=u.useState([ao(e),...fi(e)]),a=u.useCallback(i=>{i.image!==t.image&&n(i)},[t]);return u.useEffect(()=>{const i=ao(e);n(i),o([i,...fi(e)])},[e]),r.length<2?s.jsx(Yt,{filename:t.image.replace(/\s/g,"%20"),alt:t.altText,loading:"eager",sizes:ad,width:800,height:800}):s.jsxs(v,{direction:"row",spacing:2,children:[s.jsx(jj,{image:t}),s.jsx(yj,{images:r,currentImage:t,onSelectImage:a})]})}const vj=()=>{const e=d(He),t=d(Aa),n=d(un),r=d(Tf),o=d(Nf);return!e||!r||!r.filename?null:s.jsxs(s.Fragment,{children:[s.jsx(Sj,{image:r.filename,selectedItem:r.itemCode??"",loading:t,altImages:o,altText:n?.name}),s.jsx("link",{rel:"preload",as:"image",imageSrcSet:o.map(a=>`/images/products/800/${a.image} 800w`).join(", ")})]})},gi=()=>{const e=d(un),t=d(ht),n=!!e?.season?.product_teaser&&e?.season?.active||!!t?.season?.product_teaser&&t?.season?.active;if(!e)return null;const r=e?.name+(e?.additionalData?.subtitle?` - ${e.additionalData.subtitle}`:"");return s.jsxs(s.Fragment,{children:[s.jsx(re,{documentTitle:r}),s.jsxs("div",{className:"product-title",children:[s.jsx(j,{component:"h1",variant:"h1",children:e.name}),!!e.additionalData?.subtitle&&s.jsx(j,{component:"h2",variant:"h2",sx:{fontSize:24},children:e.additionalData.subtitle||""}),s.jsx(rd,{product:e,isNew:n,justifyContent:"flex-start",sx:{mb:2}})]})]})},wj=()=>{const e=d(bf),t=d(If),n=d(He),r=d(ht),o=n?.itemCode??r?.itemCode??null;return s.jsxs(v,{direction:"row",justifyContent:"space-between",children:[s.jsxs(b,{children:[s.jsx(j,{variant:"caption",sx:{mr:2},component:"span",children:"SKU"}),s.jsx(j,{variant:"body1",component:"span",sx:{fontWeight:"600"},children:o})]}),s.jsxs(b,{children:[s.jsx(j,{variant:"caption",sx:{mr:2},component:"span",children:"MSRP"}),s.jsxs(j,{variant:"body1",component:"span",sx:{fontWeight:"600"},children:["$ ",e.map(a=>D(a).format("0.00")).join(" - ")," ","(",t,")"]})]})]})},bj=()=>{const e=d(He),t=Et(e)&&e.season?.active&&!(e.season?.product_available||e.seasonAvailable);return s.jsx(Gt,{in:t,children:s.jsxs(_,{severity:"info",sx:{mb:2},children:[s.jsx(b,{component:"strong",sx:{mr:2},children:"Pre-Season Order:"})," ",e?.season?.preSeasonMessage]})})},Ij=()=>{const e=d(je),t=d(se),n=d(Ce),r=hr(),o=Ue();if(t||e)return null;const a=n?`/profile/${n.id}`:"/profile";return s.jsx(_,{severity:"warning",children:s.jsx(X,{component:Q,to:a,state:{returnTo:o.pathname},sx:{color:r.palette.warning.main},children:"Please select a customer."})})},Pj=te(N)(()=>({width:"100%"})),Tj=({variant:e,selected:t,direction:n,spacing:r,onClick:o})=>{const a=d(Fr),c=d(H)?br(e.product,a):wr(e.product),l=aa(e.product);return s.jsx(Pj,{variant:t?"contained":"outlined",onClick:()=>o(e),children:s.jsxs(v,{direction:n??{xs:"row",sm:"column"},spacing:r??{xs:2,sm:0},alignItems:"center",children:[s.jsx(b,{children:s.jsx(j,{variant:"variantButtonText",children:e.title})}),s.jsx(b,{children:s.jsxs(j,{variant:"variantButtonPrice",children:["$ ",c.map(m=>D(m).format("0.00")).join(" - ")," ","(",l||"EA",")"]})})]})})},xi=e=>e.filter(t=>t.product?.status).sort((t,n)=>t.priority-n.priority);function Aj(){const e=I(),t=d(Pf),n=d(Af),[r,o]=u.useState(xi(n?.variants??[])),[a,i]=wi();u.useEffect(()=>{const l=a.get("sku");if(l&&n&&n.itemCode!==l){let m;const p=r.filter(f=>f.product?.itemCode===l||f.product&&Ot(f.product)&&f.product.items.filter(g=>g.itemCode===l).length>0);if(p.length>1?[m]=p.filter(f=>f.id===t):m=p[0],m){e(or({...m,preferredItem:l}));return}}},[a,n,r]);const c=u.useCallback(l=>{if(!l||!l.id||!n)return;l.product&&vs(l.product)?tm(n,l.product):sm(l.product?.itemCode??l.id.toString());const m=new URLSearchParams(a);l.product?.itemCode?m.set("sku",l.product?.itemCode):m.delete("sku"),i(m,{replace:!0}),e(or(l))},[n]);return u.useEffect(()=>{o(xi(n?.variants??[]))},[n]),r.length<=1?null:s.jsx(P,{container:!0,spacing:1,className:"variant-buttons-container",direction:{xs:r.length>2?"row":"column",sm:"row"},justifyContent:r.length===2?"center":"flex-start",children:r.map(l=>s.jsx(P,{size:{xs:r.length>2?4:12,sm:3,md:4},children:s.jsx(Tj,{onClick:c,variant:l,direction:{xs:r.length>2?"column":"row",sm:"column"},spacing:{xs:r.length<=2?2:0,sm:0},selected:l.id===t})},l.id))})}const Nj=ys.div`
    iframe {
        border: none;
        max-width: 100%;
        width: 100%;
        aspect-ratio: 16/9;
        height: auto;
    }
`,Ej=({keyword:e})=>{const t=Xe(),n=I(),r=d(un),o=d(ht),a=d(Aa),i=d(He),c=d(q),l=Ue(),[m,p]=u.useState(null),f=u.useRef(0),[g,C]=u.useState(1);return u.useEffect(()=>{n(_n(e))},[e]),u.useEffect(()=>{C(1),Qu(r)},[r]),u.useEffect(()=>{C(1)},[o?.salesUM]),u.useEffect(()=>{p(null)},[i]),u.useEffect(()=>{if(!t)return m&&(f.current=window.setTimeout(()=>{p(null)},5e3)),()=>{window.clearTimeout(f.current)}},[t,m]),u.useEffect(()=>{if(l?.state?.variant&&r&&Yn(r)&&o?.keyword!==l.state.variant){const[y]=r.variants.filter(x=>x.product?.keyword===l.state.variant);console.debug(l.state.variant,y.product?.keyword),y&&n(or(y)),delete l.state.variant,tn(l.pathname)}},[l,o,r]),s.jsx(b,{className:Ae("product-page",{loading:a}),children:s.jsx(Nj,{children:s.jsxs(P,{container:!0,spacing:5,children:[s.jsx(P,{size:12,sx:{display:{xs:"block",md:"none"}},children:s.jsx(gi,{})}),s.jsx(P,{size:{xs:12,md:6,lg:7},children:s.jsx(vj,{})}),s.jsxs(P,{size:{xs:12,md:6,lg:5},children:[s.jsx(b,{sx:{display:{xs:"none",md:"block"}},children:s.jsx(gi,{})}),s.jsx(wj,{}),Yn(r)&&s.jsx(Aj,{}),s.jsx(gj,{}),(!Et(i)||!i.itemCode)&&!a&&s.jsx(_,{severity:"info",children:"Please select a color"}),!!o&&!o?.availableForSale&&s.jsx(_,{severity:"warning",children:s.jsxs("span",{children:[s.jsx("strong",{children:o?.name})," is not available for sale."]})}),!o?.season&&!!o?.dateAvailable&&s.jsx(_,{severity:"warning",children:o.dateAvailable}),s.jsx(hi,{fallback:s.jsx(_,{severity:"warning",title:"",children:"Please log in to see prices and availability"}),children:s.jsx(Ij,{})}),s.jsx(bj,{}),s.jsxs(hi,{children:[s.jsx(od,{}),Kt(o)&&Et(i)&&la(c)&&o.availableForSale&&s.jsx(Hr,{quantity:g,cartItem:i,setActiveCart:!0,unitOfMeasure:i.salesUM??"EA",disabled:!c?.TaxSchedule,onChangeQuantity:C,comment:"",afterAddToCart:p}),s.jsx(Gt,{in:!!m,children:s.jsx(_,{severity:"info",onClose:()=>p(null),children:m})}),s.jsx(Cj,{cartItem:i,msrp:[o?.msrp]})]}),s.jsx("hr",{}),Kt(r)&&!!r.description&&s.jsx("div",{className:"mt-3",children:s.jsx(it,{html:r.description})}),Kt(r)&&!!r.details&&s.jsxs("div",{className:"mt-3",children:[s.jsx("h3",{children:"Features"}),s.jsx(it,{html:r.details})]})]})]})})})},vn=()=>{const e=I(),t=d(Ur),n=d(yl),{category:r,product:o}=Ye(),a=xe(),[i,c]=u.useState(null);return u.useEffect(()=>{!t.length&&!n&&e(Mn())},[]),u.useEffect(()=>{let l=null;if(r&&!o){const[m]=t.filter(p=>p.keyword===r);m&&(l={...m})}else if(o){const[m]=t.filter(p=>p.keyword===o);m&&(l={...m})}if(!l){a("/products/all",{replace:!0});return}if(l.redirect_to_parent>0){const[m]=t.filter(p=>p.pagetype==="product").filter(p=>p.id===l.redirect_to_parent);if(console.debug(l,m),m){const p=$(jc,{category:m.parent?m.parent:m.keyword,product:m.parent?m.keyword:""}),f={variant:l.keyword};a(p,{state:f,replace:!0});return}}c(l)},[r,o,t]),s.jsx(fn,{children:s.jsxs(b,{children:[n&&s.jsx(z,{variant:"indeterminate",title:"Loading Keywords"}),i?.pagetype==="category"&&s.jsx(cj,{keyword:i.keyword}),i?.pagetype==="product"&&s.jsx(Ej,{keyword:i.keyword})]})})},id=({checked:e,onChange:t,readOnly:n})=>s.jsx(Gn,{children:s.jsx(qs,{control:s.jsx(gs,{checked:e??!1,onChange:t,slotProps:{input:{readOnly:n}}}),label:"Show on CHUMS.COM Store Map?"})}),Ho=({address:e,className:t})=>s.jsxs("address",{className:Ae(t),children:[s.jsx("div",{children:e.CustomerName??""}),!!e.AddressLine1&&s.jsx("div",{children:e.AddressLine1}),!!e.AddressLine2&&s.jsx("div",{children:e.AddressLine2}),!!e.AddressLine3&&s.jsx("div",{children:e.AddressLine3}),s.jsxs("div",{children:[e.City??"",","," ",e.State??""," ",e.ZipCode??""]}),!["USA","US"].includes((e.CountryCode??"").toUpperCase())&&s.jsx("div",{children:e.CountryCode??""})]}),Ra=({type:e,onClick:t,disabled:n,...r})=>{const o=I(),a=d(q),i=()=>{o(G(a))};return s.jsx(N,{type:e??"button",variant:"text",onClick:t??i,disabled:n??!a,...r,children:"Reload"})},cd=({account:e,readOnly:t,onChange:n})=>{const r=o=>a=>{n({[o]:a.target.value})};return s.jsxs(v,{direction:"row",spacing:2,children:[s.jsx(E,{label:"Telephone",variant:"filled",fullWidth:!0,size:"small",type:"telephone",onChange:r("TelephoneNo"),value:e.TelephoneNo??"",slotProps:{htmlInput:{maxLength:17,autoComplete:"tel",readOnly:t}}}),s.jsx(E,{label:"Extension",variant:"filled",fullWidth:!0,size:"small",type:"telephone",onChange:r("TelephoneExt"),value:e.TelephoneExt??"",slotProps:{htmlInput:{maxLength:17,autoComplete:"tel-extension",readOnly:t}}})]})},Oj=()=>{const e=I(),t=d(q),n=d(je),r=d(Ic),o=d(Ut),[a,i]=u.useState(t??null),[c,l]=u.useState(t?.EmailAddress?.split(";")?.map(x=>x.trim())??[""]);u.useEffect(()=>{la(t)?(i({...t}),l(t?.EmailAddress?.split(";")?.map(x=>x.trim())??[""])):i(null)},[t]);const m=x=>{a&&i({...a,...x,changed:!0})},p=x=>S=>{switch(x){case"Reseller":return m({[x]:S.target.checked?"Y":"N"});default:m({[x]:S.target.value})}},f=x=>S=>{if(!a)return;const O=[...c];O[x]!==void 0&&(O[x]=S.target.value),l(O),i({...a,EmailAddress:O.join(";")})},g=x=>{if(!a)return;const S=c.toSpliced(x+1,0,"");l(S),i({...a,EmailAddress:S.join(";")})},C=x=>{if(a&&c[x]!==void 0){const S=c.filter((O,M)=>M!==x);S.length===0&&S.push(""),l(S),i({...a,EmailAddress:S.join(";")})}},y=x=>{x.preventDefault(),a&&e(nt(a))};return!t||!a?null:o?.billTo?s.jsx(fn,{children:s.jsxs("div",{children:[n&&s.jsx(z,{variant:"indeterminate"}),s.jsxs(P,{container:!0,spacing:2,children:[s.jsx(P,{size:{xs:12,sm:6},children:s.jsx(E,{variant:"filled",label:"Account Number",fullWidth:!0,size:"small",type:"text",value:ke(a)||"",slotProps:{htmlInput:{readOnly:!0}}})}),s.jsxs(P,{size:{xs:12,sm:6},children:[a.ParentCustomerNo&&s.jsxs(s.Fragment,{children:[s.jsx(j,{variant:"subtitle1",component:"h3",children:"Billing Customer"}),s.jsxs(b,{sx:{mb:1},children:[s.jsxs(j,{variant:"h5",sx:{display:"inline",mr:3},children:[a.ParentDivisionNo,"-",a.ParentCustomerNo]}),s.jsx(j,{variant:"h5",sx:{display:"inline",fontWeight:300},children:a.ParentCustomerName})]}),s.jsx(Ho,{address:{CustomerName:"",AddressLine1:a.ParentAddressLine1??"",AddressLine2:a.ParentAddressLine2??"",AddressLine3:a.ParentAddressLine3??"",City:a.ParentCity??"",State:a.ParentState??"",ZipCode:a.ParentZipCode??"",CountryCode:a.ParentCountryCode??""}})]}),!a.ParentCustomerNo&&s.jsx(E,{variant:"filled",label:"Payment Terms",fullWidth:!0,size:"small",type:"text",value:fu(a.TermsCode)?.description??"",slotProps:{htmlInput:{readOnly:!0}}})]})]}),!a.TaxSchedule&&s.jsx(od,{}),s.jsx("hr",{}),s.jsxs(j,{variant:"h3",component:"h3",children:[a.ParentCustomerNo&&s.jsx("span",{children:"Sold-To Contact & Address"}),!a.ParentCustomerNo&&s.jsx("span",{children:"Billing Contact & Address"})]}),s.jsx("form",{onSubmit:y,children:s.jsxs(P,{container:!0,spacing:2,children:[s.jsx(P,{size:{xs:12,sm:6},children:s.jsx(La,{address:a,addressType:"billing",readOnly:!r,onChange:m})}),s.jsx(P,{size:{xs:12,sm:6},children:s.jsxs(v,{direction:"column",spacing:1,children:[s.jsx(id,{checked:a.Reseller==="Y",onChange:p("Reseller"),readOnly:!r}),c.map((x,S)=>s.jsx(E,{variant:"filled",label:"Email Address",fullWidth:!0,size:"small",type:"email",value:x,onChange:f(S),slotProps:{htmlInput:{readOnly:!r,maxLength:250-c.join(";").length},input:{endAdornment:s.jsxs(ye,{position:"end",children:[s.jsx(le,{"aria-label":"Add a new email address",disabled:!x||c.join(";").length>240,onClick:()=>g(S),children:s.jsx(Ei,{})}),s.jsx(le,{"aria-label":"Add a new email address",onClick:()=>C(S),disabled:S===0,children:s.jsx(Oi,{})})]})}}},S)),s.jsx(cd,{account:a,onChange:m,readOnly:!r}),a.changed&&s.jsx(_,{severity:"warning",title:"Hey!",children:"Don't forget to save your changes."}),s.jsxs(v,{direction:"row",spacing:2,sx:{my:3},justifyContent:"flex-end",children:[s.jsx(Ra,{}),s.jsx(N,{type:"submit",variant:"contained",disabled:!r||n,children:"Save"})]})]})})]})})]})}):s.jsxs("div",{children:[s.jsx("h4",{children:"Billing Address"}),s.jsx(Ho,{address:t})]})},Dj={CustomerName:"ShipToName",AddressLine1:"ShipToAddress1",AddressLine2:"ShipToAddress2",AddressLine3:"ShipToAddress3",City:"ShipToCity",State:"ShipToState",CountryCode:"ShipToCountryCode",ZipCode:"ShipToZipCode"},Lj=e=>({CustomerName:e.ShipToName??"",AddressLine1:e.ShipToAddress1,AddressLine2:e.ShipToAddress2,AddressLine3:e.ShipToAddress3,City:e.ShipToCity,State:e.ShipToState,CountryCode:e.ShipToCountryCode,ZipCode:e.ShipToZipCode}),kj=e=>Dj[e],Rj=({address:e,onChange:t,readOnly:n})=>{const r=o=>{const a={};Object.keys(o).forEach(i=>{a[kj(i)]=o[i]??""}),t(a)};return s.jsx(La,{address:Lj(e),addressType:"shipping",onChange:r,readOnly:n})},Mj=e=>{const{ShipToName:t,ShipToAddress1:n,ShipToAddress2:r,ShipToAddress3:o,ShipToCity:a,ShipToState:i,ShipToCountryCode:c,ShipToZipCode:l}=e;return{CustomerName:t??"",AddressLine1:n,AddressLine2:r,AddressLine3:o,City:a,State:i,ZipCode:l,CountryCode:c}},Uj=({address:e,className:t})=>s.jsx(Ho,{address:Mj(e),className:t}),Ci=({value:e,onChange:t,label:n="",inputProps:r})=>s.jsx(s.Fragment,{children:s.jsx(E,{label:n,variant:"filled",fullWidth:!0,size:"small",type:"email",value:e,onChange:t,slotProps:{input:{startAdornment:s.jsx(ye,{position:"start",children:s.jsx(Gi,{})})},htmlInput:{...r}}})}),io=(e,t=";")=>e?e.split(t).map(n=>n.trim()).filter(n=>n!==""):[],Fj=e=>e.map(t=>t.trim()).filter(t=>t!=="").join("; "),_j=({value:e="",allowMultiple:t,maxEmailLength:n=50,maxMultipleLength:r=225,label:o="Email address",required:a,readOnly:i,onChange:c})=>{const[l,m]=u.useState(io(e));u.useEffect(()=>{if(t){m([...io(e),""]);return}m(io(e))},[e]);const p=f=>g=>{if(!t)return c({EmailAddress:g.target.value});if(l[f]===void 0)return;const C=[...l];C[f]=g.target.value,c({EmailAddress:Fj(C)})};return t?s.jsxs(s.Fragment,{children:[l.map((f,g)=>{const C=l.filter(x=>x!==f).reduce((x,S)=>x+S.length,0),y=Math.min(n,Math.max(r-C,f.length));return s.jsx(Ci,{label:o,value:f,inputProps:{readOnly:i,maxLength:y,required:a&&g===0},onChange:p(g)},g)}),s.jsxs(Vi,{children:["Characters remaining: ",r-e.length]})]}):s.jsx(Ci,{label:o,inputProps:{readOnly:i,maxLength:n,required:a},value:e??"",onChange:p(0)})},ld=({shipToCode:e})=>{const t=d(Ia);return e!==t?.ShipToCode?null:s.jsx(Zs,{title:"Default Ship-To Location",children:s.jsx(gr,{})})},Hj=({shipTo:e,disabled:t})=>{const n=I(),r=d(Ia),o=d(Ut),a=async()=>{o?.canSetDefaultShipTo&&e&&e.ShipToCode!==r?.ShipToCode&&(await n(Tn(e.ShipToCode)),n(G(e)))};return e?s.jsxs(s.Fragment,{children:[r?.ShipToCode!==e.ShipToCode&&s.jsx(N,{type:"button",variant:"outlined",startIcon:s.jsx(gr,{}),disabled:!o?.canSetDefaultShipTo||e.changed||t||e.ShipToCode===r?.ShipToCode||!o?.billTo,onClick:a,children:"Set as default delivery location"}),r?.ShipToCode===e.ShipToCode&&s.jsxs(v,{direction:"row",spacing:2,alignItems:"center",children:[s.jsx(ld,{shipToCode:e.ShipToCode}),s.jsx(j,{variant:"body1",children:"Default delivery location"})]})]}):null},Bj=()=>{const e=I(),t=d(ts),n=d(je),r=d(Ic),o=d(kr),a=Ye(),[i,c]=u.useState(null),l=xe(),m=!r;u.useEffect(()=>{if(!n){const[y]=t.filter(x=>x.ShipToCode===a.shipToCode);c(y??null),o||e(Bc(y?.ShipToCode??null))}},[t,a,n,o]);const p=y=>{y.preventDefault(),!(!i||!r)&&e(rt(i))},f=y=>{i&&c({...i,...y,changed:!0})},g=y=>x=>{switch(y){case"Reseller":return f({[y]:x.target.checked?"Y":"N"});default:f({[y]:x.target.value})}},C=()=>{l($("/account/:customerSlug/delivery",{customerSlug:Ee(i)}))};return r?s.jsxs("div",{children:[n&&s.jsx(z,{variant:"indeterminate"}),i&&s.jsxs("form",{onSubmit:p,children:[s.jsxs(P,{container:!0,spacing:2,alignItems:"center",children:[s.jsx(P,{size:{xs:12,sm:6},children:s.jsx(E,{variant:"filled",label:"Location Name",fullWidth:!0,size:"small",type:"text",value:i.ShipToName??"",onChange:g("ShipToName"),slotProps:{htmlInput:{readOnly:m}}})}),s.jsxs(P,{size:{xs:12,sm:6},style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsx(E,{variant:"filled",label:"Location Code",size:"small",type:"text",value:i.ShipToCode??"",onChange:g("ShipToCode"),slotProps:{htmlInput:{readOnly:!0}}}),s.jsx(Hj,{shipTo:i,disabled:m||!o})]})]}),s.jsx("hr",{}),s.jsxs(P,{container:!0,spacing:2,children:[s.jsx(P,{size:{xs:12,sm:6},children:s.jsx(Rj,{address:i,readOnly:m,onChange:f})}),s.jsxs(P,{size:{xs:12,sm:6},children:[s.jsxs(v,{direction:"column",spacing:2,children:[s.jsx(id,{checked:i.Reseller==="Y",onChange:g("Reseller"),readOnly:m}),s.jsx(_j,{label:"Email Address",readOnly:!r,value:i.EmailAddress,onChange:f}),s.jsx(cd,{account:i,onChange:f,readOnly:!r}),i.changed&&s.jsx(_,{severity:"warning",title:"Hey!",children:"Don't forget to save your changes."})]}),s.jsxs(v,{direction:"row",spacing:2,sx:{my:3},justifyContent:"flex-end",children:[s.jsx(N,{type:"button",onClick:C,children:"Cancel"}),s.jsx(Ra,{}),s.jsx(N,{type:"submit",variant:"contained",disabled:m||n,children:"Save"})]})]})]})]})]}):s.jsxs("div",{children:[s.jsx("h4",{children:"Delivery Address"}),n&&s.jsx(z,{variant:"indeterminate"}),i&&s.jsx(Uj,{address:i})]})},Kj=({accountType:e})=>{switch(e){case 1:return s.jsx(Yi,{fontSize:"small"});case 2:return s.jsx(Qd,{fontSize:"small"});case 4:return s.jsx(Zo,{fontSize:"small"})}return s.jsx(eu,{fontSize:"small"})},$j=({billTo:e,shipToCode:t,accountType:n})=>{if(e)return s.jsx(Zs,{title:"Complete Account",children:s.jsx(qi,{fontSize:"small","aria-label":"billing location"})});if(!t||!t.length)return s.jsx(Wt,{label:"N/A",color:"warning"});const r=t.length===1?t[0]:`x ${t.length}`,o=a=>{switch(a){case 1:return{color:"primary"};case 2:return{color:"info"};default:return{color:"success"}}};return s.jsx(Zs,{title:`Locations: ${t.length}`,children:s.jsxs(v,{direction:"row",spacing:2,children:[s.jsx(Zo,{fontSize:"small","aria-label":"delivery location"}),s.jsx(Wt,{label:r,...o(n),variant:t.length===1?"filled":"outlined",size:"small"})]})})},zj=({user:e,selected:t,onClick:n})=>s.jsxs(U,{onClick:n,selected:t,children:[s.jsx(h,{"aria-label":"user type",children:s.jsx(Kj,{accountType:e.accountType})}),s.jsx(h,{children:e.name}),s.jsx(h,{children:s.jsx(X,{href:`mailto:${e.email}`,target:"_blank",children:e.email})}),s.jsx(h,{children:s.jsx($j,{shipToCode:e.shipToCode,billTo:e.billTo,accountType:e.accountType})})]},e.id),Wj=()=>{const e=I(),t=d(ug),[n,r]=u.useState(0),o=d(Pr),a=Dt(vt),i=xe(),c=d(Ll),l=p=>{a?.params?.customerSlug&&i($(vt,{customerSlug:a?.params?.customerSlug,id:p.id.toString()}))},m=p=>{e(lg({field:p,ascending:p===c.field?!c.ascending:!0}))};return s.jsxs("div",{children:[s.jsxs(ct,{size:"small",children:[o&&s.jsx("caption",{children:"Only users with explicitly assigned access are shown here."}),s.jsx(Zt,{children:s.jsxs(U,{children:[s.jsx(h,{children:"Type"}),s.jsx(h,{children:s.jsx(Vn,{active:c.field==="name",direction:c.ascending?"asc":"desc",onClick:()=>m("name"),children:"Name"})}),s.jsx(h,{children:s.jsx(Vn,{active:c.field==="email",direction:c.ascending?"asc":"desc",onClick:()=>m("email"),children:"Email Address"})}),s.jsx(h,{children:"Permissions"})]})}),s.jsx(lt,{children:t.filter(p=>p.id!==0).slice(n*10,n*10+10).map(p=>s.jsx(zj,{user:p,onClick:()=>l(p),selected:p.id.toString()===a?.params.id},p.id))})]}),s.jsx(on,{component:"div",count:t.length,onPageChange:(p,f)=>r(f),page:n,rowsPerPage:10})]})},Gj=()=>{const e=d(Ea),t=d(ts),n=Dt(vt),[r]=e.filter(o=>o.id.toString()===n?.params?.id);return r?s.jsxs(s.Fragment,{children:[s.jsx(j,{variant:"h4",component:"h4",children:"Access Permissions"}),s.jsxs(ct,{className:"table table-sm",size:"small",children:[s.jsx(Zt,{children:s.jsxs(U,{children:[s.jsx(h,{children:"Type"}),s.jsx(h,{align:"center",children:"Ship To Code"}),s.jsx(h,{children:"Name"}),s.jsx(h,{children:"Location"})]})}),s.jsxs(lt,{children:[r.shipToCode?.length===0&&s.jsxs(U,{children:[s.jsx(h,{children:s.jsx(qi,{"aria-label":"billing locatoin"})}),s.jsx(h,{colSpan:3,children:"All Locations"})]}),t.filter(o=>r.shipToCode?.includes(o.ShipToCode)).map(o=>s.jsxs(U,{children:[s.jsx(h,{children:s.jsx(Zo,{"aria-label":"delivery location"})}),s.jsx(h,{align:"center",children:o.ShipToCode}),s.jsx(h,{children:o.ShipToName}),s.jsxs(h,{children:[o.ShipToCity,", ",o.ShipToState," ",o.ShipToCountryCode]})]},o.ShipToCode))]})]})]}):null};function Vj(){const e=I(),t=d(dg),n=d(se),r=()=>{e(Fs())};return s.jsxs(P,{container:!0,spacing:2,sx:{mt:"2"},children:[s.jsxs(P,{size:{xs:12,sm:6},children:[s.jsxs(v,{direction:"row",spacing:2,justifyContent:"space-between",children:[s.jsx(j,{variant:"h3",component:"h3",children:"User List"}),s.jsx(N,{type:"button",variant:"text",onClick:r,disabled:t!=="idle"||!n,children:"Reload"})]}),!["idle","rejected"].includes(t)&&s.jsx(z,{variant:"indeterminate",sx:{my:1}}),s.jsx(Wj,{})]}),s.jsxs(P,{size:{xs:12,sm:6},children:[s.jsx(Bo,{}),s.jsx(tt,{sx:{my:3}}),s.jsx(Gj,{})]})]})}const Yj=({currentSort:e,fields:t,onChangeSort:n})=>{const{field:r,ascending:o}=e,a=i=>()=>{if(i===r){n({...e,ascending:!o});return}n({field:i,ascending:!o})};return s.jsx(Zt,{children:s.jsx(U,{children:t.map((i,c)=>s.jsxs(h,{align:i.align,className:Ae(typeof i.className=="function"?{[`text-${i.align}`]:!!i.align}:i.className),children:[!i.sortable&&s.jsx(s.Fragment,{children:i.title}),i.sortable&&s.jsx(Vn,{active:e.field===i.field,direction:e.ascending?"asc":"desc",onClick:a(i.field),children:i.title})]},c))})})},qj=({className:e,rowClassName:t,selected:n,fields:r,row:o,trRef:a,onClick:i=Mo,...c})=>{const l=()=>i?i():Mo(),m=typeof t=="function"?t(o):t;return s.jsx(U,{ref:a,className:Ae({"table-active":n},e,m),onClick:l,...c,children:r.map((p,f)=>{const g=typeof p.className=="function"?p.className(o):p.className;return typeof p.render=="function"?s.jsx(h,{align:p.align,className:Ae(g),colSpan:p.colSpan,children:p.render(o)},f):s.jsx(h,{align:p.align,className:Ae(g),colSpan:p.colSpan,children:String(o[p.field]??"")},f)})})},Zj=({fields:e,data:t,keyField:n,rowClassName:r,renderRow:o,onSelectRow:a=Mo,selected:i=null,children:c,...l})=>s.jsxs(lt,{...l,children:[t.map(m=>{const p=String(typeof n=="function"?n(m):m[n]),f=typeof i=="function"?i(m):p===(i??!1);return o?o(m):s.jsx(qj,{onClick:()=>a(m),rowClassName:r,fields:e,row:m,selected:f},p)}),c]}),Br=({fields:e,data:t,currentSort:n,onChangeSort:r,keyField:o,rowClassName:a,renderRow:i,onSelectRow:c,selected:l=null,className:m="",tfoot:p,children:f,...g})=>s.jsxs(ct,{className:m,...g,children:[s.jsx(Yj,{currentSort:n,fields:e,onChangeSort:r}),!!t.length&&s.jsx(Zj,{fields:e,data:t,keyField:o,rowClassName:a,renderRow:i,onSelectRow:c,selected:l}),f,p]});function Jj({list:e,fields:t}){const n=I(),r=d(Nr),[o,a]=u.useState(0),[i,c]=u.useState(10);u.useEffect(()=>{a(0)},[e,r]);const l=p=>{c(+p.target.value),a(0)},m=p=>{n(Dc(p))};return s.jsxs("div",{children:[s.jsx(Br,{keyField:"SalesOrderNo",data:e.slice(o*i,o*i+i),fields:t,currentSort:r,onChangeSort:m}),s.jsx(on,{component:"div",count:e.length,page:o,rowsPerPage:i,onPageChange:(p,f)=>a(f),onRowsPerPageChange:l,showFirstButton:!0,showLastButton:!0})]})}const Xj=e=>{switch(e){case"cart":return"/account/:customerSlug/carts/:salesOrderNo";case"past":case"invoice":return"/account/:customerSlug/closed/:salesOrderNo";default:return"/account/:customerSlug/orders/:salesOrderNo"}},dd=({salesOrderNo:e,orderType:t})=>{const n=d(se);if(!n||!e)return null;const r=Xj(t),o=$(r,{customerSlug:A(n),salesOrderNo:e});return s.jsx(X,{component:Q,to:o,children:e})},fs=({date:e=new Date,format:t="MM/DD/YYYY"})=>e===null?null:s.jsx(s.Fragment,{children:F(e).format(t)}),Qj=({value:e,onChange:t,children:n,placeholder:r,className:o,id:a,...i})=>{const c=u.useId();return a||(a=c),s.jsxs(v,{direction:"row",spacing:2,justifyContent:"space-between",children:[s.jsx(E,{type:"search",value:e,onChange:t,variant:"standard",size:"small",id:a,fullWidth:!0,slotProps:{input:{startAdornment:s.jsx(ye,{position:"start",children:s.jsx(xr,{})})},htmlInput:{...i}},placeholder:r??"Order or PO #",className:o}),n]})};function ey(){return d(Bm)>0?null:s.jsx(_,{severity:"info",children:"There are currently no open orders."})}function ty({salesOrder:e}){const t=d(q);return e.BillToDivisionNo==t?.ARDivisionNo&&e.BillToCustomerNo===t?.CustomerNo?s.jsx(Yl,{customer:e}):e.ShipToCode?`${e.ARDivisionNo}-${e.CustomerNo}/${e.ShipToCode}`:`${e.ARDivisionNo}-${e.CustomerNo}`}const sy=[{field:"SalesOrderNo",title:"Order #",render:e=>s.jsx(dd,{salesOrderNo:e.SalesOrderNo,orderType:"open"}),sortable:!0},{field:"ShipToCode",title:"Ship To Code",sortable:!0,render:e=>s.jsx(ty,{salesOrder:e})},{field:"ShipToName",title:"Ship To",sortable:!0},{field:"ShipToCity",title:"Location",sortable:!0,render:e=>`${e.ShipToCity}, ${e.ShipToState} ${e.ShipToZipCode}`},{field:"CustomerPONo",title:"PO #",sortable:!0},{field:"OrderDate",title:"Ordered",sortable:!0,render:e=>s.jsx(fs,{date:e.OrderDate})},{field:"ShipExpireDate",title:" Req. Ship Date",sortable:!0,render:e=>s.jsx(fs,{date:e.ShipExpireDate})},{field:"NonTaxableAmt",title:"Total",render:e=>D(new w(e.NonTaxableAmt).add(e.TaxableAmt)).format("0,0.00"),align:"right",sortable:!0}],ny=()=>{const e=I(),t=d(Rm),n=d(q),r=d(tl),o=d(Km),a=d(Oc),i=d(Mm),c=d(ga),[l,m]=u.useState(o.filter(f=>!r||f.ShipToCode===r));u.useEffect(()=>{a==="idle"&&!i&&t&&e(It(t))},[a,i,t]),u.useEffect(()=>{m(o.filter(f=>!r||f.ShipToCode===r))},[o,r]);const p=()=>{t&&e(It(t))};return!n||!n.CustomerNo?null:s.jsxs(s.Fragment,{children:[s.jsx(Qj,{value:c,onChange:f=>e(Lc(f.target.value)),maxLength:30,children:s.jsx(N,{type:"button",variant:"text",onClick:p,children:"Reload"})}),a==="pending"&&s.jsx(z,{variant:"indeterminate",sx:{mb:1}}),s.jsx(Jj,{list:l,fields:sy}),s.jsx(ey,{})]})},ry="/account/:customerSlug/invoices/:InvoiceType/:InvoiceNo",oy=({invoice:e})=>{if(!e||!e.InvoiceNo)return null;const{InvoiceNo:t,InvoiceType:n}=e,r=Ee(e),o=$(ry,{customerSlug:r,InvoiceType:n,InvoiceNo:t});return s.jsxs(X,{component:Q,to:o,children:[t,"-",n]})},ay=({onReload:e})=>{const t=I(),n=d(ll),r=d(cl),o=d(il),a=l=>{t(pl(l.target.value))},i=l=>{t(ml(l))},c=l=>{t(ul(l.target.checked))};return s.jsxs(P,{container:!0,direction:"row",spacing:2,children:[s.jsx(P,{sx:{flex:"1 1 auto"},children:s.jsx(E,{type:"search",value:n,onChange:a,variant:"standard",size:"small",label:"Search",fullWidth:!0,slotProps:{htmlInput:{maxLength:30},input:{startAdornment:s.jsx(ye,{position:"start",children:s.jsx(xr,{})})}},placeholder:"Invoice or PO #"})}),s.jsx(P,{sx:{flex:"1 1 auto"},children:s.jsx(Is,{value:r??is,onChange:i,variant:"standard",allowAllLocations:!0})}),s.jsx(P,{sx:{flex:"1 1 auto"},children:s.jsx(Gn,{children:s.jsx(qs,{control:s.jsx(gs,{checked:o,onChange:c}),label:"Show paid invoices?"})})}),s.jsx(P,{children:s.jsx(N,{type:"button",variant:"text",onClick:e,children:"Reload"})})]})},iy=[{field:"InvoiceNo",title:"Invoice #",render:e=>s.jsx(oy,{invoice:e}),sortable:!0},{field:"InvoiceDate",title:"Invoice Date",render:e=>s.jsx(fs,{date:e.InvoiceDate}),sortable:!0},{field:"SalesOrderNo",title:"Order #",render:e=>s.jsx(dd,{salesOrderNo:e.SalesOrderNo,orderType:"past"}),sortable:!0},{field:"CustomerPONo",title:"PO #",sortable:!0},{field:"OrderDate",title:"Order Date",render:e=>s.jsx(fs,{date:e.OrderDate}),sortable:!0},{field:"ShipToName",title:"Ship To",className:"hidden-xs",sortable:!0,render:e=>s.jsxs("span",{children:[!!e.ShipToCode&&s.jsxs("span",{children:["[",e.ShipToCode,"]"]})," ",e.ShipToName]})},{field:"ShipToCity",title:"Location",className:"hidden-xs",render:e=>`${e.ShipToCity??""}, ${e.ShipToState??""} ${e.ShipToZipCode??""}`,sortable:!0},{field:"NonTaxableSalesAmt",title:"Total",render:e=>D(new w(e.NonTaxableSalesAmt??0).add(e.TaxableSalesAmt??0).sub(e.DiscountAmt??0)).format("($0,0.00)"),align:"right",sortable:!0},{field:"Balance",title:"Due",className:"right",render:e=>D(e.Balance).format("($0,0.00)"),sortable:!0,align:"right"},{field:"InvoiceDueDate",title:"Due Date",render:e=>s.jsx(fs,{date:e.InvoiceDueDate}),sortable:!0}],cy=()=>{const e=I(),t=d(ih),n=d(sh),r=d(nh),o=d(rh),a=d(oh),i=d(ol),c=d(ah),l=d(q),m=d(dl),[p,f]=u.useState(0),[g,C]=u.useState(T.getItem(Js,10)??10);u.useEffect(()=>{!i&&!c&&l&&(e(ps({key:Qi(l),start:0,limit:n})),f(0))},[l,i,c]),u.useEffect(()=>{f(0)},[m]);const y=M=>{const V=+(M.target.value??10);ws()&&T.setItem(Js,V),C(V)},x=()=>{l&&(e(ps({key:l,start:0,limit:500})),f(0))},S=()=>{!l||r||e(ps({key:l,start:o+n,limit:n}))};if(!l||!l.CustomerNo)return null;const O=M=>{e(hl(M))};return s.jsx(vi,{fallback:void 0,FallbackComponent:()=>s.jsx(_,{severity:"error",children:"Sorry, an error occurred"}),children:s.jsxs(b,{children:[s.jsx(ay,{onReload:x}),i&&s.jsx(z,{variant:"indeterminate",sx:{mb:1}}),s.jsx(Br,{keyField:M=>_e(M),data:t.slice(p*g,p*g+g),selected:a,fields:iy,currentSort:m,onChangeSort:O}),s.jsxs(b,{display:"flex",justifyContent:"flex-end",children:[s.jsx(on,{component:"div",count:t.length,page:p,onPageChange:(M,V)=>f(V),rowsPerPage:g,onRowsPerPageChange:y,showFirstButton:!0,showLastButton:!0}),s.jsx(N,{type:"button",variant:"text",onClick:S,disabled:r||i,children:"Load More"})]})]})})},ji=({shipTo:e,children:t,...n})=>{const r=$(Cc,{customerSlug:Ee(e),code:encodeURIComponent(e.ShipToCode)});return s.jsx(X,{component:en,to:r,...n,children:t})},ly=[{field:"ShipToCode",title:"Code",sortable:!0,render:e=>s.jsxs(ji,{shipTo:e,sx:{display:"flex",alignItems:"center"},children:[s.jsx(b,{sx:{mr:1},component:"span",children:e.ShipToCode}),s.jsx(ld,{shipToCode:e.ShipToCode})]})},{field:"ShipToName",title:"Name",sortable:!0,render:e=>s.jsx(ji,{shipTo:e,children:e.ShipToName})},{field:"ShipToAddress1",title:"Address",sortable:!0,className:"hidden-xs"},{field:"ShipToCity",title:"City",sortable:!0,className:"hidden-xs"},{field:"ShipToState",title:"State",sortable:!0,render:e=>ls(e),className:"hidden-xs"},{field:"ShipToZipCode",title:"Postal Code",sortable:!0,className:"hidden-xs"},{field:"EmailAddress",title:"Email",sortable:!0,render:e=>s.jsx("span",{children:!!e.EmailAddress&&s.jsx(X,{href:`mailto:${e.EmailAddress}`,target:"_blank",children:e.EmailAddress})})}],dy=()=>{const e=I(),t=d(Xp),n=d(nl),r=d(je),o=d(Ia),[a,i]=u.useState(0),[c,l]=u.useState(10);u.useEffect(()=>{i(0)},[t,n,c]);const m=f=>{e(Zp(f))},p=f=>Ae({"table-primary":f.ShipToCode===o?.ShipToCode});return s.jsxs("div",{children:[r&&s.jsx(z,{variant:"indeterminate"}),s.jsx(Br,{data:t.slice(a*c,a*c+c),rowClassName:p,currentSort:n,onChangeSort:m,fields:ly,keyField:"ShipToCode"}),s.jsxs(P,{container:!0,spacing:2,justifyContent:"end",children:[s.jsx(on,{component:"div",count:t.length,page:a,onPageChange:(f,g)=>i(g),rowsPerPage:c,onRowsPerPageChange:f=>l(+f.target.value),showFirstButton:!0,showLastButton:!0}),s.jsx(Ra,{})]})]})},uy="#d0112b";tu(uy,.7);let Re=Jo({});Re=Jo(Re,{palette:{mode:"light",primary:{light:"#42a5f5",main:"#1976d2",dark:"#1565c0"},secondary:{light:"#ba68c8",main:"#9c27b0",dark:"#7b1fa2"},chumsRed:Re.palette.augmentColor({color:{light:"#fe3439",main:"#d0112a",dark:"#c2001e"},name:"chumsRed"}),chumsGrey:Re.palette.augmentColor({color:{light:"#78787b",main:"#454547",dark:"#232324"},name:"chumsGrey"}),error:{light:"#fe3439",main:"#d0112a",dark:"#c2001e"}}});Re=Jo(Re,{components:{MuiCssBaseline:{styleOverrides:{html:{backgroundColor:"#FFFFFF",backgroundSize:"cover",minHeight:"100%",position:"relative"},body:{minHeight:"100vh","#app":{boxSizing:"border-box",minHeight:"100vh",display:"flex",flexDirection:"column",header:{flexGrow:0,flexShrink:0},main:{flexGrow:1},footer:{flexGrow:0,flexShrink:0}}}}},MuiTableFooter:{styleOverrides:{root:{th:{fontSize:"1rem",fontWeight:700},td:{fontSize:"1rem",fontWeight:700}}}},MuiLink:{styleOverrides:{root:{color:Re.palette.chumsGrey.main}}},MuiTab:{styleOverrides:{root:{opacity:.75,color:Re.palette.chumsGrey.dark}}},MuiAppBar:{styleOverrides:{root:{a:{color:Re.palette.common.black}}}},MuiMenuList:{styleOverrides:{root:{a:{color:Re.palette.common.black}}}},MuiInputAdornment:{styleOverrides:{root:{}}}},typography:{fontSize:16,h1:{textTransform:"uppercase",fontWeight:300,fontSize:40},h2:{textTransform:"uppercase",fontWeight:600,fontSize:36},h3:{textTransform:"uppercase",fontWeight:600,fontSize:32},h4:{textTransform:"uppercase",fontWeight:600,fontSize:28},variantButtonText:{fontWeight:500,fontSize:16},variantButtonPrice:{fontWeight:300,fontSize:14},bodyMono:{fontWeight:500,fontFamily:["Roboto Mono","Monaco","Consolas","monospace"].join(",")}}});globalThis.window&&(window.theme=Re);const my=Re,py=/([a-z]+:)*\/\//;function ud({banner:e,children:t,...n}){return e.url?py.test(e.url)?s.jsx(X,{href:e.url,underline:"none",target:"_blank",...n,children:t}):s.jsx(X,{component:Q,to:e.url,underline:"none",...n,children:t}):t}const hy={backgroundColor:"#333333",color:"#FFFFFF",minHeight:"10rem",padding:"3rem","&:hover":{backgroundColor:"var(--chums-red)",transition:"ease-in-out 350ms"}},fy=({banner:e})=>e.overlay?s.jsx(ud,{banner:e,children:s.jsx(b,{sx:{...hy,...e.sxProps??{}},children:s.jsx(j,{variant:"body1",sx:{...e.overlay.sxProps??{}},children:e.overlay.innerText})})}):null,co=e=>`/images/chums/homepage/${e.replace(/^\//,"")}`,gy=ys.img`
    width: 100%;
    height: auto;
`;function xy({banner:e}){if(!e.image||!e.image.desktop?.filename&&!e.image.mobile?.filename)return null;const t={position:e.image.desktop?.overlay||e.image.mobile?.overlay?"relative":void 0,height:"fit-content"},n={position:t.position==="relative"?"absolute":void 0,display:{xs:"none",sm:"block"},...e.image.desktop?.overlaySxProps??{}},r={position:t.position==="relative"?"absolute":void 0,display:{xs:"block",sm:"none"},...e.image.mobile?.overlaySxProps??{}},o=co(e.image.desktop?.filename??e.image.mobile?.filename??"");return s.jsx(ud,{banner:e,children:s.jsxs(b,{sx:{...t,...e.sxProps??{}},children:[s.jsxs("picture",{children:[e.image.mobile?.filename&&s.jsx("source",{media:`(max-width: ${e.image.mobile?.width||480}px)`,width:e.image.mobile?.width||480,height:e.image.mobile?.height||680,srcSet:co(e.image.mobile.filename)}),e.image.desktop?.filename&&s.jsx("source",{media:`(min-width: ${(e.image.mobile?.width||480)+1}px)`,width:e.image.desktop?.width||1600,height:e.image.desktop?.height||500,srcSet:co(e.image.desktop.filename)}),s.jsx(gy,{src:o,alt:e.image.desktop?.altText||e.image.mobile?.altText||""})]}),e.image.desktop?.overlay&&s.jsx(j,{variant:"body1",sx:n,children:e.image.desktop?.overlay}),e.image.mobile?.overlay&&s.jsx(j,{variant:"body1",sx:r,children:e.image.mobile?.overlay})]})})}const Cy=({banner:e})=>e.overlay&&e.overlay.innerText?s.jsx(fy,{banner:e}):e.image?s.jsx(xy,{banner:e}):null,jy=1e3*60*30,yy=()=>{const e=I(),t=d(Ig),n=d(vg),r=d(bg),o=new Date().valueOf();return u.useEffect(()=>{n||e(Ws())},[n]),u.useEffect(()=>{o-r>jy&&e(Ws())},[o,r]),t.length?s.jsx(v,{direction:"column",spacing:2,sx:{mb:2},children:t.map(a=>s.jsx(Cy,{banner:a},a.id))}):null},yi=()=>s.jsxs("div",{children:[s.jsx(re,{documentTitle:bs.home}),s.jsx(j,{component:"h1",variant:"h1",sx:{textAlign:"center",mb:3},children:"Chums Business-to-Business Website"}),s.jsx(yy,{})]}),Sy=()=>{const e=I(),t=Dt("/account/:customerSlug/:parentType/:salesOrderNo"),n=d(q),r=d(fa),o=d(Ar),a=d(je);if(u.useEffect(()=>{n&&n.CustomerNo&&!o&&t?.params?.salesOrderNo&&t?.params?.salesOrderNo!==r?.SalesOrderNo&&e(st(t.params.salesOrderNo))},[n,t,o,r]),!n&&!a){tn("/profile");return}const i=`'Completed Order Info #${t?.params?.salesOrderNo}`;return!r||!n?s.jsxs("div",{children:[s.jsx(re,{documentTitle:i}),s.jsx("div",{className:"sales-order-page",children:s.jsx(Ro,{})}),s.jsx(ur,{salesOrderNo:t?.params?.salesOrderNo})]}):s.jsxs("div",{children:[s.jsx(re,{documentTitle:i}),s.jsxs("div",{className:"sales-order-page",children:[s.jsxs("h2",{children:["Sales Order #",r.SalesOrderNo]}),s.jsx(Wl,{}),s.jsx(ur,{salesOrderNo:t?.params?.salesOrderNo}),s.jsx($l,{salesOrderNo:t?.params?.salesOrderNo})]})]})},vy=()=>{const e=I(),t=d(bc),[n,r]=u.useState(""),[o,a]=u.useState(""),[i,c]=u.useState(null),l=xe(),m=()=>{l("/login")},p=async f=>{f.preventDefault(),(await e(Hs(n))).payload?(a("If your email address is in our database, we will send you an email to reset your password."),c("success")):(c("warning"),a("Sorry, An error occurred."))};return s.jsxs(qe,{maxWidth:"sm",children:[s.jsx(j,{variant:"h1",component:"h1",sx:{my:3},children:"Chums B2B Portal"}),s.jsxs(b,{component:"form",onSubmit:p,children:[s.jsx(j,{component:"h2",variant:"h2",children:"Reset Your Password"}),i!=="success"&&s.jsx(_,{severity:"info",sx:{mb:1},children:"If your email address is in our database, we will send you an email to reset your password."}),s.jsxs(v,{direction:"column",spacing:1,children:[t&&s.jsx(z,{variant:"indeterminate",title:"Processing Password Rest Request"}),s.jsxs(b,{sx:{display:"flex",alignItems:"center"},children:[s.jsx(Ko,{sx:{color:"action.active",mr:1}}),s.jsx(E,{type:"email",fullWidth:!0,variant:"filled",label:"Email",value:n,onChange:f=>r(f.target.value),autoComplete:"username",slotProps:{inputLabel:{shrink:!0}},required:!0})]}),s.jsxs(v,{direction:"row",spacing:2,useFlexGap:!0,justifyContent:"flex-end",children:[s.jsx(N,{type:"button",variant:"text",component:Q,to:"/login",children:"Cancel"}),s.jsx(N,{type:"submit",variant:"contained",disabled:i==="success",children:"Reset Password"})]})]})]}),!!o&&s.jsx(_,{severity:i??"info",onClose:m,children:o}),s.jsx(Fl,{})]})},wy=()=>{const e=I(),t=d(cn),n=d(an),[r,o]=u.useState(null),a=xe(),i=()=>{a("/profile")},c=async l=>{if(!l.oldPassword||!l.newPassword)return;const m=await e(En(l));Qt(m.payload)?o(m.payload.error??null):a("/login",{state:"Your password has been updated. Please log in again."})};return s.jsxs(qe,{maxWidth:"sm",children:[s.jsx(re,{documentTitle:bs.profileChangePassword}),s.jsx(j,{component:"h1",variant:"h1",sx:{mb:5},children:"Change Password"}),t!=="idle"&&s.jsx(z,{variant:"indeterminate"}),s.jsxs(v,{direction:"column",spacing:2,children:[!!r&&s.jsx(_,{severity:"warning",title:"Reset password error:",children:r}),s.jsx(Vl,{disabled:!n||t!=="idle",email:n?.email,onSubmit:c,onCancel:i})]})]})};function by({disabled:e,onClick:t}){return s.jsx(N,{variant:"outlined",type:"button",disabled:e,onClick:t,children:"New User"})}function Iy({open:e,onConfirm:t,onCancel:n,children:r}){const o=u.useId();return s.jsxs(ut,{open:e,onClose:n,"aria-describedby":o,children:[s.jsx(mt,{children:s.jsx(_t,{id:o,children:r})}),s.jsxs(pt,{children:[s.jsx(N,{onClick:n,children:"Cancel"}),s.jsx(N,{onClick:t??n,children:"Agree"})]})]})}const Py={id:0,accessId:0,name:"",email:"",accountType:4},Ty=()=>{const e=I(),t=d(Ea),n=d(Pr),r=d(ma),o=Dt(vt),a=xe(),[i,c]=u.useState(null),[l,m]=u.useState(!1),[p,f]=u.useState(!1),[g,C]=u.useState([]),[y,x]=u.useState(null),S=u.useRef(null);u.useEffect(()=>{if(f(!1),o?.params?.id==="new"){c({...Py}),C([]);return}const[ce]=t.filter(gt=>gt.id.toString()===o?.params?.id);if(!ce){c(null),C([]);return}c({...ce,shipToCode:[]}),C(ce.shipToCode??[])},[o?.params?.id,t]),u.useEffect(()=>{m((n||r)&&(i?.accountType===4||!i))},[n,r,i]);const O=()=>{x(null)},M=ce=>gt=>{if(i)switch(ce){case"email":c({...i,[ce]:gt.target.value.trim(),changed:!0});return;case"name":case"notes":c({...i,[ce]:gt.target.value,changed:!0});return;default:return}},V=ce=>{i&&c({...i,shipToCode:[ce??""],changed:!0})},Qe=async ce=>{ce.preventDefault(),i&&(await e(Ms(i)),c(null),o?.params?.customerSlug&&a($(vt,{customerSlug:o?.params?.customerSlug,id:""})))},Y=()=>{x(null),o?.params?.customerSlug&&a($(vt,{customerSlug:o.params.customerSlug,id:"new"}))},Z=()=>{if(i?.changed){S.current=Y,x("Do you want to cancel your changes?");return}Y()},fe=()=>{x(null),c(null),o?.params?.customerSlug&&a($(vt,{customerSlug:o.params.customerSlug,id:""}))},ft=()=>{if(i?.changed){S.current=fe,x("Do you want to cancel your changes?");return}fe()},Be=async()=>{i&&(x(null),await e(Us(i)),c(null),o?.params?.customerSlug&&a($(vt,{customerSlug:o.params.customerSlug,id:""})))},Fe=async()=>{i&&(S.current=Be,x(`Are you sure you want to remove ${i?.email}?`))};return i?s.jsxs("form",{onSubmit:Qe,children:[s.jsxs(v,{direction:"column",spacing:2,children:[s.jsxs(j,{variant:"h3",component:"h3",children:[i.id===0&&s.jsx("span",{children:"New User"}),i.id!==0&&s.jsx("span",{children:"Update User"})]}),i.id===0&&s.jsx(_,{severity:"info",children:"An email will be sent to welcome the new user with links to set a password."}),s.jsx(E,{type:"text",fullWidth:!0,label:"User Name",value:i.name,onChange:M("name"),variant:"filled",slotProps:{htmlInput:{maxLength:45},input:{startAdornment:s.jsx(ye,{position:"start",children:s.jsx(Yi,{})})}},disabled:i.accountType!==4,required:!0,helperText:"Please enter the users full name"}),s.jsx(E,{type:"email",fullWidth:!0,label:"Email Address",value:i.email,onChange:M("email"),variant:"filled",slotProps:{htmlInput:{maxLength:255},input:{startAdornment:s.jsx(ye,{position:"start",children:s.jsx(Gi,{})})}},disabled:i.accountType!==4,required:!0}),(i.id===0||p)&&s.jsx(Is,{label:"Access Permissions",disabledShipToLocations:g,value:i.shipToCode?.[0]??null,onChange:V}),i.id===0&&s.jsx(E,{multiline:!0,fullWidth:!0,label:"Welcome Message",value:i.notes,onChange:M("notes"),variant:"filled",slotProps:{input:{startAdornment:s.jsx(ye,{position:"start",children:s.jsx(su,{})})}},disabled:i.accountType!==4,required:!0,helperText:"Please enter a welcome message to the new user."}),s.jsxs(v,{direction:"row",spacing:2,children:[s.jsx(N,{type:"submit",variant:"contained",disabled:!l,children:"Save"}),s.jsx(N,{type:"button",variant:"text",onClick:ft,children:"Cancel"}),s.jsx(N,{variant:"text",type:"button",disabled:!(n||r)||i?.id===0,onClick:Z,children:"New User"}),!!i.id&&i.accountType===4&&s.jsx(N,{variant:"text",type:"button",disabled:!(n||r)||i?.id===0||i.billTo,onClick:()=>f(!0),children:"New Ship-To Location"}),s.jsx(N,{type:"button",variant:"text",color:"error",disabled:!l||i.id===0,onClick:Fe,children:"Delete"})]})]}),s.jsx(Iy,{open:!!y,onConfirm:S.current,onCancel:O,children:y})]}):s.jsx(by,{onClick:Y,disabled:!(n||r)})};function Ay(){const e=I(),t=d(xl),n=d(se),r=u.useId(),o=i=>{e(Ch(i.target.value))},a=()=>{e(we(n))};return s.jsxs(v,{direction:"row",spacing:2,justifyContent:"space-between",children:[s.jsx(E,{type:"search",value:t,onChange:o,variant:"standard",size:"small",id:r,fullWidth:!0,slotProps:{input:{startAdornment:s.jsx(ye,{position:"start",children:s.jsx(xr,{})})}},placeholder:"Order or PO #"}),s.jsx(N,{variant:"text",onClick:a,children:"Reload"})]})}const Ny=({cartId:e})=>{const t=I(),n=d(se),r=d(ln),o=()=>{n&&e&&t(Me({customerKey:n,cartId:e,setActiveCart:!0}))};return s.jsxs(le,{color:e===r?"primary":"default",title:e===r?"Current Cart":"Make this the current cart",onClick:o,children:[e!==r&&s.jsx(Vo,{}),e===r&&s.jsx(zo,{})]})},Ey="/account/:customerSlug/carts/:cartId";function Oy({cartId:e,children:t}){const n=d(q);if(!n||!e)return null;const r=$(Ey,{customerSlug:A(n),cartId:`${e}`});return s.jsx(X,{component:Q,to:r,children:t??e})}const Dy=[{field:"id",title:"Active Cart",render:e=>s.jsx(Ny,{cartId:e.id}),sortable:!1},{field:"id",title:"Cart #",render:e=>s.jsx(Oy,{cartId:e.id,children:e.id}),sortable:!0},{field:"customerPONo",title:"Cart Name",sortable:!0},{field:"dateCreated",title:"Cart Created",render:e=>s.jsx(fs,{date:e.dateCreated}),sortable:!0},{field:"shipToName",title:"Ship To",sortable:!0,render:e=>s.jsxs("span",{children:[!!e.shipToCode&&s.jsxs("span",{children:["[",e.shipToCode,"]"]})," ",e.shipToName]})},{field:"ShipToCity",title:"Location",render:e=>Es(e),sortable:!0},{field:"subTotalAmt",title:"Total",render:e=>D(new w(e.subTotalAmt)).format("0,0.00"),align:"right",sortable:!0}];function Ly(){const e=I(),t=d(vh),n=d(Cl),[r,o]=u.useState(0),[a,i]=u.useState(10);u.useEffect(()=>{o(0)},[t,n]);const c=m=>{i(+m.target.value),o(0)},l=m=>{e(jh(m))};return s.jsxs("div",{children:[s.jsx(Br,{keyField:"id",data:t.slice(r*a,r*a+a),fields:Dy,currentSort:n,onChangeSort:l}),s.jsx(on,{component:"div",count:t.length,page:r,rowsPerPage:a,onPageChange:(m,p)=>o(p),onRowsPerPageChange:c,showFirstButton:t.length>a,showLastButton:t.length>a})]})}function ky(){return d(yh)>0?s.jsxs(_,{severity:"info",children:[s.jsx("strong",{className:"me-1",children:"Hint:"}),"Select a cart icon to make it your current cart."]}):s.jsx(_,{severity:"info",children:"You current have no open carts."})}function Ry(){const e=I(),t=d(ya),n=d(se);return u.useEffect(()=>{e(we(n))},[n]),s.jsxs("div",{children:[s.jsx(Ay,{}),t==="loading"&&s.jsx(z,{variant:"indeterminate",sx:{mb:1}}),s.jsx(Ly,{}),s.jsx(ky,{})]})}function My(){return s.jsxs(P,{container:!0,spacing:2,children:[s.jsx(P,{size:{xs:12,sm:6},children:s.jsxs(v,{direction:"column",spacing:2,children:[s.jsx(Le,{variant:"rectangular",height:30}),s.jsx(Le,{variant:"rectangular",height:30}),s.jsx(Le,{variant:"rectangular",height:30})]})}),s.jsx(P,{size:{xs:12,sm:6},children:s.jsxs(v,{direction:"column",spacing:2,children:[s.jsx(Le,{variant:"rectangular",height:30}),s.jsx(Le,{variant:"rectangular",height:60}),s.jsx(Le,{variant:"rectangular",height:30})]})})]})}const Si={value:"",enabled:!1},Uy=({readOnly:e=!1,shipVia:t})=>{const n=I(),[r,o]=u.useState(null),a=d(Dr),i=u.useId(),c=u.useRef(null);u.useEffect(()=>{o(t?us[t]??null:null)},[t]);const l=()=>{if(e)return;const p=!a?.enabled;n(Qn({...a??Si,enabled:p})),p&&c.current&&c.current.focus()},m=p=>{e||!a?.enabled||n(Qn({...a??Si,value:p.target.value}))};return s.jsxs(dt,{variant:"filled",fullWidth:!0,size:"small",error:a?.enabled&&!a.value,disabled:!r?.allowCustomerAccount||!a?.enabled,children:[s.jsx(Lt,{htmlFor:i,children:"Use your shipping account"}),s.jsx(Wo,{type:"text",value:a?.enabled?a.value:"",onChange:m,inputProps:{readOnly:e,id:i,ref:c,maxLength:9},startAdornment:s.jsx(ye,{position:"start",children:s.jsx(le,{"aria-label":"toggle use your shipping account",disabled:!r?.allowCustomerAccount,onClick:l,onMouseDown:p=>p.preventDefault(),children:a?.enabled?s.jsx(nu,{}):s.jsx(ru,{})})})})]})},Pe=0,wt=1,Bt=2,zt=3;function Fy(e){return e<zt?e+1:e}function _y({value:e,onChange:t,inputProps:n,readOnly:r,disabled:o,ref:a,...i}){const c=d(_c),[l,m]=u.useState(c??F().add(7,"days").format("YYYY-MM-DD")),[p,f]=u.useState(null),g=u.useId(),C=u.useId();u.useEffect(()=>{m(c??F().add(7,"days").format("YYYY-MM-DD"))},[c]);const y=M=>{const V=M.target.value;if(!F(V).isValid()||F(V).isBefore(l))return t(F(l).toISOString());t(F(V).toISOString())},x=M=>{if(!F(M).isValid()||F(M).isBefore(l))return F(l).format("YYYY-MM-DD");const V=F(M).toDate().getTimezoneOffset();return F(M).add(V,"minutes").format("YYYY-MM-DD")},S=M=>{f(M.currentTarget)},O=M=>{if(f(null),!F(M).isValid()||F(M).isBefore(l))return t(F(l).toISOString());t(F(M).toISOString())};return s.jsxs(dt,{variant:"filled",fullWidth:!0,size:"small",...i,children:[s.jsx(Lt,{htmlFor:g,children:"Requested Ship Date"}),s.jsx(Wo,{type:"date",value:x(e),inputRef:a,onChange:y,disabled:o,inputProps:{readOnly:r,id:g,ref:a,min:F(l).format("YYYY-MM-DD"),max:F(l).add(1,"year").format("YYYY-MM-DD"),...n},startAdornment:s.jsx(ye,{position:"start",children:s.jsx(le,{"aria-label":"Show available ship dates",onClick:S,children:s.jsx(ou,{})})})}),s.jsx(zi,{id:C,open:!!p,anchorEl:p,onClose:()=>f(null),children:s.jsx(au,{value:F(x(e)),onChange:O,minDate:F(l)})})]})}function Hy({value:e,onChange:t,readOnly:n,required:r,inputProps:o,ref:a,...i}){const c=u.useId(),l=u.useId(),m=p=>{t(p.target.value)};return s.jsxs(dt,{fullWidth:!0,variant:"filled",size:"small",...i,required:r,children:[s.jsx(Lt,{id:c,children:"Ship Method"}),s.jsxs(nn,{labelId:c,id:l,inputRef:a,value:e,onChange:m,inputProps:o,readOnly:n,required:r,children:[!n&&s.jsx(ie,{value:"",children:"Select Shipping Method"}),n&&s.jsx(ie,{value:""}),Object.keys(us).filter(p=>us[p].enabled).map(p=>s.jsx(ie,{value:us[p].code,children:us[p].description},p))]})]})}function By(){const e=I(),t=d(xa),n=d(_m),r=d(Fm),[o,a]=u.useState(t!=="idle");u.useEffect(()=>{a(t!=="idle")},[t]);const i=()=>{e(kc())};return s.jsxs(ut,{onClose:i,open:o,maxWidth:"sm",children:[s.jsx(kt,{children:"Sending proposed order email"}),s.jsxs(mt,{children:[t==="pending"&&s.jsx(z,{variant:"indeterminate"}),t==="fulfilled"&&s.jsx(z,{variant:"determinate",value:100}),!!n&&s.jsx(_,{severity:"error",children:n}),r&&s.jsx("table",{className:"table table-sm",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("th",{children:"From"}),s.jsx("td",{children:r.envelope.from})]}),s.jsxs("tr",{children:[s.jsx("th",{children:"To"}),s.jsx("td",{children:r.envelope.to.join(", ")})]}),s.jsxs("tr",{children:[s.jsx("th",{children:"Accepted"}),s.jsx("td",{children:r.accepted.length?r.accepted.join(", "):"-"})]}),s.jsxs("tr",{children:[s.jsx("th",{children:"Rejected"}),s.jsx("td",{children:r.rejected.length?r.rejected.join(", "):"-"})]})]})})]}),s.jsx(pt,{children:s.jsx(N,{onClick:i,children:"Close"})})]})}function Ky({cartId:e,onClick:t,disabled:n,...r}){const o=I(),a=d(se),i=d(xa),c=d(m=>ve(m,e)),l=async m=>{a&&(await o(bp({customerKey:a,cartId:e})),t&&t(m))};return s.jsxs(s.Fragment,{children:[s.jsx(N,{type:"button",variant:"text",onClick:l,disabled:c!=="idle"||i!=="idle"||n,...r,children:"Send Email"}),s.jsx(By,{})]})}const $y=te(E)`
    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }
`;function zy({cartId:e}){const t=I(),n=d(se),r=d(Wh),o=d(Vh),a=d(Yh),i=d(Y=>ve(Y,e)),[c,l]=u.useState(1),[m,p]=u.useState(null),[f,g]=u.useState(""),[C,y]=ka(f,500),[x,S]=u.useState(r??[]),O=u.useCallback(async()=>{!m||!n||!c||(globalThis.window?.gtag&&globalThis.window.gtag("event","add_to_cart",{items:[{item_id:m.ItemCode,item_name:m.ItemCodeDesc??m.ItemCode,quantity:c}]}),await t(Se({cartId:e,customerKey:n,item:{itemCode:m.ItemCode,itemType:"1",unitOfMeasure:m.SalesUnitOfMeasure,quantityOrdered:c,commentText:""}})))},[m,n,c]);u.useEffect(()=>{S(r??[])},[r]),u.useEffect(()=>{y(f)},[f]),u.useEffect(()=>{t(Rn(C))},[C]);const M=(Y,Z)=>{p(Z)},V=(Y,Z)=>{g(Z)},Qe=Y=>{const Z=+Y.target.value;l(Math.max(Z,1))};return s.jsxs(v,{direction:"row",spacing:1,children:[s.jsx(Ui,{size:"small",sx:{width:300,display:"inline-block"},renderInput:Y=>s.jsx(E,{...Y,variant:"filled",size:"small",label:"Search Items",fullWidth:!0,slotProps:{input:{...Y.InputProps,endAdornment:s.jsxs(s.Fragment,{children:[o&&s.jsx(Mi,{color:"inherit",size:20}),Y.InputProps.endAdornment]})}}}),inputValue:f,onInputChange:V,isOptionEqualToValue:(Y,Z)=>Y.ItemCode===Z.ItemCode,options:x,noOptionsText:a?"Item Not Found":null,blurOnSelect:!0,getOptionLabel:Y=>Y.ItemCode,filterOptions:Y=>Y,onChange:M,renderOption:(Y,Z)=>{const fe=yc.replace(":image",encodeURIComponent(Z.filename??"missing.png"));return u.createElement("li",{...Y,key:Z.ItemCode},s.jsxs("div",{className:"search-result row g-3",children:[s.jsx("div",{className:"col-auto",children:!!Z.filename&&s.jsx("img",{src:fe,alt:Z.ItemCodeDesc??Z.ItemCode,className:"img-fluid"})}),s.jsxs("div",{className:"col",children:[s.jsx("div",{children:Z.ItemCode}),!!Z.ItemCodeDesc&&s.jsx("div",{className:"text-muted small",children:Z.ItemCodeDesc})]}),s.jsx("div",{className:"col-auto",children:Z.SalesUnitOfMeasure??"EA"})]}))},value:m}),s.jsx($y,{size:"small",variant:"filled",type:"number",inputProps:{inputMode:"numeric",min:1,pattern:"[0-9]*",maxLength:4},label:"Quantity",value:c,onChange:Qe,InputProps:{endAdornment:s.jsx(ye,{position:"end",children:m?.SalesUnitOfMeasure??"EA"})}}),s.jsx(Bl,{disabled:!c||!m||i!=="idle",type:"button",size:"small",color:"primary",fullWidth:!1,onClick:O}),s.jsx("div",{})]})}function Wy({value:e,onChange:t,readOnly:n,required:r,inputProps:o,ref:a,...i}){const c=u.useId(),m=d(gg).filter(g=>ns[g.PaymentType]?.allowCC&&!ns[g.PaymentType].disabled).map(g=>{const C=ns[g.PaymentType];return{...C,code:`${C.code}:${g.CreditCardID}`,customerValue:g.CreditCardID}}),p=Object.values(ns).filter(g=>!g.disabled&&!g.allowCC),f=g=>{t(g.target.value)};return s.jsxs(dt,{fullWidth:!0,variant:"filled",size:"small",...i,required:r,children:[s.jsx(Lt,{id:c,children:"Payment Method"}),s.jsxs(nn,{onChange:f,value:e??"",ref:a,labelId:c,readOnly:n,required:r,inputProps:o,variant:"filled",children:[s.jsx(ie,{value:""}),m.map(g=>s.jsxs(ie,{value:g.code,children:[g.description," [",g.customerValue,"]"]},g.code)),p.map(g=>s.jsx(ie,{value:g.code,children:g.description},g.code))]}),ns[e]?.message&&s.jsx(Vi,{children:ns[e]?.message})]})}const Gy=["Cart","Shipping & Delivery","Payment","Confirm Checkout"];function Vy({current:e,disabled:t,onChange:n}){const r=u.useId(),o=4,a=e/(zt+1),i=a*100+100/o/2,c=l=>{t||n(l)};return s.jsxs(b,{sx:{width:"100%",mb:1,mt:2},children:[s.jsx(b,{"aria-label":`Checkout Progress: ${Gy[a]}`,id:r,children:s.jsx(z,{variant:"determinate",value:i,"aria-labelledby":r})}),s.jsxs(P,{container:!0,spacing:1,children:[s.jsx(P,{size:3,sx:{textAlign:"center"},children:s.jsx(N,{type:"button",size:"small",disabled:t,onClick:()=>c(Pe),children:"Cart"})}),s.jsx(P,{size:3,sx:{textAlign:"center"},children:s.jsx(N,{type:"button",disabled:t||e<wt,size:"small",onClick:()=>c(wt),children:"Shipping & Delivery"})}),s.jsx(P,{size:3,sx:{textAlign:"center"},children:s.jsx(N,{type:"button",disabled:t||e<Bt,size:"small",onClick:()=>c(Bt),children:"Payment"})}),s.jsx(P,{size:3,sx:{textAlign:"center"},children:s.jsx(N,{type:"button",disabled:t||e<zt,size:"small",onClick:()=>c(zt),children:"Confirm"})})]})]})}function Yy({customerKey:e,cartId:t,disabled:n,children:r,...o}){const a=I(),i=d(x=>ss(x,t)),c=xe(),[l,m]=u.useState(!1),[p,f]=u.useState(!1),g=u.useCallback(async()=>{if(!i||!e)return;f(!0),await a(wp({customerKey:e,cartId:i.id,salesOrderNo:i.salesOrderNo})),m(!1),f(!1);const x=$("/account/:customerSlug/carts",{customerSlug:e});c(x,{replace:!0})},[i,e]),C=()=>{m(!0)},y=()=>m(!1);return!i||!e?null:s.jsxs(s.Fragment,{children:[s.jsx(N,{type:"button",variant:"text",color:"error",onClick:C,disabled:n,...o,children:r??"Delete Cart"}),s.jsxs(ut,{onClose:y,open:l,maxWidth:"sm",children:[s.jsxs(kt,{children:["Delete Cart #",i.id]}),s.jsxs(mt,{children:[s.jsxs(_t,{children:["Are you sure you want to delete cart ",s.jsx("strong",{children:i.customerPONo}),"?"]}),p&&s.jsx(z,{variant:"indeterminate"})]}),s.jsxs(pt,{children:[s.jsx(N,{onClick:g,disabled:p,color:"error",children:"Delete"}),s.jsx(N,{onClick:y,disabled:p,autoFocus:!0,children:"Cancel"})]})]})]})}function qy({cartProgress:e,type:t,...n}){const r=()=>{switch(e){case Pe:return"Begin Checkout";case wt:return"Confirm Delivery & Shipping";case Bt:return"Confirm Payment";default:return"Submit Order"}};return s.jsx(N,{type:t??"button",variant:e===zt?"contained":"outlined",...n,children:r()})}function Zy({cartId:e,disabled:t}){const n=I(),r=d(se),[o,a]=u.useState("");u.useEffect(()=>{a("")},[e]);const i=async()=>{!r||!o.trim()||(await n(Se({customerKey:r,cartId:e,item:{itemType:"4",itemCode:"/C",commentText:o.trim(),quantityOrdered:0,unitOfMeasure:null}})),a(""))};return s.jsxs(v,{spacing:1,direction:"row",sx:{flex:"1 1 auto"},children:[s.jsx(E,{label:"Add Cart Comment",value:o,onChange:c=>a(c.target.value),variant:"filled",size:"small",multiline:!0,fullWidth:!0}),s.jsx(N,{color:"primary",variant:"text",type:"button",size:"small",onClick:i,disabled:!o||t,children:"Save"})]})}function Jy(){const e=I(),t=d(se),n=d(ln),r=d(B=>ss(B,n)),o=d(B=>Sa(B,n)),a=d(B=>ve(B,n)),i=d(Ar),c=u.useRef(null),l=u.useRef(null),m=u.useRef(null),p=u.useRef(null),f=xe(),g=d(B=>Fc(B,n)),C=d(Dr),y=d(_c),[x,S]=u.useState(r),[O,M]=u.useState(Pe),V=u.useCallback(async()=>{if(!x)return;const B=await e(Vt(x));if(console.log("promoteCart",B),B.payload&&typeof B.payload=="string"){f($("/account/:customerSlug/orders/:salesOrderNo",{customerSlug:t,salesOrderNo:B.payload}),{replace:!0});return}f($("/account/:customerSlug/carts",{customerSlug:t}),{replace:!0})},[e,x,C,t,f]);u.useEffect(()=>{i&&M(Pe)},[i]),u.useEffect(()=>{e(So())},[]);const Qe=B=>{if(!x)return Pe;if(B>=Pe){const me=F(x.shipExpireDate);if(!x.shipExpireDate||!me.isValid()||me.isBefore(y))return c.current?.focus(),wt;if(!x.shipVia)return l.current?.focus(),wt}if(B>=wt){if(!x.PaymentType)return m.current?.focus(),Bt;if(!x.customerPONo)return p.current?.focus(),Bt}return Fy(B)};if(u.useEffect(()=>{if(!r){S(null);return}S({...r,shipExpireDate:y??F().add(7,"days").format("YYYY-MM-DD")})},[r,y]),!t||!r||!x)return null;const Y=F(x.dateCreated).format("YYYY-MM-DD"),Z=B=>me=>{switch(B){case"customerPONo":case"promoCode":S({...x,[B]:me.target.value,changed:!0});return;case"CancelReasonCode":S({...x,[B]:me.target.checked?"HOLD":"",changed:!0});return}},fe=B=>me=>{switch(B){case"shipExpireDate":if(F(me).isValid())switch(F(me).day()){case 0:S({...x,[B]:F(me).add(1,"day").toISOString(),changed:!0});return;case 6:S({...x,[B]:F(me).add(2,"day").toISOString(),changed:!0});return}S({...x,[B]:me??"",changed:!0});return;case"shipVia":case"PaymentType":S({...x,[B]:me??"",changed:!0})}},ft=(B,me)=>{if(x){if(!me){S({...x,shipToCode:B,changed:!0}),M(Pe);return}S({...x,shipToCode:B,...me,changed:!0}),M(Pe)}},Be=()=>{!t||!r||e(Me({customerKey:t,cartId:r.id}))},Fe=()=>{M(Pe),!(!t||!r)&&(e(Me({customerKey:t,cartId:r?.id})),e(So()))},ce=async()=>{!t||!x||e(At({customerKey:t,cartId:x.id,body:x}))},gt=async()=>{if(x){if(O<zt){const B=Qe(O);switch(console.log("submitHandler",B),B){case wt:cx(r,o);break;case Bt:lx(r,o);break;case zt:ix(r,o);break}M(B);return}dx(r,o),await V()}};return s.jsxs(b,{component:"div",children:[s.jsxs(P,{container:!0,spacing:2,sx:{mb:1},children:[s.jsx(P,{size:{xs:12,sm:6},children:s.jsxs(v,{spacing:2,direction:"column",children:[s.jsxs(v,{spacing:2,direction:{xs:"column",lg:"row"},children:[s.jsx(E,{label:"Cart Created",type:"date",fullWidth:!0,variant:"filled",size:"small",value:Y,placeholder:"",slotProps:{htmlInput:{readOnly:!0}}}),s.jsx(E,{label:"Cart Expires",type:"date",size:"small",variant:"filled",fullWidth:!0,value:F(r?.shipExpireDate).format("YYYY-MM-DD"),slotProps:{htmlInput:{readOnly:!0}}})]}),s.jsx(E,{label:"Cart Name",type:"text",fullWidth:!0,variant:"filled",size:"small",value:x?.customerPONo??"",required:!0,onChange:Z("customerPONo"),slotProps:{htmlInput:{ref:p,maxLength:30}}}),s.jsx(E,{label:"Promo Code",type:"text",fullWidth:!0,slotProps:{htmlInput:{maxLength:30}},value:x?.promoCode??"",onChange:Z("promoCode"),variant:"filled",size:"small"})]})}),s.jsx(P,{size:{xs:12,sm:6},children:s.jsxs(v,{spacing:2,direction:"column",children:[s.jsx(Is,{value:x?.shipToCode??"",disabled:a!=="idle",defaultName:"Default Address",onChange:ft}),s.jsx(E,{label:"Delivery Address",type:"text",multiline:!0,variant:"filled",size:"small",value:Qo(Xo(x)).join(`
`),slotProps:{htmlInput:{readOnly:!0}}})]})})]}),s.jsxs(P,{container:!0,spacing:2,sx:{mb:1},children:[s.jsx(P,{size:{xs:12,sm:6},children:s.jsx(Gt,{in:O>=wt,collapsedSize:0,children:s.jsxs(v,{spacing:2,direction:"column",children:[s.jsxs(v,{spacing:2,direction:{xs:"column",md:"row"},children:[s.jsx(_y,{value:x?.shipExpireDate??y,disabled:a!=="idle",error:!x?.shipExpireDate||!F(x.shipExpireDate).isValid()||F(x?.shipExpireDate).isBefore(y),onChange:fe("shipExpireDate"),inputProps:{required:!0},ref:c}),s.jsx(dt,{variant:"filled",fullWidth:!0,children:s.jsx(qs,{control:s.jsx(gs,{checked:x?.CancelReasonCode==="HOLD",onChange:Z("CancelReasonCode")}),label:"Hold for Ship Date"})})]}),s.jsxs(v,{spacing:2,direction:{xs:"column",md:"row"},children:[s.jsx(Hy,{value:x?.shipVia??"",required:!0,disabled:a!=="idle",error:!x?.shipVia,ref:l,onChange:fe("shipVia")}),s.jsx(Uy,{shipVia:x?.shipVia})]})]})})}),s.jsx(P,{size:{xs:12,sm:6},children:s.jsx(Gt,{in:O>=Bt,collapsedSize:0,children:s.jsxs(v,{spacing:2,direction:"column",children:[s.jsx(Wy,{value:x?.PaymentType??"",error:!x?.PaymentType,ref:m,required:!0,disabled:a!=="idle",onChange:fe("PaymentType")}),s.jsx(E,{label:"Purchase Order No",type:"text",fullWidth:!0,variant:"filled",size:"small",value:x?.customerPONo??"",onChange:Z("customerPONo"),slotProps:{htmlInput:{maxLength:30}},disabled:a!=="idle",error:!x.customerPONo,required:!0})]})})})]}),s.jsx(Vy,{current:O,disabled:a!=="idle",onChange:M}),s.jsxs(v,{spacing:2,direction:{sm:"column",md:"row"},justifyContent:"space-between",children:[s.jsx(v,{sx:{flex:"1 1 auto"},children:(g||x?.changed)&&O===Pe&&s.jsx(_,{severity:"warning",children:"Don't forget to save your changes!"})}),s.jsxs(v,{spacing:3,direction:{sm:"column",md:"row"},sx:{justifyContent:"flex-end"},children:[s.jsx(Yy,{customerKey:t,cartId:x.id,disabled:a!=="idle"||x?.changed,children:"Delete Cart"}),s.jsx(N,{type:"button",variant:"text",onClick:Fe,disabled:a!=="idle",children:g||x?.changed?"Cancel Changes":"Reload"}),s.jsx(N,{type:"button",variant:(g||x?.changed)&&O===Pe?"contained":"text",color:g||x?.changed?"warning":"primary",onClick:ce,disabled:a!=="idle"||O!==Pe&&!g,children:"Save Cart"}),s.jsx(Ky,{cartId:x.id,disabled:O!==Pe||g,children:"Send Email"}),s.jsx(qy,{cartProgress:O,onClick:gt,disabled:a!=="idle"||g}),x.id!==n&&s.jsx(N,{type:"button",variant:"contained",disabled:a!=="idle",onClick:Be,children:"Set Current Cart"})]})]}),a!=="idle"&&s.jsx(z,{variant:"indeterminate"}),s.jsx(Jl,{context:Vt.typePrefix}),s.jsx("hr",{}),s.jsxs(v,{spacing:2,direction:{sm:"column",md:"row"},justifyContent:"space-between",divider:s.jsx(tt,{orientation:"vertical",flexItem:!0}),children:[s.jsx(zy,{cartId:r.id}),s.jsx(Zy,{cartId:r.id})]})]})}function md({cartId:e,lineId:t,readOnly:n,ref:r}){const o=I(),a=d(C=>Uc(C,t)),[i,c]=u.useState(a.commentText),[l,m]=ka(a.commentText,500);u.useEffect(()=>{n||a.commentText===l||o(Xn({cartHeaderId:e,id:t,commentText:l}))},[l,a,n]);const p={"table-warning":a.changed,"table-info":!a.id},f=C=>{c(C.target.value),m(C.target.value)},g=()=>{n||o(Xn({cartHeaderId:e,id:t,commentText:""}))};return s.jsxs(U,{className:Ae(p),children:[a.itemType==="4"&&s.jsx(h,{className:"text-center",children:s.jsx(Ii,{})}),s.jsx(h,{colSpan:3,children:s.jsx(b,{sx:{display:"flex",flexDirection:"row"},children:s.jsx(E,{value:i??"",fullWidth:!0,size:"small",variant:"filled",ref:r,label:"Item Comment",sx:{flex:"1 1 auto"},multiline:!0,maxRows:4,minRows:1,onChange:f,slotProps:{htmlInput:{readOnly:n,maxLength:2048},input:{endAdornment:s.jsx(le,{size:"small",onClick:g,"aria-label":"remove comment",children:s.jsx(Zi,{})})}}})})}),s.jsx(h,{colSpan:4,children:""}),a.itemType==="4"&&s.jsx(h,{children:""})]})}const pd=({quantityOrdered:e,quantityAvailable:t,season:n})=>{const r=d(pa),o=new w(t??0),a=new w(e);if(n&&n.active&&!n.available)return s.jsx(_,{severity:"info",icon:s.jsx(iu,{}),children:"Pre-season Item"});if(o.gte(a))return null;if(o.lte(0)||!r)return s.jsx(Uo,{severity:"warning",children:"Not available for immediate delivery."});const i=`Only ${o} ${o.eq(1)?"is":"are"} available for immediate delivery`;return s.jsx(Uo,{severity:"warning",message:i,alertTitle:"Note:"})},hd=({onDelete:e,deleteDisabled:t,onAddComment:n,addCommentDisabled:r,onCopyToCart:o,copyToCartDisabled:a})=>{const i=[{icon:s.jsx(Ni,{}),name:"Add to Cart",disabled:!o||a,onClick:o},{icon:s.jsx(cu,{}),name:"Add Comment",disabled:!n||r,onClick:n},{icon:s.jsx(Zi,{color:"error"}),name:"Remove From Cart",disabled:!e||t,onClick:e}];return s.jsx(b,{sx:{position:"relative",height:"calc(0.5rem + 80px + 24px)"},children:s.jsx(Pi,{ariaLabel:"Cart Item Actions",icon:s.jsx(Ai,{}),direction:"left",sx:{position:"absolute",bottom:8,right:0},children:i.filter(c=>!c.disabled).map(c=>s.jsx(Ti,{icon:c.icon,slotProps:{tooltip:{title:c.name}},onClick:c.onClick},c.name))})})};function Xy({cartId:e,lineId:t,readOnly:n,customerPriceLevel:r,onDelete:o,onAddToCart:a}){const i=I(),c=d(O=>Uc(O,t)),l=u.useRef(null),m=d(pa),[p,f]=u.useState(!!c.commentText),g=new w(1).sub(new w(c.lineDiscountPercent??0).div(100)).times(new w(c.unitPrice??0).div(c.unitOfMeasureConvFactor??1)),C=new w(1).sub(new w(c.lineDiscountPercent??0).div(100)).times(c.unitPrice??0),y=O=>{n||O===c.quantityOrdered||i(Xn({cartHeaderId:e,id:t,quantityOrdered:O}))},x={"table-warning":c.changed},S=()=>{f(!0),l.current?.focus()};return s.jsxs(s.Fragment,{children:[s.jsxs(U,{sx:{'& > *:not([rowspan="2"])':{borderBottom:p?"unset":void 0},verticalAlign:"top"},className:Ae(x),children:[s.jsx(h,{rowSpan:p?2:1,component:"th",children:s.jsxs(_o,{categoryKeyword:c.cartProduct.categoryKeyword,productKeyword:c.cartProduct.productKeyword,children:[s.jsx(j,{variant:"body1",sx:{fontWeight:700},component:"div",children:c.itemCode}),c.itemType==="1"&&s.jsx(mn,{itemCode:c.itemCode,itemCodeDesc:c.itemCodeDesc,image:c.cartProduct.image,colorCode:c.cartProduct.colorCode})]})}),s.jsxs(h,{children:[s.jsx(_o,{categoryKeyword:c.cartProduct.categoryKeyword,productKeyword:c.cartProduct.productKeyword,children:s.jsx(j,{variant:"body1",children:c.itemCodeDesc})}),!!c.cartProduct.upc&&s.jsx(Da,{value:c.cartProduct.upc}),c.cartProduct.requiresCustomization&&s.jsx(_,{variant:"outlined",color:"info",children:"Product requires customization: UPC Sticker"}),!n&&m&&c.itemType==="1"&&s.jsx(pd,{quantityOrdered:c.quantityOrdered,quantityAvailable:c.cartProduct.available,season:c.season})]}),s.jsx(h,{children:c.unitOfMeasure}),s.jsxs(h,{align:"right",children:[n&&s.jsx("span",{children:c.quantityOrdered}),!n&&s.jsx(Kl,{quantity:+c.quantityOrdered,min:0,unitOfMeasure:c.unitOfMeasure??"EA",disabled:n,onChange:y})]}),s.jsxs(h,{align:"right",children:[s.jsx("div",{children:D(g).format("0,0.00")}),!!c.lineDiscountPercent&&new w(c.lineDiscountPercent??0).gt(0)&&s.jsxs("div",{className:"sale",children:[c.lineDiscountPercent,"% Off"]}),!!c.pricing.priceLevel&&c.pricing.priceLevel!==r&&s.jsx(Oa,{priceLevel:c.pricing.priceLevel})]}),s.jsx(h,{align:"right",children:D(c.pricing.suggestedRetailPrice).format("0,0.00")}),s.jsx(h,{align:"right",children:D(C).format("0,0.00")}),s.jsx(h,{align:"right",children:D(new w(c.quantityOrdered??0).times(C)).format("0,0.00")}),s.jsx(h,{rowSpan:p?2:1,children:s.jsx(hd,{onDelete:o,deleteDisabled:n,onAddComment:S,addCommentDisabled:n||p||!!c.commentText,onCopyToCart:a,copyToCartDisabled:!c.productType||c.productType==="D"||c.cartProduct.inactiveItem||c.itemType!=="1"})})]}),p&&s.jsx(md,{cartId:e,lineId:t,ref:l,readOnly:n})]})}function Qy({line:e,readOnly:t,onAddToCart:n}){const r=new w(1).sub(new w(e.lineDiscountPercent).div(100)).times(new w(e.unitPrice).div(e.unitOfMeasureConvFactor??1)),o=new w(1).sub(new w(e.lineDiscountPercent).div(100)).times(e.unitPrice),a={};return s.jsxs(U,{sx:{verticalAlign:"top"},className:Ae(a),children:[s.jsx(h,{children:s.jsxs(v,{direction:"row",children:[s.jsx("div",{children:s.jsx(lu,{})}),s.jsxs("div",{children:[s.jsx("div",{children:e.itemCode}),e.itemType==="1"&&s.jsx(mn,{itemCode:e.itemCode,itemCodeDesc:e.itemCodeDesc,image:e.cartProduct.image,colorCode:e.cartProduct.colorCode})]})]})}),s.jsxs(h,{children:[s.jsx("p",{children:e.itemCodeDesc}),!!e.cartProduct.upc&&s.jsx("p",{children:We.format(e.cartProduct.upc)}),!t&&s.jsx(pd,{quantityOrdered:e.quantityOrdered,quantityAvailable:e.cartProduct.available??0})]}),s.jsx(h,{children:e.unitOfMeasure}),s.jsx(h,{align:"center",children:D(e.quantityOrdered).format("0,0")}),s.jsx(h,{align:"right",children:new w(r??0).eq(0)?null:D(r).format("0,0.00")}),s.jsx(h,{align:"right",children:D(e.pricing.suggestedRetailPrice).format("0,0.00")}),s.jsx(h,{align:"right",children:new w(r??0).eq(0)?null:D(o).format("0,0.00")}),s.jsx(h,{align:"right",children:new w(r??0).eq(0)?null:D(new w(e.quantityOrdered).times(o)).format("0,0.00")}),s.jsx(h,{align:"right",children:s.jsx(hd,{onCopyToCart:n,copyToCartDisabled:t||!e.productType||e.productType==="D"||e.cartProduct.inactiveItem||e.itemType!=="1"})})]})}function eS({line:e,readOnly:t,customerPriceLevel:n,onAddToCart:r}){const o=I(),a=d(se),i=d(g=>wh(g,e.id)),c=d(g=>Fc(g,e.cartHeaderId)),l=u.useRef(null),m=()=>{if(t||!a)return;if(c){o(Xn({cartHeaderId:e.cartHeaderId,id:e.id,quantityOrdered:0}));return}const g={quantityOrdered:0,commentText:"",itemType:e.itemType};o(Ge({customerKey:a,cartId:e.cartHeaderId,cartItemId:e.id,item:g}))},p=()=>{r&&r(e)};if(e.soDetail.itemType==="4")return s.jsxs(s.Fragment,{children:[s.jsx(md,{cartId:e.cartHeaderId,lineId:e.id,ref:l}),!!i&&i!=="idle"&&s.jsx(U,{children:s.jsx(h,{colSpan:9,children:s.jsx(z,{variant:"indeterminate"})})})]});const f=!!e.soDetail.salesKitLineKey&&e.soDetail.salesKitLineKey!==e.soDetail.lineKey;return s.jsxs(s.Fragment,{children:[!f&&s.jsx(Xy,{cartId:e.cartHeaderId,lineId:e.id,customerPriceLevel:n,readOnly:t,onDelete:m,onAddToCart:p}),e.soDetail.productType==="K"&&e.soDetail.explodedKitItem==="Y"&&s.jsxs(U,{sx:{verticalAlign:"top"},children:[s.jsx(h,{children:""}),s.jsx(h,{colSpan:4,children:"Contains:"}),s.jsx(h,{children:""}),s.jsx(h,{children:""})]}),f&&s.jsx(Qy,{line:e,readOnly:t,onAddToCart:p}),i!=="idle"&&s.jsx(U,{children:s.jsx(h,{colSpan:9,children:s.jsx(z,{variant:"indeterminate"})})})]})}function tS({cartId:e}){const t=d(i=>ss(i,e)),n=d(Dr);if(!t)return null;const r=new w(t.subTotalAmt),o=r.add(t.FreightAmt??0).add(t.SalesTaxAmt??0).sub(t.DepositAmt??0).sub(t.DiscountAmt??0),a=()=>!(Xi(t.shipVia)?.allowCustomerAccount&&n?.enabled);return s.jsxs($o,{children:[s.jsxs(U,{children:[s.jsx(h,{component:"th",scope:"row",colSpan:5,align:"right",children:"Sub Total"}),s.jsx(h,{colSpan:2,children:" "}),s.jsx(h,{align:"right",children:D(r.toString()).format("$ 0,0.00")}),s.jsx(h,{children:" "})]}),s.jsxs(U,{children:[s.jsxs(h,{component:"th",scope:"row",colSpan:5,align:"right",children:["Sales Tax ",new w(t.SalesTaxAmt??0).eq(0)?"":t.TaxSchedule]}),s.jsx(h,{colSpan:2,children:" "}),s.jsx(h,{align:"right",children:t.SalesTaxAmt===null?"TBD":D(t.SalesTaxAmt??0).format("$ 0,0.00")}),s.jsx(h,{children:" "})]}),s.jsxs(U,{children:[s.jsx(h,{colSpan:5,align:"right",children:"Freight"}),s.jsx(h,{colSpan:2,children:" "}),s.jsx(h,{align:"right",children:a()?"TBD":D(t.FreightAmt??0).format("$ 0,0.00")}),s.jsx(h,{children:" "})]}),!new w(t.DiscountAmt??0).eq(0)&&s.jsxs(U,{children:[s.jsx(h,{colSpan:5,align:"right",children:"Discount"}),s.jsx(h,{colSpan:2,children:" "}),s.jsx(h,{align:"right",children:D(t.DiscountAmt).format("$ 0,0.00")}),s.jsx(h,{children:" "})]}),!new w(t.DepositAmt??0).eq(0)&&s.jsxs(U,{children:[s.jsx(h,{colSpan:5,align:"right",children:"Deposit"}),s.jsx(h,{colSpan:2,children:" "}),s.jsx(h,{align:"right",children:D(t.DepositAmt).format("$ 0,0.00")}),s.jsx(h,{children:" "})]}),s.jsxs(U,{children:[s.jsx(h,{colSpan:5,align:"right",children:"Total"}),s.jsx(h,{colSpan:2,children:" "}),s.jsx(h,{align:"right",children:a()?"TBD":D(o.toString()).format("$ 0,0.00")}),s.jsx(h,{children:" "})]})]})}function sS({item:e,unitOfMeasure:t,excludeCartId:n,open:r,onClose:o,onDone:a,onCancel:i}){const[c,l]=u.useState(e?.quantity??1);return e?s.jsxs(ut,{open:r,onClose:o,children:[s.jsxs(kt,{children:["Add ",e?.itemCode," To Cart"]}),s.jsx(mt,{children:!!e&&s.jsx(Hr,{cartItem:e,unitOfMeasure:t,quantity:c,onChangeQuantity:l,excludeCartId:n,onDone:a})}),s.jsx(pt,{children:s.jsx(N,{autoFocus:!0,onClick:i,children:"Cancel"})})]}):null}function nS({cartId:e}){const t=d(m=>Sa(m,e)),n=d(m=>ss(m,e)),[r,o]=u.useState(null),[a,i]=u.useState("EA");u.useEffect(()=>{ax(n,t)},[n,t]);const c=m=>{i(m.unitOfMeasure??"EA");const p=gp(m);if(!p){o(null);return}o(p)},l=()=>{o(null)};return s.jsxs(fr,{sx:{mt:3},children:[s.jsxs(ct,{size:"small",children:[s.jsx(Zt,{children:s.jsxs(U,{children:[s.jsx(h,{children:"Item"}),s.jsx(h,{children:"Description"}),s.jsx(h,{children:"U/M"}),s.jsx(h,{align:"right",children:"Ordered"}),s.jsx(h,{align:"right",children:"Unit Price"}),s.jsx(h,{align:"right",children:"MSRP"}),s.jsx(h,{align:"right",children:"Item Price"}),s.jsx(h,{align:"right",children:"Ext Price"}),s.jsx(h,{align:"center",children:"Action"})]})}),s.jsx(lt,{children:t.map(m=>s.jsx(eS,{line:m,onAddToCart:c},m.id))}),s.jsx(tS,{cartId:e})]}),s.jsx(sS,{item:r,unitOfMeasure:a,open:!!r,onClose:l,onDone:l,onCancel:l})]})}function rS(){const e=I(),t=xe(),n=Ye(),r=d(se),o=d(c=>ve(c,Vr(n.cartId))),a=d(c=>ss(c,Vr(n.cartId)));u.useEffect(()=>{const c=Vr(n.cartId);Number.isNaN(c)||!c||!r||e(Me({cartId:c,customerKey:r,setActiveCart:!0}))},[n,r]),u.useEffect(()=>{o==="not-found"&&t($("/account/:customerSlug/carts",{customerSlug:Ee(r)}),{replace:!0})},[o,r]);const i=`Cart #${n?.cartId}`;return!a||!r?s.jsxs("div",{children:[s.jsx(re,{documentTitle:i}),s.jsx(j,{variant:"h3",component:"h2",children:i}),s.jsx(My,{}),s.jsx(z,{variant:"indeterminate"})]}):s.jsxs("div",{children:[s.jsx(re,{documentTitle:i}),s.jsxs(j,{variant:"h3",component:"h2",children:["Cart #",a.id]}),s.jsx(Jy,{}),s.jsx(nS,{cartId:a.id})]})}const oS=()=>{const e=Xe(),t=I(),n=d(H),r=d(q),o=d(je),a=d(ba),i=d(Ml),c=Ue();return u.useEffect(()=>{Zu()},[c]),u.useEffect(()=>{if(e)return;T.removeDeprecatedItems();const l=oe.getToken();l&&vr(l)&&oe.removeToken()},[e]),u.useEffect(()=>{n&&(t(ot()),r&&!o&&!a&&t(G(r)))},[n]),s.jsx(u.StrictMode,{children:s.jsx(du,{dateAdapter:uu,children:s.jsx(mu,{theme:my,children:s.jsx(pu,{children:s.jsx(wd,{clientId:Ap,nonce:i??void 0,children:s.jsx(bd,{children:s.jsxs(K,{path:"/",element:s.jsx(ZC,{}),children:[s.jsx(K,{index:!0,element:s.jsx(yi,{})}),s.jsx(K,{path:"/home",element:s.jsx(yi,{})}),s.jsx(K,{path:"/products",element:s.jsx(vn,{})}),s.jsx(K,{path:"/products/:category",element:s.jsx(vn,{})}),s.jsx(K,{path:"/products/:category/:product",element:s.jsx(vn,{})}),s.jsx(K,{path:"/products/:category/:product/:sku",element:s.jsx(vn,{})}),s.jsx(K,{path:"/pages/:keyword",element:s.jsx(bx,{})}),!n&&s.jsxs(s.Fragment,{children:[s.jsx(K,{path:"/set-password/:hash/:key",element:s.jsx(to,{})}),s.jsx(K,{path:"/set-password",element:s.jsx(to,{})}),s.jsx(K,{path:"/signup/:hash/:key",element:s.jsx(to,{})}),s.jsx(K,{path:"/signup",element:s.jsx(Sx,{})}),s.jsx(K,{path:"/reset-password",element:s.jsx(vy,{})}),s.jsx(K,{path:"/login",element:s.jsx(Xr,{})}),s.jsx(K,{path:"*",element:s.jsx(Xr,{})})]}),n&&s.jsxs(s.Fragment,{children:[s.jsx(K,{path:"/login",element:s.jsx(Xr,{})}),s.jsx(K,{path:"/logout",element:s.jsx(vx,{})}),s.jsx(K,{path:"/profile",element:s.jsx(Kg,{})}),s.jsx(K,{path:"/profile/set-password",element:s.jsx(wy,{})}),s.jsx(K,{path:"/profile/:id",element:s.jsx(Gx,{})}),s.jsxs(K,{path:"/account/:customerSlug",element:s.jsx(Jg,{}),children:[s.jsx(K,{index:!0,element:s.jsx(Oj,{})}),s.jsx(K,{path:"delivery",element:s.jsx(dy,{})}),s.jsx(K,{path:"delivery/:shipToCode",element:s.jsx(Bj,{})}),s.jsx(K,{path:"users",element:s.jsx(Vj,{}),children:s.jsx(K,{path:":id?",element:s.jsx(Ty,{})})}),s.jsx(K,{path:"carts",element:s.jsx(Ry,{})}),s.jsx(K,{path:"carts/:cartId",element:s.jsx(rS,{})}),s.jsx(K,{path:"orders",element:s.jsx(ny,{})}),s.jsx(K,{path:"orders/:salesOrderNo",element:s.jsx(px,{})}),s.jsx(K,{path:"closed/:salesOrderNo",element:s.jsx(Sy,{})}),s.jsx(K,{path:"invoices",element:s.jsx(cy,{})}),s.jsx(K,{path:"invoices/:type/:invoiceNo",element:s.jsx(Dx,{})}),s.jsx(K,{path:"*",element:s.jsx(Gs,{})})]}),s.jsx(K,{path:"*",element:s.jsx(Gs,{})})]}),s.jsx(K,{path:"*",element:s.jsx(Gs,{})})]})})})})})})})};Id.hydrateRoot(document.getElementById("root"),s.jsx(Pd,{store:Dg,children:s.jsx(Td,{children:s.jsx(oS,{})})}));
//# sourceMappingURL=index-CZSzAtHI.js.map
